/*! For license information please see build.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports["react-infinite-grid-scroller"]=t(require("react"),require("react-dom")):e["react-infinite-grid-scroller"]=t(e.react,e["react-dom"])}(self,((e,t)=>(()=>{var r={109:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(81),o=r.n(n),i=r(645),a=r.n(i)()(o());a.push([e.id,"/*rigs.css*/\n:root {\n    --rigs-highlight-source: darkorange;\n    --rigs-highlight-target: black;\n    --rigs-highlight-dropped: darkorange;\n    --rigs-highlight-scrolltab: brown;\n    --rigs-highlight-scrollercandrop:red;\n}\n\n.rigs-source-highlight {\n    box-shadow: 0px 0px 6px 6px var(--rigs-highlight-source);\n    border-radius: 8px;\n}\n\n.rigs-target-highlight {\n    box-shadow: 0 0 0 6px var(--rigs-highlight-target);\n    border-radius: 8px;\n    opacity: 0.3;\n}\n\n.rigs-dropped-highlight {\n\n    border-radius: 8px;\n    animation: rigs-dropped-release 1s;\n}\n\n@keyframes rigs-dropped-release {\n\n    20% {box-shadow: 0 0 6px 6px var(--rigs-highlight-dropped);}\n\n    50% {box-shadow: 0 0 6px 6px transparent;}\n\n}\n\n.rigs-target-finish {\n    border-radius: 8px;\n    animation: rigs-target-fade .5s;\n}\n\n@keyframes rigs-target-fade {\n\n    0%  { \n        box-shadow: 0 0 0 6px var(--rigs-highlight-target);\n        opacity: 0.3;\n    }\n\n    100% {\n        box-shadow: 0 0 0 0 transparent;\n        opacity: 1;\n    }\n\n}\n\n.rigs-viewport-highlight {\n    border-radius: 8px;\n    box-shadow: 0 0 3px 6px var(--rigs-highlight-scrolltab);\n    transition: box-shadow .5s;\n}\n\n.rigs-viewport-candrop {\n    border-radius: 8px;\n    box-shadow: 0 0 3px 6px var(--rigs-highlight-scrollercandrop);\n    transition: box-shadow .5s;\n}\n\n.rigs-scrolltab-highlight-top {\n    border-radius: 8px;\n    animation: rigs-scrolltab-easein-top .5s;\n    opacity:0.7;\n    box-shadow:-3px 3px 3px 3px var(--rigs-highlight-scrolltab);\n}\n\n@keyframes rigs-scrolltab-easein-top {\n\n    0% {\n        opacity:0;\n        box-shadow: 0 0 0 0 transparent;\n    }\n    100%  { \n        opacity:0.7;\n        box-shadow:-3px 3px 3px 3px var(--rigs-highlight-scrolltab);\n    }\n\n}\n\n.rigs-scrolltab-highlight-bottom {\n    border-radius: 8px;\n    animation: rigs-scrolltab-easein-bottom .5s;\n    opacity:0.7;\n    box-shadow:-3px -3px 3px 3px var(--rigs-highlight-scrolltab);\n}\n\n@keyframes rigs-scrolltab-easein-bottom {\n\n    0% {\n        opacity:0;\n        box-shadow: 0 0 0 0 transparent;\n    }\n    100%  { \n        opacity:0.7;\n        box-shadow:-3px -3px 3px 3px var(--rigs-highlight-scrolltab);\n    }\n\n}\n\n.rigs-scrolltab-highlight-left {\n    border-radius: 8px;\n    animation: rigs-scrolltab-easein-left .5s;\n    opacity:0.7;\n    box-shadow:3px -3px 3px 3px var(--rigs-highlight-scrolltab);\n}\n\n@keyframes rigs-scrolltab-easein-left {\n\n    0% {\n        opacity:0;\n        box-shadow: 0 0 0 0 transparent;\n    }\n    100%  { \n        opacity:0.7;\n        box-shadow:3px -3px 3px 3px var(--rigs-highlight-scrolltab);\n    }\n\n}\n",""]);const l=a},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(a[s]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);n&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},63:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!=o--;){var a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}},308:(e,t,r)=>{var n,o,i;o=[],void 0===(i="function"==typeof(n=function(){"use strict";var e,t,n,o,i="undefined"!=typeof window?window:null!=typeof r.g?r.g:this||{},a=i.cancelRequestAnimationFrame&&i.requestAnimationFrame||setTimeout,l=i.cancelRequestAnimationFrame||clearTimeout,s=[],c=0,u=!1,d=7,f=35,h=125,p=0,g=0,v=0,m={get didTimeout(){return!1},timeRemaining:function(){var e=d-(Date.now()-g);return e<0?0:e}},y=b((function(){d=22,h=66,f=0}));function b(e){var t,r,n=99,o=function(){var i=Date.now()-r;i<n?t=setTimeout(o,n-i):(t=null,e())};return function(){r=Date.now(),t||(t=setTimeout(o,n))}}function I(){u&&(o&&l(o),n&&clearTimeout(n),u=!1)}function x(){125!=h&&(d=7,h=125,f=35,u&&(I(),P())),y()}function S(){o=null,n=setTimeout(C,0)}function w(){n=null,a(S)}function P(){u||(t=h-(Date.now()-g),e=Date.now(),u=!0,f&&t<f&&(t=f),t>9?n=setTimeout(w,t):(t=0,w()))}function C(){var r,o,i,a=d>9?9:1;if(g=Date.now(),u=!1,n=null,c>2||g-t-50<e)for(o=0,i=s.length;o<i&&m.timeRemaining()>a;o++)r=s.shift(),v++,r&&r(m);s.length?P():c=0}function O(e){return p++,s.push(e),P(),p}function R(e){var t=e-1-v;s[t]&&(s[t]=null)}if(i.requestIdleCallback&&i.cancelIdleCallback)try{i.requestIdleCallback((function(){}),{timeout:0})}catch(e){!function(e){var t,r;if(i.requestIdleCallback=function(t,r){return r&&"number"==typeof r.timeout?e(t,r.timeout):e(t)},i.IdleCallbackDeadline&&(t=IdleCallbackDeadline.prototype)){if(!(r=Object.getOwnPropertyDescriptor(t,"timeRemaining"))||!r.configurable||!r.get)return;Object.defineProperty(t,"timeRemaining",{value:function(){return r.get.call(this)},enumerable:!0,configurable:!0})}}(i.requestIdleCallback)}else i.requestIdleCallback=O,i.cancelIdleCallback=R,i.document&&document.addEventListener&&(i.addEventListener("scroll",x,!0),i.addEventListener("resize",x),document.addEventListener("focus",x,!0),document.addEventListener("mouseover",x,!0),["click","keypress","touchstart","mousedown"].forEach((function(e){document.addEventListener(e,x,{capture:!0,passive:!0})})),i.MutationObserver&&new MutationObserver(x).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}));return{request:O,cancel:R}})?n.apply(t,o):n)||(e.exports=i)},379:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},a=[],l=0;l<e.length;l++){var s=e[l],c=n.base?s[0]+n.base:s[0],u=i[c]||0,d="".concat(c," ").concat(u);i[c]=u+1;var f=r(d),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)t[f].references++,t[f].updater(h);else{var p=o(h,n);n.byIndex=l,t.splice(l,0,{identifier:d,updater:p,references:1})}a.push(d)}return a}function o(e,t){var r=t.domAPI(t);r.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var i=n(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var l=r(i[a]);t[l].references--}for(var s=n(e,o),c=0;c<i.length;c++){var u=r(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=s}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},11:(e,t,r)=>{"use strict";var n=r(156),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,i={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!s.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:l.current}}t.jsx=c},947:(e,t,r)=>{"use strict";e.exports=r(11)},156:t=>{"use strict";t.exports=e},111:e=>{"use strict";e.exports=t}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={id:e,exports:{}};return r[e](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nc=void 0;var i={};return(()=>{"use strict";o.r(i),o.d(i,{MasterDndContext:()=>fi,RigsDnd:()=>ot,ScrollerDndContext:()=>hi,default:()=>pi,isSafariIOS:()=>ci});var e={};o.r(e),o.d(e,{FILE:()=>we,HTML:()=>Oe,TEXT:()=>Ce,URL:()=>Pe});var t=o(156),r=o.n(t),n=o(947);function a(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var l="function"==typeof Symbol&&Symbol.observable||"@@observable",s=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+s(),REPLACE:"@@redux/REPLACE"+s(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+s()}};function u(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function d(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(a(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(a(1));return r(d)(e,t)}if("function"!=typeof e)throw new Error(a(2));var o=e,i=t,s=[],f=s,h=!1;function p(){f===s&&(f=s.slice())}function g(){if(h)throw new Error(a(3));return i}function v(e){if("function"!=typeof e)throw new Error(a(4));if(h)throw new Error(a(5));var t=!0;return p(),f.push(e),function(){if(t){if(h)throw new Error(a(6));t=!1,p();var r=f.indexOf(e);f.splice(r,1),s=null}}}function m(e){if(!u(e))throw new Error(a(7));if(void 0===e.type)throw new Error(a(8));if(h)throw new Error(a(9));try{h=!0,i=o(i,e)}finally{h=!1}for(var t=s=f,r=0;r<t.length;r++){(0,t[r])()}return e}return m({type:c.INIT}),(n={dispatch:m,subscribe:v,getState:g,replaceReducer:function(e){if("function"!=typeof e)throw new Error(a(10));o=e,m({type:c.REPLACE})}})[l]=function(){var e,t=v;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(a(11));function r(){e.next&&e.next(g())}return r(),{unsubscribe:t(r)}}})[l]=function(){return this},e},n}function f(e,t,...r){if("undefined"!=typeof process&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;e=new Error(t.replace(/%s/g,(function(){return r[n++]}))),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function h(e){return"object"==typeof e}const p="dnd-core/INIT_COORDS",g="dnd-core/BEGIN_DRAG",v="dnd-core/PUBLISH_DRAG_SOURCE",m="dnd-core/HOVER",y="dnd-core/DROP",b="dnd-core/END_DRAG";function I(e,t){return{type:p,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const x={type:p,payload:{clientOffset:null,sourceClientOffset:null}};function S(e){return function(t=[],r={publishSource:!0}){const{publishSource:n=!0,clientOffset:o,getSourceClientOffset:i}=r,a=e.getMonitor(),l=e.getRegistry();e.dispatch(I(o)),function(e,t,r){f(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){f(r.getSource(e),"Expected sourceIds to be registered.")}))}(t,a,l);const s=function(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}(t,a);if(null==s)return void e.dispatch(x);let c=null;if(o){if(!i)throw new Error("getSourceClientOffset must be defined");!function(e){f("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(i),c=i(s)}e.dispatch(I(o,c));const u=l.getSource(s).beginDrag(a,s);if(null==u)return;!function(e){f(h(e),"Item must be an object.")}(u),l.pinSource(s);const d=l.getSourceType(s);return{type:g,payload:{itemType:d,item:u,sourceId:s,clientOffset:o||null,sourceClientOffset:c||null,isSourcePublic:!!n}}}}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){w(e,t,r[t])}))}return e}function C(e){return function(t={}){const r=e.getMonitor(),n=e.getRegistry();!function(e){f(e.isDragging(),"Cannot call drop while not dragging."),f(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(r);const o=function(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(r);o.forEach(((o,i)=>{const a=function(e,t,r,n){const o=r.getTarget(e);let i=o?o.drop(n,e):void 0;(function(e){f(void 0===e||h(e),"Drop result must either be an object or undefined.")})(i),void 0===i&&(i=0===t?{}:n.getDropResult());return i}(o,i,n,r),l={type:y,payload:{dropResult:P({},t,a)}};e.dispatch(l)}))}}function O(e){return function(){const t=e.getMonitor(),r=e.getRegistry();!function(e){f(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);const n=t.getSourceId();if(null!=n){r.getSource(n,!0).endDrag(t,n),r.unpinSource()}return{type:b}}}function R(e,t){return null===t?null===e:Array.isArray(e)?e.some((e=>e===t)):e===t}function D(e){return function(t,{clientOffset:r}={}){!function(e){f(Array.isArray(e),"Expected targetIds to be an array.")}(t);const n=t.slice(0),o=e.getMonitor(),i=e.getRegistry();return function(e,t,r){for(let n=e.length-1;n>=0;n--){const o=e[n];R(t.getTargetType(o),r)||e.splice(n,1)}}(n,i,o.getItemType()),function(e,t,r){f(t.isDragging(),"Cannot call hover while not dragging."),f(!t.didDrop(),"Cannot call hover after drop.");for(let t=0;t<e.length;t++){const n=e[t];f(e.lastIndexOf(n)===t,"Expected targetIds to be unique in the passed array.");f(r.getTarget(n),"Expected targetIds to be registered.")}}(n,o,i),function(e,t,r){e.forEach((function(e){r.getTarget(e).hover(t,e)}))}(n,o,i),{type:m,payload:{targetIds:n,clientOffset:r||null}}}}function E(e){return function(){if(e.getMonitor().isDragging())return{type:v}}}class T{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;const r=function(e){return{beginDrag:S(e),publishDragSource:E(e),hover:D(e),drop:C(e),endDrag:O(e)}}(this);return Object.keys(r).reduce(((n,o)=>{const i=r[o];var a;return n[o]=(a=i,(...r)=>{const n=a.apply(e,r);void 0!==n&&t(n)}),n}),{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function A(e,t){return{x:e.x-t.x,y:e.y-t.y}}const M=[],L=[];M.__IS_NONE__=!0,L.__IS_ALL__=!0;class k{subscribeToStateChange(e,t={}){const{handlerIds:r}=t;f("function"==typeof e,"listener must be a function."),f(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let n=this.store.getState().stateId;return this.store.subscribe((()=>{const t=this.store.getState(),o=t.stateId;try{const i=o===n||o===n+1&&!function(e,t){return e!==M&&(e===L||void 0===t||(r=e,t.filter((e=>r.indexOf(e)>-1))).length>0);var r}(t.dirtyHandlerIds,r);i||e()}finally{n=o}}))}subscribeToOffsetChange(e){f("function"==typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe((()=>{const r=this.store.getState().dragOffset;r!==t&&(t=r,e())}))}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return f(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(f(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;return R(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(f(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:r}=t;if(!this.isDragging())return!1;const n=this.registry.getTargetType(e),o=this.getItemType();if(o&&!R(n,o))return!1;const i=this.getTargetIds();if(!i.length)return!1;const a=i.indexOf(e);return r?a===i.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return t&&r&&n?A((i=n,{x:(o=t).x+i.x,y:o.y+i.y}),r):null;var o,i}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:t,initialClientOffset:r}=e;return t&&r?A(t,r):null}(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const j="undefined"!=typeof global?global:self,N=j.MutationObserver||j.WebKitMutationObserver;function H(e){return function(){const t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}const F="function"==typeof N?function(e){let t=1;const r=new N(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}:H;class _{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const B=new class{enqueueTask(e){const{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,r=e.length-this.index;t<r;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=F(this.flush),this.requestErrorThrow=H((()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()}))}},z=new class{create(e){const t=this.freeTasks,r=t.length?t.pop():new _(this.onError,(e=>t[t.length]=e));return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}(B.registerPendingError);const U="dnd-core/ADD_SOURCE",W="dnd-core/ADD_TARGET",V="dnd-core/REMOVE_SOURCE",q="dnd-core/REMOVE_TARGET";function G(e,t){t&&Array.isArray(e)?e.forEach((e=>G(e,!1))):f("string"==typeof e||"symbol"==typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var X;!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(X||(X={}));let K=0;function Y(e){const t=(K++).toString();switch(e){case X.SOURCE:return`S${t}`;case X.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function Q(e){switch(e[0]){case"S":return X.SOURCE;case"T":return X.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function Z(e,t){const r=e.entries();let n=!1;do{const{done:e,value:[,o]}=r.next();if(o===t)return!0;n=!!e}while(!n);return!1}class J{addSource(e,t){G(e),function(e){f("function"==typeof e.canDrag,"Expected canDrag to be a function."),f("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),f("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);const r=this.addHandler(X.SOURCE,e,t);return this.store.dispatch(function(e){return{type:U,payload:{sourceId:e}}}(r)),r}addTarget(e,t){G(e,!0),function(e){f("function"==typeof e.canDrop,"Expected canDrop to be a function."),f("function"==typeof e.hover,"Expected hover to be a function."),f("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);const r=this.addHandler(X.TARGET,e,t);return this.store.dispatch(function(e){return{type:W,payload:{targetId:e}}}(r)),r}containsHandler(e){return Z(this.dragSources,e)||Z(this.dropTargets,e)}getSource(e,t=!1){f(this.isSourceId(e),"Expected a valid source ID.");return t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return f(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return f(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return f(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Q(e)===X.SOURCE}isTargetId(e){return Q(e)===X.TARGET}removeSource(e){var t;f(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:V,payload:{sourceId:e}}}(e)),t=()=>{this.dragSources.delete(e),this.types.delete(e)},B.enqueueTask(z.create(t))}removeTarget(e){f(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:q,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);f(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){f(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){const n=Y(e);return this.types.set(n,t),e===X.SOURCE?this.dragSources.set(n,r):e===X.TARGET&&this.dropTargets.set(n,r),n}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const $=(e,t)=>e===t;function ee(e=M,t){switch(t.type){case m:break;case U:case W:case q:case V:return M;default:return L}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,o=function(e,t){const r=new Map,n=e=>{r.set(e,r.has(e)?r.get(e)+1:1)};e.forEach(n),t.forEach(n);const o=[];return r.forEach(((e,t)=>{1===e&&o.push(t)})),o}(r,n);if(!(o.length>0||!function(e,t,r=$){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}(r,n)))return M;const i=n[n.length-1],a=r[r.length-1];return i!==a&&(i&&o.push(i),a&&o.push(a)),o}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const re={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function ne(e=re,t){const{payload:r}=t;switch(t.type){case p:case g:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case m:return n=e.clientOffset,o=r.clientOffset,!n&&!o||n&&o&&n.x===o.x&&n.y===o.y?e:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){te(e,t,r[t])}))}return e}({},e,{clientOffset:r.clientOffset});case b:case y:return re;default:return e}var n,o}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){oe(e,t,r[t])}))}return e}const ae={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function le(e=ae,t){const{payload:r}=t;switch(t.type){case g:return ie({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case v:return ie({},e,{isSourcePublic:!0});case m:return ie({},e,{targetIds:r.targetIds});case q:return-1===e.targetIds.indexOf(r.targetId)?e:ie({},e,{targetIds:(n=e.targetIds,o=r.targetId,n.filter((e=>e!==o)))});case y:return ie({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case b:return ie({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}var n,o}function se(e=0,t){switch(t.type){case U:case W:return e+1;case V:case q:return e-1;default:return e}}function ce(e=0){return e+1}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ue(e,t,r[t])}))}return e}function fe(e={},t){return{dirtyHandlerIds:ee(e.dirtyHandlerIds,{type:t.type,payload:de({},t.payload,{prevTargetIds:(r=e,n="dragOperation.targetIds",o=[],n.split(".").reduce(((e,t)=>e&&e[t]?e[t]:o||null),r))})}),dragOffset:ne(e.dragOffset,t),refCount:se(e.refCount,t),dragOperation:le(e.dragOperation,t),stateId:ce(e.stateId)};var r,n,o}function he(e,t=void 0,r={},n=!1){const o=function(e){const t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return d(fe,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(n),i=new k(o,new J(o)),a=new T(o,i),l=e(a,t,r);return a.receiveBackend(l),a}const pe=(0,t.createContext)({dragDropManager:void 0});function ge(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}let ve=0;const me=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var ye=(0,t.memo)((function(e){var{children:r}=e,o=ge(e,["children"]);const[i,a]=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}const t=function(e,t=be(),r,n){const o=t;o[me]||(o[me]={dragDropManager:he(e,t,r,n)});return o[me]}(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}(o);return(0,t.useEffect)((()=>{if(a){const e=be();return++ve,()=>{0==--ve&&(e[me]=null)}}}),[]),(0,n.jsx)(pe.Provider,{value:i,children:r})}));function be(){return"undefined"!=typeof global?global:window}function Ie(e){let t=null;return()=>(null==t&&(t=e()),t)}class xe{enter(e){const t=this.entered.length;return this.entered=function(e,t){const r=new Set,n=e=>r.add(e);e.forEach(n),t.forEach(n);const o=[];return r.forEach((e=>o.push(e))),o}(this.entered.filter((t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e)))),[e]),0===t&&this.entered.length>0}leave(e){const t=this.entered.length;var r,n;return this.entered=(r=this.entered.filter(this.isNodeInDocument),n=e,r.filter((e=>e!==n))),t>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Se{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach((e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null)})}))}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach((r=>{const n=this.config.exposeProperties[r];null!=n&&(t[r]={value:n(e,this.config.matchesTypes),configurable:!0,enumerable:!0})})),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const we="__NATIVE_FILE__",Pe="__NATIVE_URL__",Ce="__NATIVE_TEXT__",Oe="__NATIVE_HTML__";function Re(e,t,r){const n=t.reduce(((t,r)=>t||e.getData(r)),"");return null!=n?n:r}const De={[we]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Oe]:{exposeProperties:{html:(e,t)=>Re(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[Pe]:{exposeProperties:{urls:(e,t)=>Re(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Ce]:{exposeProperties:{text:(e,t)=>Re(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function Ee(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(De).filter((e=>{const r=De[e];return!!(null==r?void 0:r.matchesTypes)&&r.matchesTypes.some((e=>t.indexOf(e)>-1))}))[0]||null}const Te=Ie((()=>/firefox/i.test(navigator.userAgent))),Ae=Ie((()=>Boolean(window.safari)));class Me{interpolate(e){const{xs:t,ys:r,c1s:n,c2s:o,c3s:i}=this;let a=t.length-1;if(e===t[a])return r[a];let l,s=0,c=i.length-1;for(;s<=c;){l=Math.floor(.5*(s+c));const n=t[l];if(n<e)s=l+1;else{if(!(n>e))return r[l];c=l-1}}a=Math.max(0,c);const u=e-t[a],d=u*u;return r[a]+n[a]*u+o[a]*d+i[a]*u*d}constructor(e,t){const{length:r}=e,n=[];for(let e=0;e<r;e++)n.push(e);n.sort(((t,r)=>e[t]<e[r]?-1:1));const o=[],i=[],a=[];let l,s;for(let n=0;n<r-1;n++)l=e[n+1]-e[n],s=t[n+1]-t[n],i.push(l),o.push(s),a.push(s/l);const c=[a[0]];for(let e=0;e<i.length-1;e++){const t=a[e],r=a[e+1];if(t*r<=0)c.push(0);else{l=i[e];const n=i[e+1],o=l+n;c.push(3*o/((o+n)/t+(o+l)/r))}}c.push(a[a.length-1]);const u=[],d=[];let f;for(let e=0;e<c.length-1;e++){f=a[e];const t=c[e],r=1/i[e],n=t+c[e+1]-f-f;u.push((f-t-n)*r),d.push(n*r*r)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=u,this.c3s=d}}const Le=1;function ke(e){const t=e.nodeType===Le?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function je(e){return{x:e.clientX,y:e.clientY}}function Ne(e,t,r,n,o){const i="IMG"===(a=t).nodeName&&(Te()||!(null===(l=document.documentElement)||void 0===l?void 0:l.contains(a)));var a,l;const s=ke(i?e:t),c={x:r.x-s.x,y:r.y-s.y},{offsetWidth:u,offsetHeight:d}=e,{anchorX:f,anchorY:h}=n,{dragPreviewWidth:p,dragPreviewHeight:g}=function(e,t,r,n){let o=e?t.width:r,i=e?t.height:n;return Ae()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}(i,t,u,d),{offsetX:v,offsetY:m}=o,y=0===m||m;return{x:0===v||v?v:new Me([0,.5,1],[c.x,c.x/u*p,c.x+p-u]).interpolate(f),y:y?m:(()=>{let e=new Me([0,.5,1],[c.y,c.y/d*g,c.y+g-d]).interpolate(h);return Ae()&&i&&(e+=(window.devicePixelRatio-1)*g),e})()}}class He{get window(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Fe(e,t,r[t])}))}return e}class Be{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var t;void 0!==e&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(t=this.window)||void 0===t||t.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);const n=t=>this.handleDragStart(t,e),o=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",n),t.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",n),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const r=t=>this.handleDragEnter(t,e),n=t=>this.handleDragOver(t,e),o=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",n),t.addEventListener("drop",o),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",n),t.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return _e({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return _e({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(e).some((r=>e[r]===t))}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){const r=De[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new Se(r);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((()=>{var e;return null===(e=this.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&ke(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>Boolean(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{const e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame((()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null})))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!=typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;const{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;const r=je(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});const{dataTransfer:n}=e,o=Ee(n);if(this.monitor.isDragging()){if(n&&"function"==typeof n.setDragImage){const e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),o=this.sourcePreviewNodes.get(e)||t;if(o){const{anchorX:e,anchorY:i,offsetX:a,offsetY:l}=this.getCurrentSourcePreviewNodeOptions(),s=Ne(t,o,r,{anchorX:e,anchorY:i},{offsetX:a,offsetY:l});n.setDragImage(o,s.x,s.y)}}try{null==n||n.setData("application/json",{})}catch(e){}this.setCurrentDragSourceNode(e.target);const{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout((()=>this.actions.publishDragSource()),0)}else if(o)this.beginDragNativeItem(o);else{if(n&&!n.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var t;(this.dragEnterTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;const{dataTransfer:r}=e,n=Ee(r);n&&this.beginDragNativeItem(n,r)},this.handleTopDragEnter=e=>{const{dragEnterTargetIds:t}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:je(e)});t.some((e=>this.monitor.canDropOnTarget(e)))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=e=>{var t;(this.dragOverTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{const{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=je(e),this.scheduleHover(t);(t||[]).some((e=>this.monitor.canDropOnTarget(e)))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault();this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout((()=>this.endDragNativeItem()),0),this.cancelHover())},this.handleTopDropCapture=e=>{var t;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):Ee(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{const{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:je(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{const t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new He(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new xe(this.isNodeInDocument)}}var ze;!function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"}(ze||(ze={}));class Ue{get delay(){var e;return null!==(e=this.args.delay)&&void 0!==e?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return null!==(e=this.args.ignoreContextMenu)&&void 0!==e&&e}get enableHoverOutsideTarget(){var e;return null!==(e=this.args.enableHoverOutsideTarget)&&void 0!==e&&e}get enableKeyboardEvents(){var e;return null!==(e=this.args.enableKeyboardEvents)&&void 0!==e&&e}get enableMouseEvents(){var e;return null!==(e=this.args.enableMouseEvents)&&void 0!==e&&e}get enableTouchEvents(){var e;return null===(e=this.args.enableTouchEvents)||void 0===e||e}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,r,n;return null!==(n=null!==(r=null===(e=this.args)||void 0===e?void 0:e.delayTouchStart)&&void 0!==r?r:null===(t=this.args)||void 0===t?void 0:t.delay)&&void 0!==n?n:0}get delayMouseStart(){var e,t,r,n;return null!==(n=null!==(r=null===(e=this.args)||void 0===e?void 0:e.delayMouseStart)&&void 0!==r?r:null===(t=this.args)||void 0===t?void 0:t.delay)&&void 0!==n?n:0}get window(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0}get document(){var e;return(null===(e=this.context)||void 0===e?void 0:e.document)?this.context.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.args)||void 0===e?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}const We=1,Ve=0;function qe(e){return void 0===e.button||e.button===Ve}function Ge(e){return!!e.targetTouches}function Xe(e,t){return Ge(e)?function(e,t){return 1===e.targetTouches.length?Xe(e.targetTouches[0]):t&&1===e.touches.length&&e.touches[0].target===t.target?Xe(e.touches[0]):void 0}(e,t):{x:e.clientX,y:e.clientY}}const Ke=(()=>{let e=!1;try{addEventListener("test",(()=>{}),Object.defineProperty({},"passive",{get:()=>(e=!0,!0)}))}catch(e){}return e})(),Ye={[ze.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[ze.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[ze.keyboard]:{keydown:"keydown"}};class Qe{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:(null===(e=this.dragOverTargetIds)||void 0===e?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(f(!Qe.isSetUp,"Cannot have two Touch backends at the same time."),Qe.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(Qe.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,r,n=!1){const o=Ke?{capture:n,passive:!1}:n;this.listenerTypes.forEach((function(n){const i=Ye[n][t];i&&e.addEventListener(i,r,o)}))}removeEventListener(e,t,r,n=!1){const o=Ke?{capture:n,passive:!1}:n;this.listenerTypes.forEach((function(n){const i=Ye[n][t];i&&e.removeEventListener(i,r,o)}))}connectDragSource(e,t){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",r)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const n=n=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(n.type){case Ye.mouse.move:o={x:n.clientX,y:n.clientY};break;case Ye.touch.move:var i,a;o={x:(null===(i=n.touches[0])||void 0===i?void 0:i.clientX)||0,y:(null===(a=n.touches[0])||void 0===a?void 0:a.clientY)||0}}const l=null!=o?this.document.elementFromPoint(o.x,o.y):void 0,s=l&&t.contains(l);return l===t||s?this.handleMove(n,e):void 0};return this.addEventListener(this.document.body,"move",n),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",n))}}getTopMoveStartHandler(){return this.options.delayTouchStart||this.options.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver((()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())})),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,r){this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&function(e){const t=1===e.nodeType?e:e.parentElement;if(!t)return;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}(t)},this.handleTopMoveStartCapture=e=>{qe(e)&&(this.moveStartSourceIds=[])},this.handleMoveStart=e=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(e)},this.handleTopMoveStart=e=>{if(!qe(e))return;const t=Xe(e);t&&(Ge(e)&&(this.lastTargetTouchFallback=e.targetTouches[0]),this._mouseClientOffset=t),this.waitingForDelay=!1},this.handleTopMoveStartDelay=e=>{if(!qe(e))return;const t=e.type===Ye.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(e,t)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(t)},this.handleTopMove=e=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:t,dragOverTargetIds:r}=this,n=this.options.enableHoverOutsideTarget,o=Xe(e,this.lastTargetTouchFallback);if(!o)return;if(this._isScrolling||!this.monitor.isDragging()&&function(e,t,r,n,o){if(!o)return!1;const i=180*Math.atan2(n-t,r-e)/Math.PI+180;for(let e=0;e<o.length;++e){const t=o[e];if(t&&(null==t.start||i>=t.start)&&(null==t.end||i<=t.end))return!0}return!1}(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,o.x,o.y,this.options.scrollAngleRanges))return void(this._isScrolling=!0);var i,a,l,s;if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&t&&(i=this._mouseClientOffset.x||0,a=this._mouseClientOffset.y||0,l=o.x,s=o.y,Math.sqrt(Math.pow(Math.abs(l-i),2)+Math.pow(Math.abs(s-a),2))>(this.options.touchSlop?this.options.touchSlop:0))&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(t,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const c=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(c),this.actions.publishDragSource(),e.cancelable&&e.preventDefault();const u=(r||[]).map((e=>this.targetNodes.get(e))).filter((e=>!!e)),d=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(o.x,o.y,u):this.document.elementsFromPoint(o.x,o.y),f=[];for(const e in d){if(!d.hasOwnProperty(e))continue;let t=d[e];for(null!=t&&f.push(t);t;)t=t.parentElement,t&&-1===f.indexOf(t)&&f.push(t)}const h=f.filter((e=>u.indexOf(e)>-1)).map((e=>this._getDropTargetId(e))).filter((e=>!!e)).filter(((e,t,r)=>r.indexOf(e)===t));if(n)for(const e in this.targetNodes){const t=this.targetNodes.get(e);if(c&&t&&t.contains(c)&&-1===h.indexOf(e)){h.unshift(e);break}}h.reverse(),this.actions.hover(h,{clientOffset:o})},this._getDropTargetId=e=>{const t=this.targetNodes.keys();let r=t.next();for(;!1===r.done;){const n=r.value;if(e===this.targetNodes.get(n))return n;r=t.next()}},this.handleTopMoveEndCapture=e=>{this._isScrolling=!1,this.lastTargetTouchFallback=void 0,function(e){return void 0===e.buttons||0==(e.buttons&We)}(e)&&(this.monitor.isDragging()&&!this.monitor.didDrop()?(e.cancelable&&e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()):this.moveStartSourceIds=void 0)},this.handleCancelOnEscape=e=>{"Escape"===e.key&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new Ue(r,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(ze.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(ze.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(ze.keyboard)}}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),et=$e?function(e,t={},r={}){return new Qe(e,t,r)}:function(e,t,r){return new Be(e,t,r)},tt=document&&(document.elementsFromPoint||document.msElementsFromPoint);var rt={isDragging:!1,canDrop:!1,itemID:null,index:null,scrollerID:null,dndOptions:null,scrollerDndOptions:null,scrollerProfile:null,sourceCacheAPI:null,sourceStateHandler:null,sourceServiceHandler:null,setDndCellFrameState:null},nt={enabled:!1,installed:!1,scrollerID:null,prescribedDropEffect:null,dynamicDropEffect:null,dropCount:0,altKey:null,onDroppableWhitespace:!1,whitespacePosition:null,dragContext:Object.assign({},rt),setViewportState:null,setDragBarState:null,getDropEffect:null},ot=function(e){var n=Ze((0,t.useState)("setup"),2),o=n[0],i=n[1],a=(0,t.useContext)(fi);a.installed||(a.installed=!0);var l=e.dndOptions,s=e.getDropEffect,c=(0,t.useRef)(!0);(0,t.useEffect)((function(){return c.current=!0,function(){c.current=!1}}),[]),(0,t.useEffect)((function(){return function(){c.current||Object.assign(a,Object.assign({},nt))}}),[]),(0,t.useEffect)((function(){var e,t=null===(e=null==l?void 0:l.master)||void 0===e?void 0:e.enabled;t=null==t||t,a.enabled!==t&&(a.enabled=t),a.getDropEffect!==s&&(a.getDropEffect=s)}),[l,s]);var u=Object.assign(Object.assign({},e),{isDndMaster:!0});return(0,t.useEffect)((function(){if("setup"===o)i("ready")}),[o]),r().createElement(ye,{backend:et,options:it},"setup"!==o&&r().createElement(pi,Object.assign({},u)))},it={getDropTargetElementsAtPoint:!tt&&function(e,t,r){return r.filter((function(r){var n=r.getBoundingClientRect();return e>=n.left&&e<=n.right&&t<=n.bottom&&t>=n.top}))}};const at=(0,t.createContext)(null),lt={didCatch:!1,error:null};class st extends t.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=lt}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,r,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];null===(t=(r=this.props).onReset)||void 0===t||t.call(r,{args:o,reason:"imperative-api"}),this.setState(lt)}}componentDidCatch(e,t){var r,n;null===(r=(n=this.props).onError)||void 0===r||r.call(n,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:n}=this.props;var o,i;r&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(((e,r)=>!Object.is(e,t[r])))}(e.resetKeys,n)&&(null===(o=(i=this.props).onReset)||void 0===o||o.call(i,{next:n,prev:e.resetKeys,reason:"keys"}),this.setState(lt))}render(){const{children:e,fallbackRender:r,FallbackComponent:n,fallback:o}=this.props,{didCatch:i,error:a}=this.state;let l=e;if(i){const e={error:a,resetErrorBoundary:this.resetErrorBoundary};if((0,t.isValidElement)(o))l=o;else if("function"==typeof r)l=r(e);else{if(!n)throw a;l=(0,t.createElement)(n,e)}}return(0,t.createElement)(at.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},l)}}var ct=o(63);const ut="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;function dt(e,r,n){const[o,i]=(0,t.useState)((()=>r(e))),a=(0,t.useCallback)((()=>{const t=r(e);ct(o,t)||(i(t),n&&n())}),[o,e,n]);return ut(a),[o,a]}function ft(e,t,r){return function(e,t,r){const[n,o]=dt(e,t,r);return ut((function(){const t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(o,{handlerIds:[t]})}),[e,o]),n}(t,e||(()=>({})),(()=>r.reconnect()))}function ht(e,r){const n=[...r||[]];return null==r&&"function"!=typeof e&&n.push(e),(0,t.useMemo)((()=>"function"==typeof e?e():e),n)}function pt(e){return(0,t.useMemo)((()=>e.hooks.dropTarget()),[e])}function gt(e,t,r,n){let o=r?r.call(n,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;const l=Object.prototype.hasOwnProperty.bind(t);for(let a=0;a<i.length;a++){const s=i[a];if(!l(s))return!1;const c=e[s],u=t[s];if(o=r?r.call(n,c,u,s):void 0,!1===o||void 0===o&&c!==u)return!1}return!0}function vt(e){return null!==e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function mt(e){return(r=null,n=null)=>{if(!(0,t.isValidElement)(r)){const t=r;return e(t,n),t}const o=r;!function(e){if("string"==typeof e.type)return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}(o);return function(e,r){const n=e.ref;return f("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?(0,t.cloneElement)(e,{ref:e=>{bt(n,e),bt(r,e)}}):(0,t.cloneElement)(e,{ref:r})}(o,n?t=>e(t,n):e)}}function yt(e){const t={};return Object.keys(e).forEach((r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const e=mt(n);t[r]=()=>e}})),t}function bt(e,t){"function"==typeof e?e(t):e.current=t}class It{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!gt(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=yt({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,vt(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function xt(){const{dragDropManager:e}=(0,t.useContext)(pe);return f(null!=e,"Expected drag drop context"),e}let St=!1;class wt{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;f(!St,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return St=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{St=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}class Pt{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function Ct(e,r,n){const o=xt(),i=function(e,r){const n=(0,t.useMemo)((()=>new Pt(e,r)),[r]);return(0,t.useEffect)((()=>{n.spec=e}),[e]),n}(e,r),a=function(e){const{accept:r}=e;return(0,t.useMemo)((()=>(f(null!=e.accept,"accept must be defined"),Array.isArray(r)?r:[r])),[r])}(e);ut((function(){const[e,t]=function(e,t,r){const n=r.getRegistry(),o=n.addTarget(e,t);return[o,()=>n.removeTarget(o)]}(a,i,o);return r.receiveHandlerId(e),n.receiveHandlerId(e),t}),[o,r,i,n,a.map((e=>e.toString())).join("|")])}function Ot(e,r){const n=ht(e,r),o=function(){const e=xt();return(0,t.useMemo)((()=>new wt(e)),[e])}(),i=function(e){const r=xt(),n=(0,t.useMemo)((()=>new It(r.getBackend())),[r]);return ut((()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget())),[e]),n}(n.options);return Ct(n,o,i),[ft(n.collect,o,i),pt(i)]}function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Et=function(e){var n=Rt((0,t.useState)("ready"),2),o=n[0],i=n[1],a=e.scrollerID,l=(0,t.useContext)(fi),s=(0,t.useContext)(hi),c=(0,t.useRef)(null),u=(0,t.useRef)(!1),d=Ot({accept:s.dndOptions.accept||["-x-x-x-"],drop:function(e,t){if(t.isOver({shallow:!0}))return{dataType:"viewport",target:{scrollerID:a,DropEffect:l.prescribedDropEffect||(l.altKey?"copy":null)||"move"}}},hover:function(e,t){if(t.isOver({shallow:!0})&&t.canDrop()){var r=Rt(g(t.getClientOffset()),2),n=r[0],o=r[1];n!==l.onDroppableWhitespace&&(l.onDroppableWhitespace=n,l.whitespacePosition=o,l.setDragBarState("refresh"))}else l.onDroppableWhitespace&&(l.onDroppableWhitespace=!1,l.whitespacePosition=null,l.setDragBarState("refresh"))},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop(),itemData:e.getItem()}}}),f=Rt(d,2),h=f[0],p=f[1],g=function(e){var t=s.cradleParameters,r=t.cradleInternalPropertiesRef.current,n=r.virtualListProps,o=n.size,i=(n.crosscount,n.baserowblanks,n.endrowblanks,n.lowindex),c=n.highindex,u=n.rowcount,d=(n.rowshift,l.prescribedDropEffect||(l.altKey?"copy":null)||"move");if(0===o)return[!0,"all"];var f=l.dragContext,h=f.index,p=f.scrollerID,g=r.cradleContentProps,v=g.viewportRowcount,m=g.cradleRowcount,y=(g.lowindex,g.highindex,g.lowrow),b=g.highrow;if(m>v&&y>0&&b<u-1)return[!1,null];var I,x,S=t.handlersRef.current.layoutHandler.elements,w=S.axisRef,P=S.headRef,C=S.tailRef,O=w.current.getBoundingClientRect(),R=O.x,D=O.y,E=t.cradleInheritedPropertiesRef.current.orientation;if(("vertical"==E?e.x<R:e.y<D)?I=P.current.firstChild:(I=C.current.firstChild,x=C.current.lastChild),!I)return[!1,null];var T=I.getBoundingClientRect(),A=T.x,M=T.y,L=T.height,k=T.width,j="vertical"==E?e.x<A&&e.y<M+L:e.y<M&&e.x<A+k;if(j||(j="vertical"==E?e.y<M:e.x<A),j)return p===a&&i===h&&"move"==d?[!1,null]:[!0,"head"];if(!x)return[!1,null];var N=x.getBoundingClientRect(),H=N.x,F=N.y,_=N.height,B=N.width;return(j="vertical"==E?e.x>H&&e.y>F:e.y>F&&e.x>H)||(j="vertical"==E?e.y>F+_:e.x>H+B)?p===a&&c===h&&"move"==d?[!1,null]:[!0,"tail"]:[!1,null]};(0,t.useEffect)((function(){var e=c.current;if(h.isOver&&h.canDrop){var t;if(l.getDropEffect){var r=h.itemData,n={itemID:r.itemID,index:r.index,profile:r.profile,dndOptions:r.dndOptions,dropEffect:r.dropEffect},o={sourceDndOptions:l.dragContext.scrollerDndOptions,sourceProfile:l.dragContext.scrollerProfile,targetDndOptions:s.dndOptions,targetProfile:s.profile,itemData:n};t=l.getDropEffect(l.dragContext.scrollerID,a,o)}l.dynamicDropEffect!=t&&(l.dynamicDropEffect=t,l.setDragBarState("refresh")),e.classList.add("rigs-viewport-highlight"),u.current=!0}else e.classList.remove("rigs-viewport-highlight"),u.current=!1;!h.isOver&&h.canDrop?e.classList.add("rigs-viewport-candrop"):e.classList.remove("rigs-viewport-candrop"),i("updatehighlight")}),[h.isOver,h.canDrop,h.itemData]),(0,t.useEffect)((function(){p(c.current)}),[]),(0,t.useEffect)((function(){if("updatehighlight"===o)i("ready")}),[o]);var v=Object.assign(Object.assign({},e),{viewportFrameElementRef:c,showScrollTabs:u.current});return r().createElement(Vt,Object.assign({},v))};const Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAH9JREFUSEvtlMENgDAMA6/zwA7ADgzEQOwA7AD7oEp5ASFUVT4oeaWWXEuu64TzJOf7+b/ABHRi4wbkcx4NvzluWbQDjbAOoJVdw4sFFqAX1goMsmt4sUC2YhTWfLHoCS8WqE6x9QbuApEisyoiRZ8sii56/ayRIjNF7mVXLXACJkowGRxYCQoAAAAASUVORK5CYII=";function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Lt=function(e){var n,o=e.scrollerID,i=(0,t.useContext)(fi),a=i.dragContext,l=a.canDrop,s=a.itemID,c=a.index,u=a.dndOptions,d=(null==u?void 0:u.dragText)||"Dragging itemID ".concat(s,", index ").concat(c),f=At((0,t.useState)("ready"),2),h=f[0],p=f[1],g=i.prescribedDropEffect,v=i.dynamicDropEffect;["move","copy"].includes(v)&&(n=v);var m="move"==(n||g||(i.altKey?"copy":null)||"move")?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAKdJREFUSEvdle0NgzAMRB/zwBAM0RlYozBGp6EMwTxUqUiFDFKODyNofqLLvdjnkAznlTn7czqgBh5ALlb2Bjog7FtctoIWKEXzKOuBQgUMo1BtXVJvjZIbzEmT+tsBYti/0PdWMO1YMH2OH5o4WUcCgncFvKYQBRCDXDm9X3lzCcCak29qkQpwCdletMPH9P9u8iyv03/X7g+OOpKyTn1YZEMrdAd8AOegLRl38DzOAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAKZJREFUSEvtldENgzAMRF/mgR0KO3QgBmKHlh3KPFSWCBJOFTsqkfhIvp276HJ6DlQ+obI+lsEEPIDB8ZA3sABy5ziWwQfoHOJxZAX6EoNtH7YeImM/Z62LlxtowWaQ1LRFJHU9NVPXtEV0v4heTpJGvglRxxzs9CcLep9OogpJZwvXJexxUdyqqUskN6QNSjNPWqPNtEFJ5lEru1OshXN5RH8LaoEvgUIyGVNjp8MAAAAASUVORK5CYII=",y=(0,t.useRef)(i.altKey),b=(0,t.useRef)(null);(0,t.useEffect)((function(){if(!$e)return b.current=setInterval((function(){if(i.altKey!==y.current){y.current=i.altKey;var e=i.dragContext.setDndCellFrameState;e&&e("refresh"),p("refresh")}}),200),function(){clearInterval(b.current)}}),[]),o!==i.scrollerID||i.setDragBarState||(i.setDragBarState=p);var I,x=function(e){const r=xt().getMonitor(),[n,o]=dt(r,e);return(0,t.useEffect)((()=>r.subscribeToOffsetChange(o))),(0,t.useEffect)((()=>r.subscribeToStateChange(o))),n}((function(e){return{isDragging:e.isDragging(),currentOffset:e.getSourceClientOffset()}})),S=x.isDragging,w=x.currentOffset;!S&&a.isDragging&&Object.assign(a,rt),"none"==v&&(I=!0);var P=I||!l&&!i.onDroppableWhitespace?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAf1JREFUSEu11UuoT1EUBvDfLWViKs8puhMUI49QIjfMGHjN5FUYMCPEjMGVvDLzLEOUSCGvCYVCMZTn2EQGtLSOzv/c8/gb/Hftwems9X1rrf3tbw8Z8BoaML4ugglYi2HMwbws6AVe4R1u4EdToW0EC3Aaczu6fIldeFoX10SwHWcz4TGu4S3eYFx2Mh9bMTXjduBclaSOYDVuZuBJ7G3pYAq2lYjW4FY5vkowA+8zoOt8Cpz7WIrP2c1MfCh+lkHGJ/tybMKVPhRWgD/AQxzCPcQUfkZ+mWAzLuI2Rv4TfBliXM+ziy24VCU4jn3YjVMdBOXKA7xYh7OLE9hfJbiDFViJuy0ETeCRsg7XMz9wekb0FZMwGd8aCNrAI2U6PmZ+4PQQfMr5ha6/1BB0gUfKRHxPRU2rEsSVDx2P0TL6AQ+8kGvExj0Ki+np4CgO4AjisKo6DymWD7RuijvTXo7hYJVgQ2o/LkzYQIyp38oLskdYhI24WiUI54yAMLfoYkm23E/lgTWKPQjzW1w4bNUOwkGflK59v+BB8DvbWFh21jq/KZw0RnUB5xtUVYwlxnE5P8Y4apOhlR21IAqrfoZf+fjMwqrcgV+nvtYXLZz1DML82laYW6jnn4OWg7ssORx2PWbnjmczVjyXr3OHNfx1zrrVRdBRfPfvgRP8AUkbbhkhm2OyAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAhxJREFUSEu11UvITlEUBuDnTzIxk0uUFJIJykQuRYkIM5RLBgZuhZCB6FeUgZJLLikGcikGCiVSlEuZoSgMjMiljEwwoKV9vvY5nfOdz1//ql3fOd9a77v2u9d+T59Bjr5BxtdGMBwrMBXTMRND8BJv8RA3uzXZjWA2TmNGyy6f4SIupLyVuFHUNBFsxtmU9ATX8Aav8QvjMQ+7MJGOEgF+HasKkjqCZbidwE9gZ4/nVIBHepCsjh9Vgsl4lwDbzifnzcGvYm2dRMNwBwuxDlcG0PklbMjr8i7XIxLuYukAwOOgN6a6g4hVkugo9mA7TvVAkMtyHpsy8ElJhRLBPSzCYtxPyUPxu4YsBz+DbSlnAj7gOWZVd/AZozEGXzAuzXbMd2eukYOfxI5KA3/wHSOqBB8xFqPwLWnYn4qLuc7Bj2F3BXwkvuJTarAk0S0sxwI8yvTMSWK+I+K89tZINz/ZR9yjsJgSwSHsT3qGrkXENBQk8e4I9jUMwdZkL4dxoEqwJs1+WEPYQB4FSaewgeAx5qaLFheutINwzkgIc6uziM5sN4AfTwf+IjX4o0oQz+GgTxPA/1hFlMT0RMxBOOy/qAPJnbQXywjfuZzwtuBcvsOmLnNHDeuIFR+Y+NBExMdnCpakFe9iAsPLStFNhnDWmKYwv27xADE97+uS2nQOh41LNi2t6DwidvIqrbgbP5s6aCNoab7970En+AsVIGoZtgh+dQAAAABJRU5ErkJggg==";(0,t.useEffect)((function(){switch(h){case"refresh":case"updateicon":p("ready")}}),[h]);var C,O=(0,t.useRef)({float:"left",top:0,left:0,border:"gray solid 1px",borderRadius:"5px",margin:"3px"}),R=(0,t.useRef)({position:"absolute",bottom:"-12px",opacity:"!important 1",right:0,backgroundColor:"whitesmoke",border:"gray solid 1px",borderRadius:"3px",padding:"2px",margin:"3px",height:"20px",width:"20px"}),D=(0,t.useRef)({position:"absolute",top:"-12px",opacity:"!important 1",right:0,backgroundColor:"whitesmoke",border:"gray solid 1px",borderRadius:"3px",padding:"2px",margin:"3px",height:"20px",width:"20px"}),E=(0,t.useRef)({opacity:.75});S&&(C={zIndex:10,position:"fixed",top:0,left:0,transform:"translate(".concat(w.x,"px, ").concat(w.y,"px)"),pointerEvents:"none",paddingRight:"20px",backgroundColor:"whitesmoke",width:"200px",fontSize:".75em",border:"1px solid black",borderRadius:"5px"});var T=function(e){i.altKey!==e.altKey&&(i.altKey=e.altKey)};return(0,t.useEffect)((function(){if(!$e)return document.addEventListener("drag",T),function(){document.removeEventListener("drag",T),i.altKey=null}}),[]),S&&w?r().createElement("div",{"data-type":"dragbar",onKeyDown:T,style:C},r().createElement("div",{style:D.current},r().createElement("img",{style:E.current,src:P})),r().createElement("div",{style:O.current},r().createElement("img",{style:E.current,src:Tt})),d,r().createElement("div",{style:R.current},r().createElement("img",{style:E.current,src:m}))):null};function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Nt=function(e){var n=(0,t.useContext)(hi),o=n.serviceHandler,i=(0,t.useRef)(null),a=e.position,l=e.gridSpecs,s=e.SCROLLTAB_INTERVAL_MILLISECONDS,c=e.SCROLLTAB_INTERVAL_PIXELS,u=l.orientation,d=(0,t.useMemo)((function(){var e,t;return"head"==a?"vertical"==u?(e="rigs-scrolltab-highlight-top",t="topright"):(e="rigs-scrolltab-highlight-bottom",t="bottomright"):"vertical"==u?(e="rigs-scrolltab-highlight-bottom",t="bottomright"):(e="rigs-scrolltab-highlight-left",t="bottomleft"),[e,t]}),[u,a]),f=kt(d,2),h=f[0],p=f[1],g=(0,t.useMemo)((function(){var e,t,r,n,o,i,a,l=c;switch(p){case"topright":e="rotate(0.75turn)",t="0",r="0",n=null,o=null,i="0 0 0 8px",a=-l;break;case"bottomright":e="vertical"==u?"rotate(0.25turn)":"rotate(0turn)",t=null,r="0",n="0",o=null,i="8px 0 0 0",a="vertical"==u?l:-l;break;case"bottomleft":e="rotate(0.5turn)",t=null,r=null,n="0",o="0",i="0 8px 0 0",a=l}return[e,t,r,n,o,i,a]}),[p,u,c]),v=kt(g,7),m=v[0],y=v[1],b=v[2],I=v[3],x=v[4],S=v[5],w=v[6],P=kt(Ot({accept:n.dndOptions.accept||["Viewport"],collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),2),C=P[0],O=P[1],R=C.isOver,D=C.canDrop,E=(0,t.useRef)({display:"flex",alignItems:"center",zIndex:6,justifyContent:"center",backgroundColor:"white",position:"absolute",top:y,right:b,bottom:I,left:x,borderRadius:S,border:"1px solid black",height:"35px",width:"35px"}),T=(0,t.useRef)({transform:m});(0,t.useEffect)((function(){i.current.classList.add(h)}),[h]);var A=(0,t.useRef)(null);return(0,t.useEffect)((function(){return R&&D?A.current=setInterval((function(){o.scrollByPixel(w)}),s):clearInterval(A.current),function(){clearInterval(A.current)}}),[R,D,w]),r().createElement("div",{ref:function(e){i.current=e,O(e)},style:E.current,"data-type":"scroll-tab"},r().createElement("img",{style:T.current,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAKVJREFUSEvtlCEOhDAQRR/XgfusWItei2WRa1djMXsfOA9pQhGkzG/SzGKoqWnfS/90psJ5Vc58boFM2IqoBhZJEAfOBAH+Ax4JyXtjxt1UpAQR3gDzQRKg/UYcAClRL0hJOuCTK1E1CDGlJC/gmyNRfWDF1QKjkihBuG9JnsBkSS4XuEZkwYuLbMGLv+lfG81lVMTZ4jrsSofofj+nD4pkt0DGtwJdtDoZc9SCqgAAAABJRU5ErkJggg=="}))};function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const _t=function(e){var n=e.scrollTrackerAPIRef,o=e.styles,i=Ht((0,t.useState)(null),2),a=i[0],l=i[1],s=(0,t.useRef)(null);s.current=a;var c=(0,t.useRef)(null),u=(0,t.useRef)(null),d="".concat(a," (").concat(a-c.current+1,"/").concat(u.current,")"),f=(0,t.useRef)(Object.assign({top:"3px",left:"3px",position:"absolute",zIndex:3,backgroundColor:"white",border:"1px solid gray",borderRadius:"10px",fontSize:"smaller",padding:"3px",visibility:"hidden"},o));(0,t.useEffect)((function(){n.current={startReposition:h,updateReposition:p,finishReposition:g}}),[]);var h=(0,t.useCallback)((function(e,t,r){l(e+t),c.current=t,u.current=r,f.current=Object.assign(Object.assign({},f.current),{visibility:"visible"})}),[]),p=(0,t.useCallback)((function(e){var t=e+c.current;s.current!=t&&l(t)}),[]),g=(0,t.useCallback)((function(){f.current=Object.assign(Object.assign({},f.current),{visibility:"hidden"}),l(null)}),[]);return r().createElement("div",{"data-name":"scrolltracker",style:f.current},d)};function Bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ut=r().createContext(null);const Wt=function(e){var n=(0,t.useContext)(hi),o=(0,t.useContext)(fi),i=(0,t.useRef)(null),a=e.scrollerID;if(o.installed&&(o.scrollerID==a||n.dndOptions.enabled))return r().createElement(Et,Object.assign({},e));var l=Object.assign(Object.assign({},e),{viewportFrameElementRef:i});return r().createElement(Vt,Object.assign({},l))};var Vt=function(e){var n=e.children,o=e.gridSpecs,i=e.styles,a=e.scrollerID,l=e.VIEWPORT_RESIZE_TIMEOUT,s=e.useScrollTracker,c=e.viewportFrameElementRef,u=e.showScrollTabs,d=e.SCROLLTAB_INTERVAL_MILLISECONDS,f=e.SCROLLTAB_INTERVAL_PIXELS,h=(0,t.useContext)(fi),p=h.dragContext,g=o.orientation,v=Bt((0,t.useState)("setup"),2),m=v[0],y=v[1],b=(0,t.useRef)(null);h.installed&&a===h.scrollerID&&!h.setViewportState&&(h.setViewportState=y);var I=(0,t.useRef)(null);I.current=m;var x=(0,t.useRef)(!0),S=(0,t.useRef)(null),w=(0,t.useRef)(null),P=(0,t.useRef)({isResizing:!1,elementRef:null,frameElementRef:null,scrollTrackerAPIRef:w});(0,t.useEffect)((function(){return x.current=!0,function(){x.current=!1}}),[]);var C=(0,t.useRef)(null),O=(0,t.useRef)(!1),R=(0,t.useRef)(null);(0,t.useEffect)((function(){return R.current=new ResizeObserver(D),R.current.observe(S.current),function(){R.current.disconnect()}}),[]);var D=(0,t.useCallback)((function(e){if("setup"!=I.current){var t=e[0].target;t.dataset.initialized?(O.current||(P.current.isResizing=O.current=!0,P.current=Object.assign({},P.current),x.current&&y("resizing")),clearTimeout(C.current),C.current=setTimeout((function(){O.current=!1,x.current&&y("resized")}),l)):t.dataset.initialized="true"}}),[]),E=(0,t.useRef)({position:"absolute",inset:"0"}),T=(0,t.useRef)(null);return T.current=(0,t.useMemo)((function(){return Object.assign(Object.assign({},i.viewport),{position:"absolute",inset:0,overflow:"scroll",WebkitOverflowScrolling:"touch",overflowAnchor:"none"})}),[i.viewport]),(0,t.useRef)(null).current=(0,t.useMemo)((function(){return{position:"absolute",top:0,left:0}}),[i.viewport]),P.current=(0,t.useMemo)((function(){if("setup"==m)return P.current;var e={elementRef:S,frameElementRef:c,outerElementRef:b,isResizing:O.current};return Object.assign(Object.assign({},P.current),e)}),[g,O.current,m]),(0,t.useLayoutEffect)((function(){switch(m){case"resized":case"startdragbar":case"setup":y("ready")}}),[m]),r().createElement(Ut.Provider,{value:P.current},h.installed&&p.isDragging&&a===h.scrollerID&&r().createElement(Lt,{scrollerID:a}),r().createElement("div",{ref:b,"data-type":"outer-viewport-frame",style:E.current},r().createElement("div",{ref:c,"data-type":"viewport-frame",style:E.current},u&&r().createElement(r().Fragment,null,r().createElement(Nt,{position:"head",gridSpecs:o,SCROLLTAB_INTERVAL_MILLISECONDS:d,SCROLLTAB_INTERVAL_PIXELS:f}),r().createElement(Nt,{position:"tail",gridSpecs:o,SCROLLTAB_INTERVAL_MILLISECONDS:d,SCROLLTAB_INTERVAL_PIXELS:f})),r().createElement("div",{"data-type":"viewport","data-scrollerid":a,style:T.current,ref:S},"setup"!=m&&n),s&&r().createElement(_t,{scrollTrackerAPIRef:w,styles:i.scrolltracker}))))};function qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Xt=function(e){var n,o=e.children,i=e.virtualListSpecs,a=e.gridSpecs,l=e.paddingProps,s=e.gapProps,c=e.styles,u=(e.scrollerID,a.orientation),d=a.cellHeight,f=a.cellWidth,h=i.size,p=(0,t.useContext)(Ut),g=qt((0,t.useState)("setup"),2),v=g[0],m=g[1],y=(0,t.useRef)(null),b=(0,t.useMemo)((function(){return Object.assign(Object.assign({},c.scrollblock),{position:"relative"})}),[]),I=(0,t.useRef)(b),x={width:(n=p.elementRef.current).offsetWidth,height:n.offsetHeight},S=x.height,w=x.width;(0,t.useLayoutEffect)((function(){P({orientation:u,viewportheight:S,viewportwidth:w,listsize:h,cellHeight:d,cellWidth:f,gapProps:s,paddingProps:l}),I.current=Yt(u,I,y,f,d,l),m("update")}),[u,S,w,h,d,f,s,l]);var P=(0,t.useCallback)((function(e){var t=Kt(e);y.current=t}),[]);return(0,t.useLayoutEffect)((function(){switch(v){case"setup":case"update":m("ready")}}),[v]),r().createElement("div",{"data-type":"scrollblock",style:I.current},o)};var Kt=function(e){var t,r,n,o,i,a=e.orientation,l=e.viewportheight,s=e.viewportwidth,c=e.listsize,u=e.cellHeight,d=e.cellWidth,f=e.gapProps,h=e.paddingProps;"vertical"==a?(o=f.column,t=d+(i=f.row),r=u+o,n=s-h.left-h.right):(t=u+(o=f.row),r=d+(i=f.column),n=l-h.top-h.bottom),(n+=i)<t&&(n=t);var p=Math.floor(n/t),g=Math.ceil(c/p),v=g*r-(g>0?o:0);return"vertical"==a?(h.top,h.bottom):(h.left,h.right),v},Yt=function(e,t,r,n,o,i){var a,l,s,c,u=Object.assign({},t.current);return"vertical"==e?(a=r.current+"px",l="100%",c=n+(i.left+i.right)+"px",s=null):(a="100%",l=r.current+"px",s=o+(i.top+i.bottom)+"px",c=null),u.height=a,u.width=l,u.minHeight=s,u.minWidth=c,u.padding=i.CSS,u};function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Jt=function(e){var n=(0,t.useContext)(fi),o=(0,t.useContext)(hi),i=(0,t.useContext)(Ut),a=(0,t.useRef)(null),l=(i.frameElementRef.current,i.elementRef.current,i.outerElementRef.current),s=(e.scrollerID,e.virtualListSpecs),c=(s.size,s.lowindex),u=s.highindex,d=s.range,f=Qt((0,t.useState)("ready"),2),h=f[0],p=f[1];(0,t.useEffect)((function(){switch(h){case"gotoheadposition":var e=s.lowindex;a.current.serviceHandler.scrollToIndex(e),p("ready");break;case"gototailposition":var t=s.highindex;a.current.serviceHandler.scrollToIndex(t),p("ready")}}),[h]);var g=Ot({accept:o.dndOptions.accept||["-x-x-x-"],collect:function(e){return{canDrop:e.canDrop()}},drop:function(e,t){var r=t.getDropResult(),i=n.dynamicDropEffect;if(n.dynamicDropEffect=null,"none"!==i&&r&&r.target&&("viewport"!=r.dataType||n.onDroppableWhitespace)){var l;["move","copy"].includes(i)&&(l=i);var s=l||r.dropEffect||"move",f=n.onDroppableWhitespace,h=n.whitespacePosition;e.dropEffect=s;var g,v,m,y=a.current,b=y.serviceHandler,I=y.cacheAPI,x=y.contentHandler,S=y.stateHandler,w=e.index,P=e.scrollerID,C=e.itemID;if(v=r.target.scrollerID,"cellframe"==r.dataType)m=w>(g=r.target.index)?g+1:g-1;else{switch(n.onDroppableWhitespace=!1,n.whitespacePosition=null,h){case"all":g=o.cradleParameters.cradleInheritedPropertiesRef.current.startingIndex;break;case"head":g=v===P&&"move"==s?c:c-1;break;case"tail":g=v===P&&"move"==s?u:u+1}m=null}if(P===v)o.displacedIndex=m,o.droppedIndex=g,I.itemMetadataMap.has(C)&&"copy"!=s||(o.dndFetchIndex=g,o.dndFetchItem=e),"move"==s?b.moveIndex(g,w):(b.insertIndex(g),f&&setTimeout((function(){p("head"==h?"gotoheadposition":"gototailposition")}),100));else{var O=n.dragContext;if(I.itemMetadataMap.has(C)&&"move"==s){var R=Qt(O.sourceServiceHandler.getPropertiesSnapshot(),1)[0].virtualListProps,D=(R.size,R.range),E=-1;O.sourceCacheAPI.insertOrRemoveCacheIndexesFromScroller(w,w,E,d);var T=Qt(D,2),A=T[0],M=T[1];O.sourceServiceHandler.newListRange=A===M?[]:[A,M-1],O.sourceStateHandler.setCradleState("changelistsizeafterinsertremove"),E=1;var L=Qt(I.insertOrRemoveCacheIndexes(g,g,E,d),3),k=L[0],j=L[1],N=L[2];I.addCacheItemToScroller(C,g),x.synchronizeCradleItemIDsToCache(N,j,k);var H=Qt(d,2),F=H[0],_=H[1];b.newListRange=0===d.length?[g,g]:f&&"head"==h?[F-1,_]:[F,_+j],o.displacedIndex=f?null:g+1,o.droppedIndex=g,S.setCradleState("applyinsertremovechanges")}else"move"==s&&O.sourceServiceHandler.removeIndex(w),o.dndFetchIndex=g,o.dndFetchItem=e,o.displacedIndex=f?null:g+1,o.droppedIndex=g,b.insertIndex(g);f&&setTimeout((function(){p("head"==h?"gotoheadposition":"gototailposition")}),100)}}}}),v=Qt(g,2),m=(v[0],v[1]);(0,t.useEffect)((function(){m(l)}),[]);var y=Object.assign(Object.assign({},e),{handlerListRef:a});return r().createElement(yo,Object.assign({},y))};function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tr(e){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==tr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===tr(i)?i:String(i)),n)}var o,i}function nr(e,t,r){return t&&rr(e.prototype,t),r&&rr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var or=nr((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scrollData={start:0,current:0,previous:0,previousupdate:0,currentupdate:0},this._scrolltimerid=null,this.isScrolling=!1,this.resetScrollData=function(e){var t=r.scrollData;t.start=t.current=t.previous=t.previousupdate=t.currentupdate=e},this.onScroll=function(e){var t=r.cradleParameters.cradleInheritedPropertiesRef.current,n=(t.scrollerID,t.ONAFTERSCROLL_TIMEOUT),o=t.layout,i=r.cradleParameters.viewportContextRef.current,a=e.currentTarget,l=a.firstChild,s=r.cradleParameters.cradleInheritedPropertiesRef.current.orientation,c="vertical"==s?a.scrollTop:a.scrollLeft,u="horizontal"==s?a.scrollTop:a.scrollLeft;if((clearTimeout(r._scrolltimerid),0!=a.clientWidth||0!=a.clientHeight)&&!(c<0||r.cradleParameters.handlersRef.current.interruptHandler.signals.pauseScrollingEffects)){r.isScrolling||(r.isScrolling=!0,ci?(r._onAfterScrollTimeout=1e3,clearTimeout(r._iOSsetTimeoutTimerid),r._iOSsetTimeoutTimerid=setTimeout((function(){r._onAfterScrollTimeout=n}),900)):r._onAfterScrollTimeout=n,r.scrollData.start=c,r.scrollData.currentupdate=c);var d,f,h,p,g=r.cradleParameters.handlersRef.current,v=g.layoutHandler,m=g.stateHandler,y=v.cradlePositionData,b=m.cradleStateRef.current;if(y.trackingBlockScrollPos=c,y.trackingXBlockScrollPos=u,r.scrollData.previous=r.scrollData.current,r.scrollData.current=c,i.isResizing||"repositioningRender"==b&&r.calcImpliedRepositioningData("onScroll"),r._scrolltimerid=setTimeout((function(){m.isMountedRef.current&&r.onAfterScroll()}),r._onAfterScrollTimeout),"variable"==o)"vertical"==s?(d=a.scrollHeight,f=a.offsetHeight,h=a.scrollTop,p=l.offsetTop):(d=a.scrollWidth,f=a.offsetWidth,h=a.scrollLeft,p=l.offsetLeft),clearTimeout(r._scrollforvariabletimerid),h-p<0||d<h-p+f?r.onAfterScrollForVariable():r._scrollforvariabletimerid=setTimeout((function(){m.isMountedRef.current&&r.onAfterScrollForVariable()}),r._onAfterScrollTimeout);return!1}},this.onAfterScroll=function(){r.isScrolling=!1;var e=r.cradleParameters.handlersRef.current,t=e.stateHandler,n=e.contentHandler,o=e.serviceHandler,i=r.cradleParameters.cradleInheritedPropertiesRef.current;if("repositioningRender"===t.cradleStateRef.current){r.updateBlockScrollPos();var a=r.cradleParameters.cradleInheritedPropertiesRef.current.scrollerID,l=o.callbacks.repositioningFlagCallback;l&&l(!1,{contextType:"repositioningFlag",scrollerID:a}),t.setCradleState("finishreposition")}else r.scrollData.start==r.scrollData.current&&r.scrollData.current==r.scrollData.previous||t.isMountedRef.current&&r.updateReferenceData();"keepload"==i.cache&&n.pareCacheToMax()},this.onAfterScrollForVariable=function(){r.isScrolling=!1;var e,t=r.cradleParameters.viewportContextRef.current.elementRef.current,n=t.firstChild,o=r.cradleParameters.cradleInheritedPropertiesRef.current.orientation,i="vertical"==o?n.offsetTop:n.offsetLeft,a="vertical"==o?t.scrollTop:t.scrollLeft,l=t.scrollTop,s=t.scrollLeft;t.style.overflow="hidden","vertical"==o?(e={top:a-i,left:s,behavior:"instant"},n.style.top=null):(e={top:l,left:a-i,behavior:"instant"},n.style.left=null),t.scroll(e),t.style.overflow="scroll"},this.updateReferenceData=function(){var e=r.cradleParameters.handlersRef.current,t=e.stateHandler,n=e.layoutHandler;if(t.isMountedRef.current){var o,i=r.cradleParameters.cradleInheritedPropertiesRef.current,a=r.cradleParameters.viewportContextRef.current,l=n.elements.axisRef.current,s=a.elementRef.current,c=s.firstChild;o="vertical"==i.orientation?l.offsetTop+c.offsetTop-s.scrollTop:l.offsetLeft+c.offsetLeft-s.scrollLeft,n.cradlePositionData.targetPixelOffsetAxisFromViewport=o,a.isResizing||r.updateBlockScrollPos()}},this.updateBlockScrollPos=function(){var e=r.cradleParameters.cradleInheritedPropertiesRef.current,t=r.cradleParameters.viewportContextRef.current,n=r.cradleParameters.handlersRef.current.layoutHandler.cradlePositionData,o=t.elementRef.current;0==o.clientWidth&&0==o.clientHeight||("vertical"==e.orientation?(n.trackingBlockScrollPos=o.scrollTop,n.trackingXBlockScrollPos=o.scrollLeft):(n.trackingBlockScrollPos=o.scrollLeft,n.trackingXBlockScrollPos=o.scrollTop))},this.calcImpliedRepositioningData=function(e){var t,n,o,i=r.cradleParameters.viewportContextRef.current,a=r.cradleParameters.cradleInheritedPropertiesRef.current,l=r.cradleParameters.cradleInternalPropertiesRef.current,s=l.virtualListProps,c=l.paddingProps,u=l.gapProps,d=i.elementRef.current,f=d.firstChild,h=a.orientation,p=s.crosscount,g=s.size,v=s.lowindex,m=r.cradleParameters.handlersRef.current.serviceHandler.callbacks.repositioningIndexCallback,y=r.cradleParameters.cradleInheritedPropertiesRef.current.scrollerID;"vertical"==h?(t=d.scrollTop,n=a.cellHeight+u.column,o=f.offsetTop):(t=d.scrollLeft,n=a.cellWidth+u.row,o=f.offsetLeft);var b=n-(t+o)%n,I="vertical"==h?c.top:c.left;b==n&&(b=0);var x=Math.ceil((t-I)/n)*p;x=Math.min(x,g-1),0==(x-=x%p)&&(b=0);var S=r.cradleParameters.handlersRef.current.layoutHandler.cradlePositionData;S.targetAxisReferencePosition=x,S.targetPixelOffsetAxisFromViewport=b,"onScroll"==e&&(m&&m(x+v,{contextType:"repositioningIndex",scrollerID:y}),i.scrollTrackerAPIRef.current.updateReposition(x))},this.cradleParameters=t}));function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==ir(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ir(i)?i:String(i)),n)}var o,i}function lr(e,t,r){return t&&ar(e.prototype,t),r&&ar(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var sr,cr=lr((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cradleParameters=t;var r=t.cradleInternalPropertiesRef.current;this.setCradleState=r.setCradleState,this.cradleStateRef=r.cradleStateRef,this.isMountedRef=r.isMountedRef})),ur=o(308),dr=o(111),fr=(sr=function(e,t){return sr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},sr(e,t)},function(e,t){function r(){this.constructor=e}sr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),hr="html",pr="svg",gr=function(e,t){var r,n,o,i={};if(e===hr)o=document.createElement("div");else{if(e!==pr)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');o=document.createElementNS("http://www.w3.org/2000/svg","g")}if(t&&"object"==typeof t)for(var a=0,l=Object.entries(t.attributes);a<l.length;a++){var s=l[a],c=s[0],u=s[1];o.setAttribute(c,u)}var d={element:o,elementType:e,setPortalProps:function(e){i=e},getInitialPortalProps:function(){return i},mount:function(t,o){if(o!==n){if(d.unmount(),t!==r&&!function(e,t){if(t===hr)return e instanceof HTMLElement;if(t===pr)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(t,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+t.tagName+">.");t.replaceChild(d.element,o),r=t,n=o}},unmount:function(e){e&&e!==n||r&&n&&(r.replaceChild(n,d.element),r=void 0,n=void 0)}};return d},vr=function(e){function r(t){var r=e.call(this,t)||this;return r.addPropsChannel=function(){Object.assign(r.props.node,{setPortalProps:function(e){r.setState({nodeProps:e})}})},r.state={nodeProps:r.props.node.getInitialPortalProps()},r}return fr(r,e),r.prototype.componentDidMount=function(){this.addPropsChannel()},r.prototype.componentDidUpdate=function(){this.addPropsChannel()},r.prototype.render=function(){var e=this,r=this.props,n=r.children,o=r.node;return dr.createPortal(t.Children.map(n,(function(r){return t.isValidElement(r)?t.cloneElement(r,e.state.nodeProps):r})),o.element)},r}(t.PureComponent),mr=function(e){function r(r){var n=e.call(this,r)||this;return n.placeholderNode=t.createRef(),n.passPropsThroughPortal(),n}return fr(r,e),r.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},r.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,r=t.parentNode;e.mount(r,t),this.passPropsThroughPortal()},r.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode.setPortalProps({}),this.currentPortalNode=e);var t=this.placeholderNode.current,r=t.parentNode;e.mount(r,t),this.passPropsThroughPortal()},r.prototype.componentWillUnmount=function(){var e=this.props.node;e.unmount(this.placeholderNode.current),e.setPortalProps({})},r.prototype.render=function(){return t.createElement("div",{ref:this.placeholderNode})},r}(t.PureComponent),yr=gr.bind(null,hr);gr.bind(null,pr);function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ir(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ir(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const xr=function(e){var n=e.index,o=e.listsize,i=e.message,a=e.error,l=e.dndEnabled,s=e.userFrameStyles,c=e.userLinerStyles,u=e.userErrorFrameStyles,d=e.userErrorLinerStyles,f=br((0,t.useMemo)((function(){var e=a?u:s,t=a?d:c;return[Object.assign(Object.assign({border:"2px solid black",backgroundColor:"cyan"},e),{position:"relative",boxSizing:"border-box",height:"100%",width:"100%",overflow:"hidden"}),Object.assign({top:0,left:0,padding:"3px",margin:"3px",fontSize:"smaller"},t)]}),[a,s,c,u,d]),2),h=f[0],p=f[1],g=(0,t.useMemo)((function(){return l?r().createElement("div",{style:{float:"left",height:"28px",width:"31px"},"data-type":"dnd-float"}):null}),[l]);return i=null!=i?i:"(loading...)",r().createElement("div",{"data-type":"placeholderframe",style:h},l&&g,a?r().createElement("div",{"data-type":"placeholderliner",style:p},"item is not available (",a.message,")"):r().createElement("div",{"data-type":"placeholderliner",style:p},n+1,"/",o," ",i))};var Sr=o(379),wr=o.n(Sr),Pr=o(795),Cr=o.n(Pr),Or=o(569),Rr=o.n(Or),Dr=o(565),Er=o.n(Dr),Tr=o(216),Ar=o.n(Tr),Mr=o(589),Lr=o.n(Mr),kr=o(109),jr={};jr.styleTagTransform=Lr(),jr.setAttributes=Er(),jr.insert=Rr().bind(null,"head"),jr.domAPI=Cr(),jr.insertStyleElement=Ar();wr()(kr.Z,jr);kr.Z&&kr.Z.locals&&kr.Z.locals;function Nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Fr=function(e){var n,o,i,a,l,s=e.itemID,c=e.index,u=(0,t.useContext)(mo),d=(0,t.useContext)(fi),f=(0,t.useContext)(hi),h=Nr((0,t.useState)("ready"),2),p=h[0],g=h[1],v=d.prescribedDropEffect||(d.altKey?"copy":null)||"move",m=u.scrollerPropertiesRef.current,y=(m.orientation,m.scrollerID),b=(m.virtualListProps.crosscount,(0,t.useRef)(null)),I=(0,t.useRef)(null),x=Nr(Ot({accept:f.dndOptions.accept,drop:function(e,t){return{dataType:"cellframe",target:{scrollerID:y,itemID:s,index:c}}},collect:function(e){return{sourceItem:e.getItem(),isOver:e.isOver(),canDrop:e.canDrop()}}}),2),S=x[0],w=x[1],P=(0,t.useRef)(!1),C=null===(n=S.sourceItem)||void 0===n?void 0:n.index,O=null===(o=S.sourceItem)||void 0===o?void 0:o.scrollerID,R=y!==O||C!==c||C===c&&"copy"==v,D="rigs-target-highlight";R&&S.isOver&&S.canDrop&&!(null===(i=I.current)||void 0===i?void 0:i.classList.contains(D))?(P.current=!0,I.current.classList.add(D),d.dropCount++):!R&&C===c&&(null===(a=I.current)||void 0===a?void 0:a.classList.contains(D))?(I.current.classList.remove(D),d.dropCount--):R&&!S.isOver&&(null===(l=I.current)||void 0===l?void 0:l.classList.contains(D))&&(d.dropCount--,I.current.classList.remove(D),P.current=!1);var E=R&&S.isOver&&S.canDrop;(0,t.useEffect)((function(){return w(b.current),function(){P.current&&d.dropCount--,T()}}),[]);var T=function(){var e=!!d.dropCount;d.dragContext.canDrop!==e&&(d.dragContext.canDrop=e,d.setDragBarState&&d.setDragBarState("updateicon"))};T();var A=(0,t.useRef)(!0);(0,t.useEffect)((function(){var e=f.dndOptions.enabled;A.current!==e&&(A.current=e)}),[d.installed,d.enabled,f.dndOptions.enabled]),(0,t.useEffect)((function(){"refresh"==p&&g("ready")}),[p]);var M=Object.assign(Object.assign({},e),{isDndEnabled:A.current,frameRef:b,masterDndContext:d,showDndDisplaceIcon:E,setDndCellFrameState:g,contentHolderElementRef:I});return r().createElement(un,Object.assign({},M))};var _r=function(e,t,r,n,o){"uniform"==t?(e.style.inset="0px",e.style.position="absolute",e.style.maxWidth=null,e.style.maxHeight=null,e.style.height=null,e.style.width=null):(e.style.inset=null,e.style.position=null,"vertical"==r?(e.style.width="100%",e.style.height=null,e.style.maxWidth=null,e.style.maxHeight=o+"px"):(e.style.width=null,e.style.height="100%",e.style.maxWidth=n+"px",e.style.maxHeight=null))};function Br(e){return(0,t.useMemo)((()=>e.hooks.dragSource()),[e])}function zr(e){return(0,t.useMemo)((()=>e.hooks.dragPreview()),[e])}class Ur{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();r&&this.disconnectDragPreview(),this.handlerId&&(t?r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!gt(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!gt(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=yt({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,vt(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,vt(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}let Wr,Vr=!1,qr=!1;class Gr{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){f(!Vr,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Vr=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Vr=!1}}isDragging(){if(!this.sourceId)return!1;f(!qr,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return qr=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{qr=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}class Xr{beginDrag(){const e=this.spec,t=this.monitor;let r=null;return r="object"==typeof e.item?e.item:"function"==typeof e.item?e.item(t):{},null!=r?r:null}canDrag(){const e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}isDragging(e,t){const r=this.spec,n=this.monitor,{isDragging:o}=r;return o?o(n):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,r=this.connector,{end:n}=e;n&&n(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}function Kr(e,r,n){const o=xt(),i=function(e,r,n){const o=(0,t.useMemo)((()=>new Xr(e,r,n)),[r,n]);return(0,t.useEffect)((()=>{o.spec=e}),[e]),o}(e,r,n),a=function(e){return(0,t.useMemo)((()=>{const t=e.type;return f(null!=t,"spec.type must be defined"),t}),[e])}(e);ut((function(){if(null!=a){const[e,t]=function(e,t,r){const n=r.getRegistry(),o=n.addSource(e,t);return[o,()=>n.removeSource(o)]}(a,i,o);return r.receiveHandlerId(e),n.receiveHandlerId(e),t}}),[o,r,n,i,a])}function Yr(e,r){const n=ht(e,r);f(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const o=function(){const e=xt();return(0,t.useMemo)((()=>new Gr(e)),[e])}(),i=function(e,r){const n=xt(),o=(0,t.useMemo)((()=>new Ur(n.getBackend())),[n]);return ut((()=>(o.dragSourceOptions=e||null,o.reconnect(),()=>o.disconnectDragSource())),[o,e]),ut((()=>(o.dragPreviewOptions=r||null,o.reconnect(),()=>o.disconnectDragPreview())),[o,r]),o}(n.options,n.previewOptions);return Kr(n,o,i),[ft(n.collect,o,i),Br(i),zr(i)]}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Jr=function(e){var n,o=e.itemID,i=e.index,a=e.profile,l=e.contentHolderElementRef,s=e.scrollerID,c=e.setDndCellFrameState,u=e.dndDragIconStyles,d=e.dndOptions,f=(0,t.useContext)(hi),h=(0,t.useContext)(fi),p=(h||{}).dragContext;u=null!=u?u:{},d=null!=d?d:{};var g=null===(n=f.dndOptions)||void 0===n?void 0:n.dropEffect,v=(0,t.useMemo)((function(){var e=g?{dropEffect:g}:{};return h.prescribedDropEffect=e.dropEffect,e}),[g]),m=Qr(Yr((function(){return{type:d.type||"-x-x-x-",options:v,item:{scrollerID:s,index:i,itemID:o,profile:a,dndOptions:d,dropEffect:v.dropEffect},collect:function(e){return{isDragging:!!e.isDragging()}}}}),[o,d,v]),3),y=m[0],b=m[1],I=m[2],x=y.isDragging,S="rigs-source-highlight";x&&!p.isDragging&&(Object.assign(p,{isDragging:x,scrollerID:s,itemID:o,index:i,dndOptions:d,scrollerDndOptions:f.dndOptions,scrollerProfile:f.profile,sourceCacheAPI:f.cacheAPI,sourceStateHandler:f.stateHandler,sourceServiceHandler:f.serviceHandler,setDndCellFrameState:c}),h.setViewportState("startdragbar")),x&&!l.current.classList.contains(S)&&l.current.classList.add(S),!x&&l.current.classList.contains(S)&&l.current.classList.remove(S),(0,t.useEffect)((function(){return I((Wr||(Wr=new Image,Wr.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Wr),{captureDraggingState:!0}),function(){h.dragContext.setDndCellFrameState=null}}),[]);var w=(0,t.useRef)({margin:"3px",opacity:.6}),P=(0,t.useRef)(Object.assign({position:"absolute",zIndex:"3",top:0,left:0,opacity:.8,height:"32px",width:"32px"},u));return r().createElement("div",{"data-type":"dragicon",ref:b,style:P.current},r().createElement("img",{draggable:!1,style:w.current,src:Tt}))};function $r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return en(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const tn=function(e){var n=e.orientation,o=e.scrollerID,i=e.index,a=$r((0,t.useState)("ready"),2),l=a[0],s=a[1],c=(0,t.useContext)(fi),u=(0,t.useRef)(c.altKey),d=(0,t.useContext)(mo),f=c.dragContext,h=c.prescribedDropEffect,p=f.scrollerID,g=f.index,v=h||c.altKey?"copy":"move",m=d.scrollerPropertiesRef.current.virtualListProps.crosscount,y=(0,t.useRef)(null);(0,t.useEffect)((function(){if(!$e)return y.current=setInterval((function(){c.altKey!==u.current&&(u.current=c.altKey,s("refresh"))}),200),function(){clearInterval(y.current)}}),[]),(0,t.useEffect)((function(){"ready"!=l&&s("ready")}),[l]);var b=(0,t.useMemo)((function(){return"forward"==(o!==p||i<g||"copy"==v?"forward":"back")?1===m?"vertical"==n?".25turn":"0turn":"vertical"==n?"0turn":".25turn":1===m?"vertical"==n?".75turn":".50turn":"vertical"==n?".50turn":".75turn"}),[n,o,i,p,g,m,v]),I=(0,t.useRef)({zIndex:2,position:"absolute",width:"100%",top:"0"}),x=(0,t.useMemo)((function(){return{float:"right",marginRight:"6px",opacity:"0.5",transform:"rotate(".concat(b,")")}}),[b]);return r().createElement("div",{style:I.current,"data-type":"displaceicon"},r().createElement("img",{style:x,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAIxJREFUSEvt1CEPgCAQhuGXn2k3W41qs5rt/k3dbejcBGHAkaBQ2PewuwOD8jLK+TQgWOGcEs02/d6dWCogoZNNXAAvkgpI9gisISQHkOwB2P6QXECye2D3ISUAye6Aw4W8gTM4c/EHnsZXBeLv9z0ZVaJUQLXJqmOq+tCqfBWqn130QJR6yV6wAcFeXLa4GhlcekqaAAAAAElFTkSuQmCC"}))};function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function nn(){nn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),l=new T(n||[]);return o(a,"_invoke",{value:O(e,r,l)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",g="completed",v={};function m(){}function y(){}function b(){}var I={};c(I,a,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(A([])));S&&S!==r&&n.call(S,a)&&(I=S);var w=b.prototype=m.prototype=Object.create(I);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,l){var s=d(e[o],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==rn(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=f;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var s=R(l,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?g:h,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=g,n.method="throw",n.arg=c.arg)}}}function R(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,R(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(rn(t)+" is not iterable")}return y.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},P(C.prototype),c(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(w),c(w,s,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function on(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return an(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return an(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ln=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};const sn=function(e){var n=(0,t.useContext)(hi);if((0,t.useContext)(fi).installed&&n.dndOptions.enabled)return r().createElement(Fr,Object.assign({},e));var o=(0,t.useRef)(null),i=Object.assign(Object.assign({},e),{contentHolderElementRef:o,isDndEnabled:!1});return r().createElement(un,Object.assign({},i))};var cn={loading:"(loading...)",retrieving:"(retrieving from cache)",null:"end of list",undefined:'host returned "undefined"',invalid:"invalid React element"},un=function(e){var n,o=e.orientation,i=e.cellHeight,a=e.cellWidth,l=e.cellMinHeight,s=e.cellMinWidth,c=e.layout,u=e.getItemPack,d=e.listsize,f=e.placeholder,h=e.itemID,p=e.index,g=e.instanceID,v=e.scrollerID,m=e.isTriggercell,y=e.placeholderFrameStyles,b=e.placeholderLinerStyles,I=e.placeholderErrorFrameStyles,x=e.placeholderErrorLinerStyles,S=e.dndDragIconStyles,w=e.placeholderMessages,P=e.usePlaceholder,C=e.gridstartstyle,O=(e.parentframeRef,e.isDndEnabled),R=e.frameRef,D=e.contentHolderElementRef,E=e.showDndDisplaceIcon,T=e.setDndCellFrameState,A=(0,t.useContext)(hi),M=(0,t.useContext)(fi),L=(0,t.useRef)(null);L.current={orientation:o,layout:c,cellWidth:a,cellHeight:i};var k=(0,t.useContext)(mo),j=k.cacheAPI,N=k.scrollerPropertiesRef,H=k.itemExceptionCallback,F=k.IDLECALLBACK_TIMEOUT,_=k.triggercellTriggerlinesRef,B=(0,t.useRef)({}),z=(0,t.useRef)({}),U=(0,t.useRef)(null);U.current=(0,t.useMemo)((function(){return Object.assign(Object.assign({},cn),w)}),[w]);var W=on((0,t.useState)("setup"),2),V=W[0],q=W[1],G=(0,t.useRef)(null);G.current=V;var X=(0,t.useRef)(!0),K=(0,t.useRef)(null),Y=(0,t.useRef)(null),Q=(0,t.useRef)(null);Q.current=h;var Z=(0,t.useRef)(null),J=(0,t.useRef)(null),$=(0,t.useRef)(O);J.current={itemID:h,index:p};var ee=(0,t.useRef)(!1),te=(0,t.useRef)(null);(0,t.useEffect)((function(){return X.current=!0,function(){X.current=!1}}),[]);(0,t.useEffect)((function(){return function(){oe(ie.current),j.unregisterPendingPortal(p)}}),[]),(0,t.useEffect)((function(){["inserting","retrieved"].includes(V)&&(setTimeout((function(){if(A.droppedIndex===p){var e="rigs-dropped-highlight";(null==D?void 0:D.current)&&(A.droppedIndex=null,D.current.classList.add(e),setTimeout((function(){(null==D?void 0:D.current)&&D.current.classList.remove(e)}),2e3))}}),100),function(){if(A.displacedIndex===p){A.displacedIndex=null;var e="rigs-target-finish";D.current.classList.add(e),setTimeout((function(){(null==R?void 0:R.current)&&D.current.classList.remove(e)}),2e3)}}())}),[V]),(0,t.useLayoutEffect)((function(){"setup"!=G.current&&X.current&&q("getusercontent")}),[h]);var re=(0,t.useMemo)((function(){var e;if(!P)return null;var t=null===(e=A.dndOptions)||void 0===e?void 0:e.enabled;return f?r().createElement(f,{index:p,listsize:d,message:te.current,error:ee.current,dndEnabled:t}):null}),[p,f,d,te.current,ee.current,P]);Y.current=(0,t.useMemo)((function(){var e;return P?re||r().createElement(xr,{key:"placeholder",index:p,listsize:d,message:te.current,error:ee.current,dndEnabled:null===(e=A.dndOptions)||void 0===e?void 0:e.enabled,userFrameStyles:y,userLinerStyles:b,userErrorFrameStyles:I,userErrorLinerStyles:x}):null}),[p,re,d,te.current,ee.current,P,y,b,I,x]);var ne=window.requestIdleCallback?window.requestIdleCallback:ur.requestIdleCallback,oe=window.cancelIdleCallback?window.cancelIdleCallback:ur.cancelIdleCallback,ie=(0,t.useRef)(null);(0,t.useEffect)((function(){var e=function(e,t,r,n,o,i,a){var l=Object.assign(Object.assign({},a),{position:"relative",overflow:"visible"});return"vertical"===e?(l.width=null,"uniform"==i?(l.height=t+"px",l.minHeight=null,l.maxHeight=null):(l.height=null,l.minHeight=n+"px",l.maxHeight=t+"px")):(l.height=null,"uniform"==i?(l.width=r+"px",l.minWidth=null,l.maxWidth=null):(l.width=null,l.minWidth=o+"px",l.maxWidth=r+"px")),l}(o,i,a,l,s,c,B.current);C&&(e=Object.assign(Object.assign({},e),C));var t=function(e,t,r,n){var o={};return"uniform"==e?o={inset:"0px",position:"absolute",height:null,width:null,minWidth:null,minHeight:null}:(o.inset=null,o.position=null,"vertical"==t?(o.width="100%",o.height=null,o.minWidth=null,o.minHeight=n+"px"):(o.width=null,o.height="100%",o.minWidth=r+"px",o.minHeight=null)),o}(c,o,s,l);X.current&&(B.current=e,z.current=t)}),[o,i,a,l,s,c,C]);var ae=(0,t.useRef)(null);return(0,t.useLayoutEffect)((function(){switch(V){case"setup":q("working");break;case"working":q("getusercontent");break;case"getusercontent":var e=Q.current,t=j.hasPortal(e),n=L.current,o=n.layout,i=n.orientation,a=n.cellWidth,l=n.cellHeight;t?(te.current=U.current.retrieving,X.current&&(K.current=j.getPortalMetadata(e),Object.assign(K.current.scrollerContext,{cell:J,scroller:N}),Z.current=K.current.dndOptions,ae.current=K.current.portalNode,_r(ae.current.element,o,i,a,l),q("retrieved"))):(te.current=U.current.loading,j.registerPendingPortal(p),ie.current=ne((function(){return ln(void 0,void 0,void 0,nn().mark((function t(){var n,s,c,d,f,h,g,m,y,b,I,x,S,w;return nn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!u){t.next=15;break}return M.installed&&A.dndFetchIndex===p?(y={contextType:"dndFetchRequest",accept:A.dndOptions.accept,scrollerID:v,scrollerProfile:k.scrollerProfile,item:A.dndFetchItem},A.dndFetchIndex=null,A.dndFetchItem=null):y=M.installed?{contextType:"dndFetch",accept:A.dndOptions.accept,scrollerID:v,scrollerProfile:k.scrollerProfile}:{contextType:"fetch",scrollerProfile:k.scrollerProfile,scrollerID:v},t.next=5,u(p,e,y);case 5:return m=t.sent,f=(b=m).dndOptions,h=b.profile,f=null!=f?f:{},h=null!=h?h:{},Z.current=f,t.next=14,m.component;case 14:d=t.sent;case 15:null==d&&(g=new Error(U.current.undefined)),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),c=d=void 0,g=m?t.t0:new Error("no data ( "+t.t0.message+")");case 22:if(void 0!==d&&(r().isValidElement(d)||(c=d,d=void 0,g=new Error(U.current.invalid))),!X.current){t.next=42;break}if(void 0===d){t.next=38;break}return x={cell:J,scroller:N},S=0,w={},(null===(n=d.props)||void 0===n?void 0:n.hasOwnProperty("scrollerContext"))&&(w.scrollerContext=x,S++),(null===(s=d.props)||void 0===s?void 0:s.hasOwnProperty("cacheAPI"))&&(w.cacheAPI=j.instance,S++),I=S?r().cloneElement(d,w):d,t.next=33,j.createPortal(I,p,e,x,f,h);case 33:K.current=t.sent,K.current&&(ae.current=K.current.portalNode,_r(ae.current.element,o,i,a,l)),X.current&&q("inserting"),t.next=42;break;case 38:j.unregisterPendingPortal(p),ee.current=g,H&&H(p,{contextType:"itemException",itemID:e,scrollerID:v,profile:h,dndOptions:f,component:c,action:"fetch",error:g.message}),X.current&&q("nodata");case 42:case"end":return t.stop()}}),t,null,[[0,18]])})))}),{timeout:F}));break;case"inserting":case"updatedndoptions":case"retrieved":q("ready")}}),[V]),r().createElement("div",{ref:R,"data-type":"cellframe","data-scrollerid":v,"data-index":p,"data-instanceid":g,style:B.current},"setup"!=V?r().createElement(r().Fragment,null,r().createElement("div",{"data-type":"contentholder",ref:D,style:z.current},"ready"!=V?Y.current:r().createElement(mr,{key:"portal",node:ae.current})),$.current&&["ready","nodata"].includes(V)&&r().createElement(Jr,{contentHolderElementRef:D,itemID:h,index:p,setDndCellFrameState:T,dndOptions:Z.current,profile:null===(n=K.current)||void 0===n?void 0:n.profile,dndDragIconStyles:S,scrollerID:v})):r().createElement("div",null),m?_.current:null,$.current&&E&&["ready","nodata"].includes(V)&&r().createElement(tn,{orientation:o,scrollerID:v,index:p}))};function dn(e){return function(e){if(Array.isArray(e))return fn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var hn=function(e){var t=e.cradleInheritedProperties,r=e.cradleInternalProperties,n=e.cacheAPI,o=e.cradleContentCount,i=e.cradleReferenceIndex,a=e.listStartChangeCount,l=e.listEndChangeCount,s=e.workingContentList,c=e.instanceIdCounterRef,u=e.styles,d=e.placeholderMessages,f=dn(s),h=i+f.length-1,p=[],g=[],v=[],m=[];if(a>=0){var y=i,b=a;a>o&&(y=i-(a-o),b=o);for(var I=y-b;I<y;I++)p.push(gn({index:I,cradleInheritedProperties:t,cradleInternalProperties:r,instanceIdCounterRef:c,cacheAPI:n,placeholderFrameStyles:u.placeholderframe,placeholderLinerStyles:u.placeholderliner,placeholderErrorFrameStyles:u.placeholdererrorframe,placeholderErrorLinerStyles:u.placeholdererrorliner,dndDragIconStyles:u.dndDragIcon,placeholderMessages:d}))}else m=f.splice(0,-a);if(l>=0){var x=h,S=l;l>o&&(x=h+(l-o),S=o);for(var w=x+1;w<x+1+S;w++)g.push(gn({index:w,cradleInheritedProperties:t,cradleInternalProperties:r,instanceIdCounterRef:c,cacheAPI:n,placeholderFrameStyles:u.placeholderframe,placeholderLinerStyles:u.placeholderliner,placeholderErrorFrameStyles:u.placeholdererrorframe,placeholderErrorLinerStyles:u.placeholdererrorliner,placeholderMessages:d,dndDragIconStyles:u.dndDragIcon}))}else v=f.splice(l,-l);var P=[].concat(dn(m),dn(v));return[[].concat(p,dn(f),g),P]},pn=function(e){var t,n=e.contentlist,o=e.axisReferenceIndex,i=e.layoutHandler,a=i.triggercellIndex,l=null===(t=n[0])||void 0===t?void 0:t.props.index,s=l+n.length,c=o-l,u=0==c?o:o-1;if(i.triggercellIsInTail=0==c,void 0!==a&&void 0!==l&&a>=l&&a<=s){var d=a-l,f=n[d];f&&(n[d]=r().cloneElement(f,{isTriggercell:!1}))}var h=u-l,p=n[h];return p?(n[h]=r().cloneElement(p,{isTriggercell:!0}),i.triggercellIndex=u):(console.log("FAILURE TO REGISTER TRIGGERCELL:scrollerID","-"+i.scrollerID+"-"),console.log("axisReferenceIndex, triggercellIndex, lowcontentindex, highcontentindex, headitemcount, targetTriggercellIndex\n",o,a,l,s,c,u),console.log("triggercellPtr, triggercellComponent, triggercellComponent?.props.isTriggecell, contentlist\n",h,p,null==p?void 0:p.props.isTriggecell,Object.assign({},n))),[n.slice(0,c),n.slice(c)]},gn=function(e){var t=e.index,n=e.cradleInheritedProperties,o=e.cradleInternalProperties,i=e.instanceIdCounterRef,a=e.cacheAPI,l=e.placeholderFrameStyles,s=e.placeholderLinerStyles,c=e.placeholderErrorFrameStyles,u=e.placeholderErrorLinerStyles,d=e.placeholderMessages,f=e.dndDragIconStyles,h=i.current++,p=n.orientation,g=n.cellHeight,v=n.cellWidth,m=n.cellMinHeight,y=n.cellMinWidth,b=n.getItemPack,I=n.placeholder,x=n.scrollerID,S=n.layout,w=n.usePlaceholder,P={key:h,orientation:p,cellHeight:g,cellWidth:v,cellMinHeight:m,cellMinWidth:y,layout:S,index:t,getItemPack:b,listsize:o.virtualListProps.size,placeholder:I,itemID:a.getNewOrExistingItemID(t),instanceID:h,scrollerID:x,isTriggercell:!1,usePlaceholder:w,placeholderFrameStyles:l,placeholderLinerStyles:s,placeholderErrorFrameStyles:c,placeholderErrorLinerStyles:u,placeholderMessages:d,dndDragIconStyles:f,gridstartstyle:null};return r().createElement(sn,Object.assign({},P))};function vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yn=function(e){var t=e.targetAxisReferenceIndex,r=e.baseRowPixelLength,n=e.targetPixelOffsetAxisFromViewport,o=e.cradleInheritedProperties,i=e.cradleInternalProperties,a=o.orientation,l=i.cradleContentProps,s=i.virtualListProps,c=i.paddingProps,u=l.cradleRowcount,d=l.runwayRowcount,f=s.lowindex,h=s.highindex,p=s.crosscount,g=s.rowcount,v=s.baserowblanks,m=s.endrowblanks,y=s.rowshift;t=Math.min(t,h),t=Math.max(t,f);var b=Math.floor(t/p),I=Math.max(y,b-d),x=I+(u-1),S=g-1+y;if(x>S){var w=x-S;I-=w,x-=w}var P=I*p,C=u*p;return x==S&&m&&(C-=m),I==y&&v&&(C-=v),{targetCradleReferenceIndex:P=Math.max(P,f),targetAxisReferenceIndex:t,targetPixelOffsetViewportFromScrollblock:(b-y)*r+("vertical"==a?c.top:c.left)-n,newCradleContentCount:C}},bn=function(e,t,r,n){for(var o=[],i=e.childNodes,a=0,l=i[a];l;){var s="vertical"==t?l.offsetHeight+n.column:l.offsetWidth+n.row;o.push(s),l=i[a+=r]}return o},In=function(e){var t=[],r=0;return e.forEach((function(e){r+=e,t.push(r)})),t};function xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wn=function(e,t,n){var o,i=e.viewportContextRef.current.elementRef.current,a=e.cradleInheritedPropertiesRef.current,l=e.cradleInternalPropertiesRef.current,s=e.handlersRef.current,c=s.cacheAPI,u=s.layoutHandler,d=s.stateHandler,f=s.interruptHandler,h=s.serviceHandler,p=f.shiftinstruction,g=f.triggerViewportReferencePixelPos,v=u.elements,m=u.cradlePositionData,y=a.orientation,b=a.cache,I=a.styles,x=a.placeholderMessages,S=a.layout,w=a.cellHeight,P=a.cellWidth,C=a.scrollerID,O=l.virtualListProps,R=l.cradleContentProps,D=l.paddingProps,E=l.gapProps,T=O.crosscount,A=O.lowindex,M=O.rowshift,L="vertical"==y?i.scrollTop:i.scrollLeft,k=t.cradleModelComponents||[],j=(null===(o=k[0])||void 0===o?void 0:o.props.index)||0,N=function(e){var t,r,n,o,i,a=e.shiftinstruction,l=e.triggerViewportReferencePixelPos,s=e.currentScrollPos,c=e.scrollblockElement,u=e.cradleInheritedProperties,d=e.cradleInternalProperties,f=e.cradleContentProps,h=e.virtualListProps,p=e.cradleContent,g=e.cradleElements,v=g.axisRef.current,m=g.headRef.current,y=g.tailRef.current,b=u.orientation,I=u.cellHeight,x=u.cellWidth,S=u.layout,w=(u.scrollerID,d.paddingProps,d.gapProps),P=p.cradleModelComponents,C=p.tailModelComponents,O=f.cradleRowcount,R=f.viewportRowcount,D=f.runwayRowcount,E=h.crosscount,T=h.rowcount,A=h.lowindex,M=h.baserowblanks,L=h.endrowblanks,k=h.rowshift,j=(null===(t=P[0])||void 0===t?void 0:t.props.index)||0,N=Math.floor(j/E),H=(null===(r=C[0])||void 0===r?void 0:r.props.index)||0,F=Math.floor(H/E),_=T-1+k,B=("vertical"==b?I:x)+("vertical"==b?w.column:w.row),z=0,U=0,W=!1;if("variable"==S){var V=bn("moveaxistailward"==a?y:m,b,E,w);"moveaxisheadward"==a&&V.reverse();var q=In(V);-1!=(n="moveaxistailward"==a?q.findIndex((function(e){return l+e>=0})):q.findIndex((function(e){return l-e<=0})))?z="moveaxistailward"==a?q[n]:-q[n]:(W=0==q.length)?(U=0,o=0):(o=q[U=q.length-1],i=V.at(-1))}else n=-1,U=0,o=0;if(-1==n){if(!W)if("moveaxistailward"==a){do{o+=B,U++}while(l+o<0);z=o}else{do{if(o+=B,F-k-++U==0)break}while(l-o>0);z=-o}n=U-1}var G="moveaxistailward"==a?n+1:-(n+1),X=z;F+G>_&&(G-=1,X-="variable"==S?i:B);var K=("vertical"==b?v.offsetTop:v.offsetLeft)+("vertical"==b?c.offsetTop:c.offsetLeft)-s+X,Y=G,Q=N+Y,Z=F+G;if("moveaxistailward"==a){var J=Q-Math.max(k,Z-D-1);J>0&&(Q-=J,Y-=J);var $=Q+(O-1)-_;$>0&&(Y-=$,Q-=$)}else{if(Q<k){var ee=k-Q;Y+=ee,Q+=ee}"variable"==S&&Z==k&&(K=0);var te=N+(O-1)+Y-(Z+(R-1)+(D-1));te<0&&(Y-=te=Math.max(te,Y),Q-=te)}var re=Math.max(A,Q*E)-j,ne=Math.max(A,Z*E),oe=O*E;Q+O-k>=T&&(oe-=L),Q==k&&(oe-=M);var ie=-re;return{cradleReferenceItemShift:re,newAxisReferenceIndex:ne,axisReferenceItemShift:ne-H,newPixelOffsetAxisFromViewport:K,newCradleContentCount:oe,listStartChangeCount:ie,listEndChangeCount:-ie-(P.length-oe)}}({shiftinstruction:p,triggerViewportReferencePixelPos:g,currentScrollPos:L,scrollblockElement:i.firstChild,cradleInheritedProperties:a,cradleInternalProperties:l,cradleContentProps:R,virtualListProps:O,cradleContent:t,cradleElements:v}),H=N.cradleReferenceItemShift,F=N.newAxisReferenceIndex,_=N.axisReferenceItemShift,B=N.newCradleContentCount,z=N.listStartChangeCount,U=N.listEndChangeCount,W=N.newPixelOffsetAxisFromViewport,V=!(0==_&&0==H),q=v.axisRef.current,G=v.headRef.current;if(f.triggerlinesIntersect.disconnect(),V){var X,K=[];if(z||U){var Y,Q=xn(hn({cacheAPI:c,cradleInheritedProperties:a,cradleInternalProperties:l,cradleContentCount:B,workingContentList:k,listStartChangeCount:z,listEndChangeCount:U,cradleReferenceIndex:j,instanceIdCounterRef:n,styles:I,placeholderMessages:x}),2);if(X=Q[0],K=Q[1],R.size=X.length,R.size){var Z=X[0].props.index,J=Z+R.size-1;Object.assign(R,{lowindex:Z,highindex:J,axisReferenceIndex:F,SOL:O.lowindex==Z,EOL:O.highindex==J,lowrow:Math.floor(Z/T)-M,highrow:Math.floor(J/T)-M}),R.SOL&&!u.SOLSignal&&(u.SOLSignal=!0),R.EOL&&!u.EOLSignal&&(u.EOLSignal=!0)}else Object.assign(R,{lowindex:void 0,highindex:void 0,axisReferenceIndex:void 0,SOL:void 0,EOL:void 0,lowrow:void 0,highrow:void 0});Y=!0===R.SOL&&void 0!==O.baserowblanks&&0!==O.baserowblanks?"".concat(O.baserowblanks+1):"unset";var $=X[0],ee="vertical"==y?{gridColumnStart:Y}:{gridRowStart:Y},te=r().cloneElement($,{gridstartstyle:ee});X[0]=te}else X=k,Object.assign(R,{axisReferenceIndex:F});if(K.length&&"cradle"==b){var re,ne=h.callbacks.deleteListCallback;ne&&(re=function(e){ne(e,{contextType:"deleteList",scrollerID:C,message:"pare cache to cradle"})}),function(e,t,r){var n=t.map((function(e){return e.props.index}));e.deletePortalByIndex(n,r)}(c,K,re)}var oe=xn(pn({contentlist:X,axisReferenceIndex:F,layoutHandler:u}),2),ie=oe[0],ae=oe[1];if(t.cradleModelComponents=X,t.headModelComponents=ie,t.tailModelComponents=ae,h.callbacks.referenceIndexCallback){var le=d.cradleStateRef.current;h.callbacks.referenceIndexCallback(F,{contextType:"referenceIndex",action:"updateCradleContent",cradleState:le,scrollerID:C})}m.targetAxisReferencePosition=F-A,m.targetPixelOffsetAxisFromViewport=W,V&&c.renderPortalLists(),"uniform"==S&&(m.targetPixelOffsetAxisFromViewport=Pn({layout:S,orientation:y,paddingProps:D,gapProps:E,cellHeight:w,cellWidth:P,crosscount:T,axisReferenceIndex:F,pixelOffsetAxisFromViewport:W,currentScrollPos:L,headcontent:ie,axisElement:q,headElement:G,listlowindex:A})),t.headDisplayComponents=t.headModelComponents,t.tailDisplayComponents=t.tailModelComponents}else m.targetPixelOffsetAxisFromViewport="uniform"==S?Pn({layout:S,orientation:y,paddingProps:D,gapProps:E,cellHeight:w,cellWidth:P,crosscount:T,axisReferenceIndex:F,pixelOffsetAxisFromViewport:W,currentScrollPos:L,headcontent:t.headModelComponents,axisElement:q,headElement:G,listlowindex:A}):W},Pn=function(e){e.layout;var t,r,n=e.orientation,o=e.paddingProps,i=e.gapProps,a=e.cellHeight,l=e.cellWidth,s=e.crosscount,c=e.axisReferenceIndex,u=e.pixelOffsetAxisFromViewport,d=e.currentScrollPos,f=e.headcontent,h=e.axisElement,p=e.headElement,g=e.listlowindex,v=Math.ceil((c-g)/s),m=(("vertical"==n?a:l)+("vertical"==n?i.column:i.row))*v+("vertical"==n?o.top:o.left)-u-d;return m&&(u+=m),"vertical"==n?(t=d+u-o.top,h.style.top=t+"px",h.style.left="auto",p.style.padding=f.length?"0px 0px ".concat(i.column,"px 0px"):"0px"):(r=d+u-o.left,h.style.top="auto",h.style.left=r+"px",p.style.padding=f.length?"0px ".concat(i.row,"px 0px 0px"):"0px"),u};function Cn(e){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Cn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Cn(i)?i:String(i)),n)}var o,i}var En=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content={cradleModelComponents:null,headModelComponents:null,tailModelComponents:null,headDisplayComponents:[],tailDisplayComponents:[]},this.instanceIdCounterRef={current:0},this.updateVirtualListRange=function(e){var t,r=n.cradleParameters.handlersRef.current.layoutHandler,o=n.cradleParameters.cradleInternalPropertiesRef.current,i=o.setVirtualListRange,a=o.virtualListProps,l=o.cradleContentProps,s=r.cradlePositionData;if(0==e.length)t=0,s.targetAxisReferencePosition=0,s.targetPixelOffsetAxisFromViewport=0;else{var c=On(e,2),u=c[0],d=c[1];if(a.range.length){var f=u-a.lowindex;s.targetAxisReferencePosition-=f}t=d-u+1}if(0==t){var h=n.content;n.clearCradle(),h.headDisplayComponents=[],h.tailDisplayComponents=[],Object.assign(l,{SOL:void 0,EOL:void 0,highindex:void 0,lowindex:void 0,lowrow:void 0,highrow:void 0,axisReferenceIndex:void 0,size:0})}i(e)},this.setCradleContent=function(e){!function(e,t,n,o){var i=t.viewportContextRef.current,a=t.handlersRef.current,l=t.cradleInheritedPropertiesRef.current,s=t.cradleInternalPropertiesRef.current,c=i.elementRef.current,u=a.cacheAPI,d=a.layoutHandler,f=a.serviceHandler,h=a.scrollHandler,p=d.cradlePositionData,g=p.targetAxisReferencePosition,v=l.orientation,m=l.cellHeight,y=l.cellWidth,b=l.styles,I=l.placeholderMessages,x=l.scrollerID,S=s.virtualListProps,w=s.cradleContentProps,P=s.paddingProps,C=s.gapProps,O=S.lowindex,R=S.size,D=S.crosscount,E=S.rowcount,T=S.rowshift,A="vertical"==v?P.top:P.left,M="vertical"==v?C.column:C.row,L=p.targetPixelOffsetAxisFromViewport,k=Math.min(g,R-1),j=(k=Math.max(k,0))+O;j-=j<0?j%D?D-Math.abs(j%D):0:j%D,["firstrender","firstrenderfromcache","finishreposition","reconfigure","scrollto"].includes(e)&&(L=j==O?A:M);var N,H=("vertical"==v?m:y)+M,F=yn({baseRowPixelLength:H,targetPixelOffsetAxisFromViewport:L,targetAxisReferenceIndex:j,cradleInheritedProperties:l,cradleInternalProperties:s}),_=F.targetCradleReferenceIndex,B=F.targetAxisReferenceIndex,z=F.newCradleContentCount,U=F.targetPixelOffsetViewportFromScrollblock,W=L,V=vn(hn({cacheAPI:u,cradleInheritedProperties:l,cradleInternalProperties:s,cradleContentCount:z,cradleReferenceIndex:_,listStartChangeCount:0,listEndChangeCount:z,workingContentList:[],instanceIdCounterRef:o,styles:b,placeholderMessages:I}),1)[0];if(w.size=V.length,w.size){var q=V[0].props.index,G=q+w.size-1;Object.assign(w,{lowindex:q,highindex:G,axisReferenceIndex:B,SOL:S.lowindex==q,EOL:S.highindex==G,lowrow:Math.floor(q/D)-T,highrow:Math.floor(G/D)-T}),w.SOL&&!d.SOLSignal&&(d.SOLSignal=!0),w.EOL&&!d.EOLSignal&&(d.EOLSignal=!0)}else Object.assign(w,{lowindex:void 0,highindex:void 0,lowrow:void 0,highrow:void 0,axisReferenceIndex:void 0,SOL:void 0,EOL:void 0});N=!0===w.SOL&&void 0!==S.baserowblanks&&0!==S.baserowblanks?"".concat(S.baserowblanks+1):"unset";var X=V[0];if(X){var K;K="vertical"==v?{gridColumnStart:N}:{gridRowStart:N};var Y=r().cloneElement(X,{gridstartstyle:K});V[0]=Y;var Q=vn(pn({contentlist:V,axisReferenceIndex:B,layoutHandler:d}),2),Z=Q[0],J=Q[1];if(n.cradleModelComponents=V,n.headModelComponents=Z,n.tailModelComponents=J,p.targetAxisReferencePosition=B-O,p.targetPixelOffsetAxisFromViewport=W,f.callbacks.referenceIndexCallback){var $=e;f.callbacks.referenceIndexCallback(B,{contextType:"referenceIndex",action:"setCradleContent",cradleState:$,scrollerID:x})}var ee="vertical"==v?P.top+P.bottom:P.left+P.right,te=c.firstChild,re=E*H-M+ee;"pivot"==e&&("vertical"==v?te.style.left=null:te.style.top=null),"vertical"==v?(te.style.top=null,te.style.height=re+"px"):(te.style.left=null,te.style.width=re+"px"),p.trackingBlockScrollPos=U,h.resetScrollData(U);var ne,oe=c.scrollTop,ie=c.scrollLeft;ne="scrollTop"==p.blockScrollProperty?{top:p.trackingBlockScrollPos,left:ie,behavior:"instant"}:{left:p.trackingBlockScrollPos,top:oe,behavior:"instant"},c.scroll(ne);var ae=d.elements,le=ae.axisRef.current,se=ae.headRef.current,ce=U+W;if("vertical"==v){var ue=ce-P.top;le.style.top=ue+"px",le.style.left="auto",se.style.padding=Z.length?"0px 0px ".concat(C.column,"px 0px"):"0px"}else{var de=ce-P.left;le.style.top="auto",le.style.left=de+"px",se.style.padding=Z.length?"0px ".concat(C.row,"px 0px 0px"):"0px"}}}(e,n.cradleParameters,n.content,n.instanceIdCounterRef)},this.updateCradleContent=function(){var e=n.cradleParameters,t=n.content;wn(e,t,n.instanceIdCounterRef)},this.adjustScrollblockForVariability=function(e){!function(e,t){var r,n,o=t.handlersRef.current,i=t.viewportContextRef.current,a=t.cradleInheritedPropertiesRef.current,l=t.cradleInternalPropertiesRef.current,s=o.layoutHandler,c=o.scrollHandler,u=o.interruptHandler,d=s.elements,f=s.cradlePositionData,h=f.targetAxisReferencePosition,p=f.targetPixelOffsetAxisFromViewport,g=i.elementRef.current,v=g.firstChild,m=d.headRef.current,y=d.tailRef.current,b=d.axisRef.current,I=a.orientation,x=a.cellHeight,S=a.cellWidth,w=l.virtualListProps,P=l.paddingProps,C=l.gapProps,O=w.crosscount,R=w.rowcount,D=w.lowindex,E=w.rowshift;c.isScrolling&&r&&(r.disconnect(),r=void 0,clearTimeout(n));var T=h+D,A=Math.ceil(m.childNodes.length/O),M=Math.ceil(y.childNodes.length/O),L=Math.floor(T/O),k=L-A-E,j=R-1+E-(L+(M-1)),N=("vertical"==I?x:S)+("vertical"==I?C.column:C.row),H=j*N+("vertical"==I?y.offsetHeight:y.offsetWidth)+("vertical"==I?P.bottom:P.right),F=(k+A)*N+("vertical"==I?P.top:P.left);u.signals.pauseCradleIntersectionObserver=!0;var _=F+H,B=F-p,z=B+p;"vertical"==I?(b.style.top=z-P.top+"px",v.style.height=_+"px"):(b.style.left=z-P.left+"px",v.style.width=_+"px"),m.style.padding="vertical"==I?A?"0px 0px ".concat(C.column,"px 0px"):"0px":A?"0px ".concat(C.row,"px 0px 0px"):"0px";var U=B-("vertical"==I?g.scrollTop:g.scrollLeft);if("vertical"==I?v.style.top=-U+"px":v.style.left=-U+"px","setcradle"==e&&!j){var W=d.tailRef.current;r=new ResizeObserver((function(){var e=t.handlersRef.current.stateHandler;clearTimeout(n),n=setTimeout((function(){if(clearTimeout(n),e.isMountedRef.current){var o,i=t.viewportContextRef.current.elementRef.current,a=i.firstChild,l=t.cradleInheritedPropertiesRef.current.orientation,s="vertical"==l?a.offsetHeight:a.offsetWidth,c="vertical"==l?a.offsetTop:a.offsetLeft,u="vertical"==l?i.offsetHeight:i.offsetWidth,d=i.scrollTop,f=i.scrollLeft;s+c-("vertical"==l?i.scrollTop:i.scrollLeft)<u&&(c&&("vertical"==l?a.style.top=0:a.style.left=0),o="vertical"==l?{top:s-u,left:f,behavior:"smooth"}:{top:d,left:s-u,behavior:"smooth"},i.scroll(o)),r&&(r.disconnect(),r=null)}}),500)})),r.observe(W)}}(e,n.cradleParameters)},this.guardAgainstRunawayCaching=function(){var e=n.cradleParameters.cradleInheritedPropertiesRef.current,t=e.cacheMax,r=e.MAX_CACHE_OVER_RUN,o=n.cradleParameters.handlersRef.current.cacheAPI,i=n.content.cradleModelComponents;o.guardAgainstRunawayCaching(t,i.length,r)&&n.pareCacheToMax()},this.pareCacheToMax=function(){var e=n.cradleParameters.cradleInheritedPropertiesRef.current,t=e.cache,r=e.scrollerID;if("keepload"==t){var o,i=n.cradleParameters.handlersRef.current,a=i.cacheAPI,l=i.serviceHandler,s=n.getModelIndexList(),c=l.callbacks.deleteListCallback;c&&(o=function(e){c(e,{contextType:"deleteList",scrollerID:r,message:"pare cache to cacheMax"})}),a.pareCacheToMax(e.cacheMax,s,o)&&a.renderPortalLists()}},this.clearCradle=function(){var e=n.content;e.cradleModelComponents=[],e.headModelComponents=[],e.tailModelComponents=[]},this.cradleParameters=t}var t,n,o;return t=e,n=[{key:"getModelIndexList",value:function(){var e=this.content.cradleModelComponents;return e?e.map((function(e){return e.props.index})):[]}},{key:"synchronizeCradleItemIDsToCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.cradleParameters.handlersRef.current.cacheAPI,i=o.indexToItemIDMap,a=this.content.cradleModelComponents,l=this.cradleParameters.cradleInternalPropertiesRef.current.cradleContentProps;if(0!=l.size){var s,c,u=l.lowindex,d=l.highindex;if(t){if(n>d)return;s=n,c=d}else{if(0==e.length)return;s=e[0],c=e.at(-1)}var f=c-s+1,h=s;if(!(h>d)){h<u&&(h=u);for(var p=h-u,g=t?a.length-1:Math.min(a.length-1,p+f-1),v=p;v<=g;v++)m(a[v],v,a)}}function m(t,n,a){var l=t.props.index,s=i.get(l);if(void 0!==s){var c=t.props.itemID;if(-1!=e.indexOf(l)){if(s==c)return;a[n]=r().cloneElement(t,{itemID:s})}else{var u=o.getNewItemID();a[n]=r().cloneElement(t,{itemID:u})}}else{var d=o.getNewItemID();a[n]=r().cloneElement(t,{itemID:d})}}}}],n&&Dn(t.prototype,n),o&&Dn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tn(e){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(e)}function An(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Tn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Tn(i)?i:String(i)),n)}var o,i}var Mn=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.SOLSignal=!1,this.EOLSignal=!1,this.boundaryNotificationsRequired=function(){var e=!1;return(r.SOLSignal||r.EOLSignal)&&(e=!0),e},this.cancelBoundaryNotifications=function(){r.SOLSignal=!1,r.EOLSignal=!1},this.cradlePositionData={trackingBlockScrollPos:null,trackingXBlockScrollPos:null,blockScrollProperty:null,blockXScrollProperty:null,targetAxisReferencePosition:null,targetPixelOffsetAxisFromViewport:null},this.restoreBaseScrollblockConfig=function(){var e=r.cradleParameters.viewportContextRef.current.elementRef.current,t=e.firstChild,n=r.cradleParameters.cradleInheritedPropertiesRef.current,o=n.orientation,i=n.cellHeight,a=n.cellWidth,l=n.layout,s=r.cradleParameters.cradleInternalPropertiesRef.current,c=s.virtualListProps,u=s.paddingProps,d=s.gapProps,f=c.rowcount,h=c.crosscount,p=r.cradleParameters.handlersRef.current,g=p.scrollHandler,v=(p.layoutHandler,"vertical"==o?d.column:d.row),m=("vertical"==o?i:a)+v,y=f*m-v+("vertical"==o?u.top+u.bottom:u.left+u.right);"vertical"==o?(t.style.top=null,t.style.height=y+"px"):(t.style.left=null,t.style.width=y+"px");var b=r.cradlePositionData,I=b.targetAxisReferencePosition,x=Math.ceil(I/h)*m+("vertical"==o?u.top:u.left);if("variable"==l){var S=x-("vertical"==o?e.scrollTop:e.scrollLeft);"vertical"==o?t.style.top=S:t.style.left=S}else{var w,P=e.scrollTop,C=e.scrollLeft;w="scrollTop"==b.blockScrollProperty?{top:b.trackingBlockScrollPos,left:C,behavior:"instant"}:{left:b.trackingBlockScrollPos,top:P,behavior:"instant"},e.scroll(w)}b.trackingBlockScrollPos=x,g.resetScrollData(x)},this.cradleParameters=t;var n=t.cradleInternalPropertiesRef.current.cradleElementsRef.current,o=n.axisRef,i=n.headRef,a=n.tailRef,l=n.triggercellTriggerlineHeadRef,s=n.triggercellTriggerlineTailRef;this.elements={axisRef:o,headRef:i,tailRef:a,triggercellTriggerlineHeadRef:l,triggercellTriggerlineTailRef:s};var c=this.cradleParameters.cradleInheritedPropertiesRef.current,u=(c.startingIndex,c.orientation,this.cradleParameters.cradleInternalPropertiesRef.current),d=u.virtualListProps,f=u.cradlePositionData;d.size,d.lowindex,d.highindex;this.cradlePositionData=f}var t,r,n;return t=e,(r=[{key:"scrollerID",get:function(){return this.cradleParameters.cradleInheritedPropertiesRef.current.scrollerID}},{key:"triggerlineSpan",get:function(){return"vertical"==this.cradleParameters.cradleInheritedPropertiesRef.current.orientation?this.elements.triggercellTriggerlineTailRef.current.offsetTop-this.elements.triggercellTriggerlineHeadRef.current.offsetTop:this.elements.triggercellTriggerlineTailRef.current.offsetLeft-this.elements.triggercellTriggerlineHeadRef.current.offsetLeft}}])&&An(t.prototype,r),n&&An(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ln(e){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(e)}function kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Nn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Ln(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ln(i)?i:String(i)),n)}var o,i}function Hn(e,t,r){return t&&Nn(e.prototype,t),r&&Nn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Fn=Hn((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isHeadCradleInView=!0,this.isTailCradleInView=!0,this.axisTriggerlinesObserverCallback=function(e){var t;if(!r.signals.pauseTriggerlinesObserver){var n=r.cradleParameters.viewportContextRef.current.elementRef.current,o=n.getBoundingClientRect();if(0!=o.width||0!=o.height){var i=r.cradleParameters.handlersRef.current,a=i.contentHandler,l=i.stateHandler,s=i.scrollHandler,c=i.layoutHandler;if(l.isMountedRef.current){var u=s.scrollData;u.previousupdate=u.currentupdate,u.currentupdate=u.current;var d=r.cradleParameters.cradleInheritedPropertiesRef.current,f=r.cradleParameters.cradleInternalPropertiesRef.current,h=d.orientation,p=f.triggerHistoryRef,g=f.virtualListProps,v=g.crosscount,m=g.size,y=g.rowshift,b="vertical"==h?n.scrollTop:n.scrollLeft,I="vertical"==h?n.scrollHeight:n.scrollWidth,x="vertical"==h?n.offsetHeight:n.offsetWidth;if(b>=0||Math.floor(b+x)<=I){var S=function(e){var t,r=e.orientation,n=e.triggerlineEntries,o=e.triggerlineSpan,i=(e.scrollerID,e.isFirstRowTriggerConfig),a=e.viewportBoundingRect,l=e.triggerHistoryRef,s={headOffset:null,tailOffset:null,span:o,isFirstRowTriggerConfig:i},c=n[n.length-1],u=c.target.dataset.type,d=o,f="vertical"==r?Math.trunc(c.rootBounds.y):Math.trunc(c.rootBounds.x),h="vertical"==r?Math.trunc(a.y):Math.trunc(a.x),p=f==h?f:h,g=("vertical"==r?Math.trunc(c.boundingClientRect.y):Math.trunc(c.boundingClientRect.x))-p,v=l.current;return c.referencename=u,"headtrigger"==u?(s.headOffset=g,s.tailOffset=g+d):(s.headOffset=g-d,s.tailOffset=g),ci&&(0==s.headOffset||0==s.tailOffset)||!ci&&(s.headOffset>=-1&&s.headOffset<=1||s.tailOffset>=-1&&s.tailOffset<=1)?v.previousTriggerNameAtBorder?(v.previousTriggerNameAtBorder=null,t="none"):s.headOffset>=-1&&s.headOffset<=1?v.previousTriggerNameAtBorder="headtrigger":v.previousTriggerNameAtBorder="tailtrigger":v.previousTriggerNameAtBorder&&(v.previousTriggerNameAtBorder=null),t?[t,0]:[t=i?s.headOffset<=0?"moveaxistailward":"none":s.tailOffset<=0?"moveaxistailward":s.headOffset>=0?"moveaxisheadward":"none","moveaxistailward"==t?s.tailOffset:s.headOffset]}({scrollerID:d.scrollerID,orientation:h,triggerlineEntries:e,triggerlineSpan:c.triggerlineSpan,isFirstRowTriggerConfig:c.triggercellIsInTail,viewportBoundingRect:o,triggerHistoryRef:p}),w=kn(S,2),P=w[0],C=w[1];if("moveaxistailward"==P){var O=Math.ceil(m/v)-1+y,R=(null===(t=a.content.tailModelComponents[0])||void 0===t?void 0:t.props.index)||0;if(O==Math.ceil(R/v))return}"none"!=P&&(r.shiftinstruction=P,r.triggerViewportReferencePixelPos=C,l.setCradleState("renderupdatedcontent"))}}}}},this.cradleIntersectionObserverCallback=function(e){var t=r.signals,n=r.cradleParameters.handlersRef.current,o=n.stateHandler,i=n.serviceHandler,a=n.scrollHandler,l=n.layoutHandler;if(t.pauseCradleIntersectionObserver)r.isHeadCradleInView=r.isTailCradleInView=!0;else{for(var s=r.cradleParameters.cradleInheritedPropertiesRef.current,c=s.scrollerID,u=s.layout,d=0;d<e.length;d++){var f=e[d];"head"==f.target.dataset.type?r.isHeadCradleInView=f.isIntersecting||0==f.rootBounds.width&&0==f.rootBounds.height:r.isTailCradleInView=f.isIntersecting||0==f.rootBounds.width&&0==f.rootBounds.height}r.signals.repositioningRequired=!r.isHeadCradleInView&&!r.isTailCradleInView;var h=r.cradleParameters.viewportContextRef.current;if(r.signals.repositioningRequired){r.isHeadCradleInView=r.isTailCradleInView=!0;var p=o.cradleStateRef.current;if(["repositioningRender","finishreposition","renderupdatedcontent","finishupdatedcontent","finishviewportresize"].includes(p)||h.isResizing)r.signals.repositioningRequired=!1;else{if(!h.elementRef.current)return void console.log("SYSTEM: viewport element not set in cradleIntersectionObserverCallback (scrollerID)",c,h);var g=i.callbacks.repositioningFlagCallback;g&&g(!0,{contextType:"repositioningFlag",scrollerID:c}),"variable"==u&&(l.restoreBaseScrollblockConfig(),a.calcImpliedRepositioningData("restoreBaseScrollblockConfig")),r.signals.pauseTriggerlinesObserver=!0,o.isMountedRef.current&&o.setCradleState("startreposition")}}}},this.cradleIntersect={observer:null,callback:this.cradleIntersectionObserverCallback,disconnected:!0,connectElements:function(){if(r.cradleIntersect.disconnected){var e=r.cradleIntersect.observer,t=r.cradleParameters.handlersRef.current.layoutHandler.elements;e.observe(t.headRef.current),e.observe(t.tailRef.current),r.cradleIntersect.disconnected=!1}},disconnect:function(){r.cradleIntersect.observer.disconnect(),r.cradleIntersect.disconnected=!0},createObserver:function(){var e=r.cradleParameters.viewportContextRef.current;return r.cradleIntersect.observer=new IntersectionObserver(r.cradleIntersect.callback,{root:e.elementRef.current,threshold:0}),r.cradleIntersect.observer}},this.triggerlinesIntersect={observer:null,callback:this.axisTriggerlinesObserverCallback,disconnected:!0,connectElements:function(){if(r.triggerlinesIntersect.disconnected){var e=r.triggerlinesIntersect.observer,t=r.cradleParameters.handlersRef.current.layoutHandler.elements;t.triggercellTriggerlineHeadRef.current&&t.triggercellTriggerlineTailRef.current&&(e.observe(t.triggercellTriggerlineHeadRef.current),e.observe(t.triggercellTriggerlineTailRef.current)),r.triggerlinesIntersect.disconnected=!1}},disconnect:function(){r.triggerlinesIntersect.observer.disconnect(),r.triggerlinesIntersect.disconnected=!0},createObserver:function(){var e=r.cradleParameters.viewportContextRef.current;return r.triggerlinesIntersect.observer=new IntersectionObserver(r.triggerlinesIntersect.callback,{root:e.elementRef.current,threshold:0}),r.triggerlinesIntersect.observer}},this.signals={repositioningRequired:!1,pauseTriggerlinesObserver:!1,pauseCradleIntersectionObserver:!1,pauseCradleResizeObserver:!1,pauseScrollingEffects:!1},this.pauseInterrupts=function(){var e=r.signals;e.pauseTriggerlinesObserver=!0,e.pauseCradleIntersectionObserver=!0,e.pauseCradleResizeObserver=!0,e.pauseScrollingEffects=!0},this.restoreInterrupts=function(){var e=r.signals;e.pauseTriggerlinesObserver=!1,e.pauseCradleIntersectionObserver=!1,e.pauseCradleResizeObserver=!1,e.pauseScrollingEffects=!1},this.cradleParameters=t}));function _n(e){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(e)}function Bn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==_n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_n(i)?i:String(i)),n)}var o,i}function zn(e,t,r){return t&&Bn(e.prototype,t),r&&Bn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Un=zn((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getCacheIndexMap=function(){var e=r.cradleParameters.handlersRef.current.cacheAPI,t=r.cradleParameters.cradleInheritedPropertiesRef.current.scrollerID;return[e.getCacheIndexMap(),{contextType:"cacheIndexMap",scrollerID:t}]},this.getCacheItemMap=function(){var e=r.cradleParameters.handlersRef.current.cacheAPI,t=r.cradleParameters.cradleInheritedPropertiesRef.current.scrollerID;return[e.getCacheItemMap(),{contextType:"cacheItemMap",scrollerID:t}]},this.getCradleIndexMap=function(){var e=r.cradleParameters.handlersRef.current,t=e.cacheAPI,n=e.contentHandler,o=r.cradleParameters.cradleInheritedPropertiesRef.current.scrollerID,i=n.getModelIndexList();return[t.getCradleIndexMap(i),{contextType:"cradleIndexMap",scrollerID:o}]},this.getPropertiesSnapshot=function(){var e=Object.assign({},r.cradleParameters.scrollerPropertiesRef.current),t=r.cradleParameters.cradleInheritedPropertiesRef.current.scrollerID;return e.virtualListProps=Object.assign({},e.virtualListProps),e.cradleContentProps=Object.assign({},e.cradleContentProps),e.gapProps=Object.assign({},e.gapProps),e.paddingProps=Object.assign({},e.paddingProps),[e,{contextType:"propertiesSnapshot",scrollerID:t}]},this.cradleParameters=t}));function Wn(e){return Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(e)}function Vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Wn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Wn(i)?i:String(i)),n)}var o,i}function Xn(e,t,r){return t&&Gn(e.prototype,t),r&&Gn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Kn=Xn((function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clearCache=function(){n.cradleParameters.handlersRef.current.stateHandler.setCradleState("clearcache")},this.moveIndex=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=n.cradleParameters,i=o.cradleInternalPropertiesRef.current,a=o.cradleInheritedPropertiesRef.current.scrollerID,l=i.virtualListProps,s=l.lowindex;if(l.size){var c=!io(e)||!ao(e,s),u=!io(t)||!ao(t,s),d=!1;if(u||(oo(r)?r=t:d=!ao(r,t)),e=+e,t=+t,r=+r,c||u||d)return console.log("RIGS ERROR moveIndex(toindex, fromindex, fromhighrange)"),c&&console.log(e,lo.moveTo),u&&console.log(t,lo.moveFrom),d&&console.log(r,lo.moveRange),[];e=Math.max(s,e),t=Math.max(s,t);var f=e+((r=Math.max(s,r))-t+1)-1,h=n.cradleParameters.cradleInternalPropertiesRef.current.virtualListProps.size-1;if(f>h){var p=f-h;f=Math.max(s,f-p),e=Math.max(s,e-p)}if(r>h){var g=r-h;r=Math.max(s,r-g),t=Math.max(s,t-g)}if(t==e)return[];var v=n.cradleParameters.handlersRef.current,m=v.cacheAPI,y=v.contentHandler,b=v.stateHandler,I=Vn(m.moveIndex(e,t,r),3),x=I[0],S=I[1],w=I[2];if(x.length){y.synchronizeCradleItemIDsToCache(x);var P=y.content;P.headModelComponents=P.cradleModelComponents.slice(0,P.headModelComponents.length),P.tailModelComponents=P.cradleModelComponents.slice(P.headModelComponents.length),b.setCradleState("applymovechanges")}return[x,S,w,{contextType:"moveIndex",scrollerID:a}]}},this.insertIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=n.cradleParameters,o=r.cradleInheritedPropertiesRef.current.scrollerID,i=r.cradleInternalPropertiesRef.current.virtualListProps,a=i.lowindex,l=i.hidhindex,s=!1,c=!1;if(oo(t)?t=e:c=!ao(t,e),c||(e=+e,t=+t,isNaN(e)&&(s=!0),isNaN(t)&&(c=!0)),s||c||(s=!io(e),c=!io(t)),s||c){var u="";return s&&(u="index $(index}: "+lo.insertFrom),s&&c&&(u+=" | "),c&&(u+="rangehighindex: ".concat(t,": ")+lo.insertRange),[null,{contextType:"insertIndex",error:u,scrollerID:o}]}if(t<a-1){var d=a-t-1;e+=d,t+=d}if(e>l+1){var f=e-l-1;e-=f,t-=f}return[n.insertOrRemoveIndex(e,t,1),{contextType:"insertIndex",scrollerID:o}]},this.removeIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=n.cradleParameters,o=r.cradleInternalPropertiesRef.current,i=r.cradleInheritedPropertiesRef.current.scrollerID,a=o.virtualListProps,l=a.lowindex,s=a.highindex;if(a.size){var c=!1,u=!1;if(oo(t)?t=e:u=!ao(t,e),u||(e=+e,t=+t,isNaN(e)&&(c=!0),isNaN(t)&&(u=!0)),c||u||(c=!io(e),u=!io(t)),c||u||(e<l||t>s)&&(c=!0,u=!0),c||u){var d="";return c&&(d="index $(index}: "+lo.removeFrom),c&&u&&(d+=" | "),u&&(d+="rangehighindex: ".concat(t,": ")+lo.removeRange),[null,{contextType:"removeIndex",error:d,scrollerID:i}]}return[n.insertOrRemoveIndex(e,t,-1),{contextType:"removeIndex",scrollerID:i}]}},this.insertOrRemoveIndex=function(e,t,r){var o=n.cradleParameters,i=o.handlersRef.current,a=i.cacheAPI,l=i.contentHandler,s=i.stateHandler,c=i.serviceHandler,u=o.cradleInternalPropertiesRef.current,d=u.virtualListProps,f=u.cradleContentProps,h=(d.lowindex,d.crosscount),p=d.size,g=d.range,v=f.lowindex,m=f.highindex,y=f.size,b=f.runwayRowcount,I=f.viewportRowcount;if(0==p){if(r>0){n.setListRange([e,t]);for(var x=[],S=e;S<=t;S++)x.push(S);return[[],x,[],[]]}return[[],[],[],[]]}var w=Vn(a.insertOrRemoveCacheIndexes(e,t,r,g),7),P=w[0],C=w[1],O=w[2],R=w[3],D=w[4],E=w[5],T=w[6];if(null===C)return[[],[],[],[]];a.portalPartitionItemsToDeleteList=T;var A=c.callbacks.deleteListCallback;A&&E.length&&A(E,{contextType:"deleteList",message:"delete items from cache by index",scrollerID:o.cradleInheritedPropertiesRef.current.scrollerID});var M,L=C,k=p+L,j=Vn(g,2),N=j[0],H=j[1],F=(0==y?0:m-v+1)<(I+2*b)*h||m>=k-1;if(r<0)M=[N,H+L];else{var _=Math.min(e-N,0);M=[N+_,H+L+_]}if(c.newListRange=M,F)s.setCradleState("channelcradleresetafterinsertremove");else{l.synchronizeCradleItemIDsToCache(O,r,P);var B=l.content,z=a.requestedSet,U=setInterval((function(){z.size||(clearInterval(U),B.headModelComponents=B.cradleModelComponents.slice(0,B.headModelComponents.length),B.tailModelComponents=B.cradleModelComponents.slice(B.headModelComponents.length),s.setCradleState("applyinsertremovechanges"))}),100)}return[O,D,R,E]},this.cradleParameters=t,this.setListRange=r}));function Yn(e){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yn(e)}function Qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Yn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Yn(i)?i:String(i)),n)}var o,i}function $n(e,t,r){return t&&Jn(e.prototype,t),r&&Jn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var eo=$n((function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reload=function(){var e=n.cradleParameters.handlersRef.current.stateHandler;n.cradleParameters.handlersRef.current.interruptHandler.pauseInterrupts(),e.setCradleState("reload")},this.scrollToIndex=function(e){var t=n.cradleParameters,r=t.cradleInternalPropertiesRef.current.virtualListProps,o=r.lowindex;if(r.size){var i=!io(e);if(i||ao(e,o)||(e=o),e=+e,i)console.log("RIGS ERROR scrollToIndex(index)):",e,lo.scrollToIndex);else{var a=t.handlersRef.current,l=a.interruptHandler,s=a.layoutHandler,c=a.stateHandler;l.signals.pauseScrollingEffects=!0,s.cradlePositionData.targetAxisReferencePosition=e-o,c.setCradleState("scrollto")}}},this.scrollToPixel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth";if(["smooth","instant","auto"].includes(t)||(t="smooth"),io(e)&&ao(e,0)){e=+e;var r,o,i=n.cradleParameters,a=i.viewportContextRef.current.elementRef.current,l=a.firstChild,s=i.cradleInheritedPropertiesRef.current.orientation,c="vertical"==s?l.offsetHeight:l.offsetWidth,u="vertical"==s?a.offsetHeight:a.offsetWidth,d=Math.max(Math.min(e,c-u),0);"vertical"==s?(r=d,o=a.scrollLeft):(o=d,r=a.scrollTop);var f={top:r,left:o,behavior:t};a.scroll(f)}},this.scrollByPixel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth";if(["smooth","instant","auto"].includes(t)||(t="smooth"),io(e)&&0!=(e=+e)){var r,o,i,a,l=n.cradleParameters,s=l.viewportContextRef.current.elementRef.current,c=s.firstChild,u=l.cradleInheritedPropertiesRef.current.orientation,d="vertical"==u?c.offsetHeight:c.offsetWidth,f="vertical"==u?s.offsetHeight:s.offsetWidth,h="vertical"==u?s.scrollTop:s.scrollLeft;e>0?(o=d-f,r=e-Math.max(e+h-o,0)):r=e-Math.min(e+h,0),"vertical"==u?(i=r,a=0):(a=r,i=0);var p={top:i,left:a,behavior:t};s.scrollBy(p)}},this.setListRange=function(e){var t=!Array.isArray(e);if(!t&&!(t=!(0==e.length||2==e.length))&&2==e.length){var r=Qn(e,2),o=r[0],i=r[1];i=+i,(t=!io(o=+o)||!io(i)||!ao(i,o))||(e=[o,i])}if(t)console.log("RIGS ERROR setListRange(newlistrange)",e,lo.setListRange);else{var a,l=n.cradleParameters.handlersRef.current,s=l.cacheAPI,c=l.contentHandler,u=l.stateHandler,d=n.callbacks.deleteListCallback,f=n.cradleParameters.cradleInternalPropertiesRef.current.virtualListProps.range,h=n.cradleParameters.cradleInternalPropertiesRef.current.scrollerID,p=n.cradleParameters.cradleInheritedPropertiesRef.current.cache;d&&(a=function(e){d(e,{contextType:"deleteList",scrollerID:h,message:"change list range intervention"})}),c.updateVirtualListRange(e),s.changeCacheListRange(e,a),s.renderPortalLists(),"preload"==p&&2==e.length&&(e[0]<f[0]||e[1]>f[1])&&u.setCradleState("startpreload")}},this.prependIndexCount=function(e){if(!io(e=+e)||!ao(e,0))console.log("RIGS ERROR, prependIndexCount must be an integer >= 0");else{var t,r=n.cradleParameters.cradleInternalPropertiesRef.current.virtualListProps,o=Qn(r.range,2),i=o[0],a=o[1];t=r.size?[i-e,a]:[1-e,0],n.setListRange(t)}},this.appendIndexCount=function(e){if(!io(e=+e)||!ao(e,0))console.log("RIGS ERROR, appendIndexCount must be an integer >= 0");else{var t,r=n.cradleParameters.cradleInternalPropertiesRef.current.virtualListProps,o=Qn(r.range,2),i=o[0],a=o[1];t=r.size?[i,a+e]:[0,e-1],n.setListRange(t)}},this.cradleParameters=t,this.callbacks=r}));function to(e){return to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},to(e)}function ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==to(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==to(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===to(i)?i:String(i)),n)}var o,i}function no(e,t,r){return t&&ro(e.prototype,t),r&&ro(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var oo=function(e){return""===(null!=e?e:"")},io=function(e){var t=+e;return Number.isInteger(t)},ao=function(e,t){return!(!io(e)||!io(t))&&+e>=+t},lo={scrollToIndex:"integer: required, greater than or equal to low index",setListRange:"array[lowindex,highindex]: required, both integers, highindex greater than or equal to lowindex",insertFrom:"insertFrom - integer: required",insertRange:'insertRange - blank, or integer greater than or equal to the "from" index',removeFrom:"removeFrom - integer: required, greater than or equal to list lowindex",removeRange:'removeRange - blank, or integer greater than or equal to the "from" index; equal to or lower than list highindex',moveFrom:"moveFrom - integer: required, greater than or equal to low index",moveRange:'moveRange - blank, or integer greater than or equal to the "from" index',moveTo:"moveTo - integer: required, greater than or equal to low index"},so=no((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.triggerBoundaryCallbacks=function(e){var t=r.cradleParameters,n=r.callbacks,o=t.cradleInternalPropertiesRef.current,i=t.cradleInheritedPropertiesRef.current,a=t.handlersRef.current,l=a.layoutHandler,s=a.serviceHandler,c=o.virtualListProps,u=i.getExpansionCount;if(l.boundaryNotificationsRequired()){if(n.boundaryCallback&&(l.SOLSignal&&n.boundaryCallback("SOL",c.lowindex,{contextType:"boundary",scrollerID:e}),l.EOLSignal&&n.boundaryCallback("EOL",c.highindex,{contextType:"boundary",scrollerID:e})),u){if(l.SOLSignal){var d=u("SOL",c.lowindex);d=+d,!isNaN(d)&&d>0&&Number.isInteger(d)&&s.prependIndexCount(d)}if(l.EOLSignal){var f=u("EOL",c.highindex);f=+f,!isNaN(f)&&f>0&&Number.isInteger(f)&&s.appendIndexCount(f)}}l.cancelBoundaryNotifications()}},this.reload=function(){r.servicegeneral.reload()},this.scrollToIndex=function(e){r.servicegeneral.scrollToIndex(e)},this.scrollToPixel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth";r.servicegeneral.scrollToPixel(e,t)},this.scrollByPixel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth";r.servicegeneral.scrollByPixel(e,t)},this.setListRange=function(e){r.servicegeneral.setListRange(e)},this.prependIndexCount=function(e){r.servicegeneral.prependIndexCount(e)},this.appendIndexCount=function(e){r.servicegeneral.appendIndexCount(e)},this.getCacheIndexMap=function(){return r.snapshots.getCacheIndexMap()},this.getCacheItemMap=function(){return r.snapshots.getCacheItemMap()},this.getCradleIndexMap=function(){return r.snapshots.getCradleIndexMap()},this.getPropertiesSnapshot=function(){return r.snapshots.getPropertiesSnapshot()},this.clearCache=function(){r.servicecache.clearCache()},this.moveIndex=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r.servicecache.moveIndex(e,t,n)},this.insertIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.servicecache.insertIndex(e,t)},this.removeIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.servicecache.removeIndex(e,t)},this.cradleParameters=t;var n=t.externalCallbacksRef.current,o={referenceIndexCallback:n.referenceIndexCallback,preloadIndexCallback:n.preloadIndexCallback,deleteListCallback:n.deleteListCallback,changeListRangeCallback:n.changeListRangeCallback,itemExceptionCallback:n.itemExceptionCallback,repositioningFlagCallback:n.repositioningFlagCallback,repositioningIndexCallback:n.repositioningIndexCallback,boundaryCallback:n.boundaryCallback};this.callbacks=o,this.snapshots=new Un(t),this.servicegeneral=new eo(t,this.callbacks),this.servicecache=new Kn(t,this.setListRange)}));function co(e){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},co(e)}function uo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==co(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==co(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===co(i)?i:String(i)),n)}var o,i}function fo(e,t,r){return t&&uo(e.prototype,t),r&&uo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var ho=fo((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getCradleStyles=function(e){var t=e.orientation,n=e.cellHeight,o=e.cellWidth,i=e.gapProps,a=e.crosscount,l=e.userstyles,s=e.triggerlineOffset,c=e.layout,u=r.getBaseHeadStyles(i,t,l.cradle),d=r.getBaseTailStyles(i,t,l.cradle),f=r.getAxisStyles(i,t),h=r.getTriggercellTriggerlineHeadStyles(t,n,o,s,i),p=r.getTriggercellTriggerlineTailStyles(t,n,o,s,i);return u.gap=d.gap=i.CSS,"vertical"==t?(d.padding="0px",u.width=d.width="100%",u.height=d.height="auto",u.gridTemplateRows=d.gridTemplateRows=null,u.gridTemplateColumns=d.gridTemplateColumns="repeat(".concat(a,", minmax(").concat(o,"px, 1fr))"),u.gridAutoFlow=d.gridAutoFlow="row",u.gridAutoRows=d.gridAutoRows="uniform"==c?null:"max-content",u.gridAutoColumns=d.gridAutoColumns=null):(d.padding="0px",u.width=d.width="auto",u.height=d.height="100%",u.gridTemplateRows=d.gridTemplateRows="repeat(".concat(a,", minmax(").concat(n,"px, 1fr))"),u.gridTemplateColumns=d.gridTemplateColumns=null,u.gridAutoFlow=d.gridAutoFlow="column",u.gridAutoRows=d.gridAutoRows=null,u.gridAutoColumns=d.gridAutoColumns="uniform"==c?null:"max-content"),[u,d,f,{zIndex:1,position:"absolute",width:"100%",height:"100%",boxShadow:"0 0 5px 3px red"},h,p]},this.getBaseHeadStyles=function(e,t,r){var n,o,i,a;return"vertical"==t?(n=0,o=null,a=null,i=null):(n=null,o=null,a=0,i=null),Object.assign(Object.assign({},r),{position:"absolute",display:"grid",gridGap:e.CSS,boxSizing:"border-box",bottom:n,left:o,right:a,top:i})},this.getBaseTailStyles=function(e,t,r){var n,o,i,a;return"vertical"==t?(n=null,o=null,a=null,i=0):(n=null,o=0,a=null,i=null),Object.assign(Object.assign({},r),{position:"absolute",display:"grid",gridGap:e.CSS,boxSizing:"border-box",top:i,left:o,right:a,bottom:n})},this.getAxisStyles=function(e,t){var r,n,o,i;return"vertical"==t?(r=0,n="auto",o="100%",i=0):(r="auto",n=0,o=0,i="100%"),{position:"relative",top:r,left:n,width:o,height:i}},this.getTriggercellTriggerlineHeadStyles=function(e,t,r,n,o){var i,a,l,s,c,u;return"vertical"==e?(i="100%",a=0,l=n+"px",s="0px",c=null,u="0px"):(i=0,a="100%",l="0px",s=null,c="0px",u=n+"px"),{position:"absolute",width:i,height:a,top:l,right:s,bottom:c,left:u}},this.getTriggercellTriggerlineTailStyles=function(e,t,r,n,o){var i,a,l,s,c,u;return"vertical"==e?(i="100%",a=0,l=null,s="0px",c=-(n+o.column)+"px",u="0px"):(i=0,a="100%",l="0px",s=-(n+o.row)+"px",c="0px",u=null),{position:"absolute",width:i,height:a,top:l,right:s,bottom:c,left:u}},this.cradleParameters=t}));function po(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return go(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return go(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function go(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const vo=function(e){var n=(0,t.useContext)(hi),o=(0,t.useContext)(fi),i=(0,t.useRef)(null);if(o.installed&&n.dndOptions.enabled)return r().createElement(Jt,Object.assign({},e));var a=Object.assign(Object.assign({},e),{handlerListRef:i});return r().createElement(yo,Object.assign({},a))};var mo=r().createContext(null),yo=function(e){var n,o=e.gridSpecs,i=e.paddingProps,a=e.gapProps,l=e.runwaySize,s=e.virtualListSpecs,c=e.setVirtualListRange,u=e.startingIndex,d=e.getItemPack,f=e.getExpansionCount,h=e.placeholder,p=e.placeholderMessages,g=e.userCallbacks,v=e.styles,m=e.triggerlineOffset,y=e.cache,b=e.cacheMax,I=e.scrollerID,x=e.cacheAPI,S=e.usePlaceholder,w=e.showAxis,P=e.ONAFTERSCROLL_TIMEOUT,C=e.IDLECALLBACK_TIMEOUT,O=e.MAX_CACHE_OVER_RUN,R=e.scrollerContext,D=e.handlerListRef,E=e.cradlePositionData,T=e.scrollerProfile,A=s.size,M=s.lowindex,L=s.highindex,k=o.orientation,j=o.cellHeight,N=o.cellWidth,H=o.cellMinHeight,F=o.cellMinWidth,_=o.layout,B=(0,t.useContext)(Ut),z=(0,t.useContext)(fi),U=(0,t.useContext)(hi),W=(0,t.useRef)(null);W.current=B;var V,q,G=(0,t.useRef)(!0),X=(0,t.useRef)(!1),K=(0,t.useRef)(!1),Y=(0,t.useRef)(!1),Q=(0,t.useRef)({previousTriggerNameAtBorder:null}),Z=(V={viewportElement:B.elementRef.current},{width:(q=V.viewportElement).offsetWidth,height:q.offsetHeight}),J=Z.height,$=Z.width,ee=0==$&&0==J,te=ee!=X.current;te&&(K.current=X.current,X.current=ee);var re=po((0,t.useState)("setup"),2),ne=re[0],oe=re[1],ie=(0,t.useRef)(null);ie.current=ne;var ae=function(e){var r=e.orientation,n=e.gapProps,o=e.paddingProps,i=e.cellWidth,a=e.cellHeight,l=e.viewportheight,s=e.viewportwidth,c=e.isCachedRef;return(0,t.useMemo)((function(){if(c.current)return 0;var e="vertical"==r?s:l,t="vertical"==r?o.left+o.right:o.top+o.bottom,u="vertical"==r?n.column:n.row,d=e-t+u,f=("vertical"==r?i:a)+u,h=Math.min(f,d);return Math.floor(d/h)}),[r,n,o,i,a,l,s])}({orientation:k,gapProps:a,paddingProps:i,cellWidth:N,cellHeight:j,viewportheight:J,viewportwidth:$,isCachedRef:X}),le=function(e){var r=e.crosscount,n=e.listsize,o=e.lowindex,i=e.highindex,a=(0,t.useMemo)((function(){if(0==n)return[void 0,void 0];var e=i<0?-1:1,t=Math.abs(o)%r,a=(Math.abs(i)+e)%r;return o<0&&(t=0==t?0:r-t),i>=0&&(a=0==a?0:r-a),[t,a]}),[r,n,o,i]),l=$t(a,2);return[l[0],l[1]]}({crosscount:ae,listsize:A,lowindex:M,highindex:L}),se=po(le,2),ce=se[0],ue=se[1],de=function(e){var r=e.orientation,n=e.gapProps,o=e.cellWidth,i=e.cellHeight,a=e.cellMinWidth,l=e.cellMinHeight,s=e.viewportheight,c=e.viewportwidth,u=e.listsize,d=e.baserowblanks,f=e.endrowblanks,h=e.runwaySize,p=e.crosscount,g=e.layout,v=(0,t.useMemo)((function(){var e,t="vertical"==r?s:c,v="vertical"==r?n.column:n.row;e="uniform"==g?"vertical"==r?i:o:"vertical"==r?l:a,e+=v;var m,y=Math.ceil(t/e),b=0==u?0:Math.ceil((u+d+f)/p),I=y+2*h,x=Math.min(b,I);if(x==I)m=h;else{var S=I-x;m=h-Math.floor(S/2),m=Math.max(0,m)}var w=x*p;return w>u&&(w=u,x=Math.ceil((w+d+f)/p)),[x,y,b,m,g]}),[r,n,o,i,a,l,s,c,u,d,f,h,p,g]),m=$t(v,4);return[m[0],m[1],m[2],m[3]]}({orientation:k,cellWidth:N,cellHeight:j,cellMinWidth:F,cellMinHeight:H,viewportheight:J,viewportwidth:$,listsize:A,baserowblanks:ce,endrowblanks:ue,runwaySize:l,crosscount:ae,gapProps:a,layout:_}),fe=po(de,4),he=fe[0],pe=fe[1],ge=fe[2],ve=fe[3],me=function(e){var r=e.crosscount,n=e.lowindex,o=e.listsize;return(0,t.useMemo)((function(){return 0==o?void 0:Math.floor(n/r)}),[r,n,o])}({crosscount:ae,lowindex:M,listsize:A}),ye=Object.assign(Object.assign({},s),{baserowblanks:ce,endrowblanks:ue,crosscount:ae,rowcount:ge,rowshift:me}),be=(0,t.useRef)({cradleRowcount:he,viewportRowcount:pe,runwayRowcount:ve,SOL:void 0,EOL:void 0,lowindex:void 0,highindex:void 0,lowrow:void 0,highrow:void 0,size:0}),Ie=be.current;Object.assign(Ie,{cradleRowcount:he,viewportRowcount:pe,runwayRowcount:ve});var xe=(0,t.useRef)({referenceIndexCallback:null==g?void 0:g.referenceIndexCallback,repositioningFlagCallback:null==g?void 0:g.repositioningFlagCallback,repositioningIndexCallback:null==g?void 0:g.repositioningIndexCallback,preloadIndexCallback:null==g?void 0:g.preloadIndexCallback,deleteListCallback:null==g?void 0:g.deleteListCallback,changeListRangeCallback:null==g?void 0:g.changeListRangeCallback,itemExceptionCallback:null==g?void 0:g.itemExceptionCallback,boundaryCallback:null==g?void 0:g.boundaryCallback}),Se=(0,t.useRef)(null),we=(0,t.useRef)(null),Pe=(0,t.useRef)(null),Ce=(0,t.useRef)(null),Oe=(0,t.useRef)(null),Re=(0,t.useRef)({headRef:Se,tailRef:we,axisRef:Pe,triggercellTriggerlineHeadRef:Ce,triggercellTriggerlineTailRef:Oe}),De=(0,t.useRef)(null);De.current={orientation:k,layout:_,cellHeight:j,cellWidth:N,cellMinHeight:H,cellMinWidth:F,cache:y,cacheMax:b,startingIndex:u,runwaySize:l,getItemPack:d,getExpansionCount:f,placeholder:h,placeholderMessages:p,usePlaceholder:S,triggerlineOffset:m,scrollerID:I,userCallbacks:g,styles:v,cacheAPI:x,ONAFTERSCROLL_TIMEOUT:P,MAX_CACHE_OVER_RUN:O,scrollerContext:R};var Ee=(0,t.useRef)(null);Ee.current={cradlePositionData:E,virtualListProps:ye,setVirtualListRange:c,cradleContentProps:be.current,paddingProps:i,gapProps:a,isMountedRef:G,cradleElementsRef:Re,isCachedRef:X,wasCachedRef:K,triggerHistoryRef:Q,cradleStateRef:ie,setCradleState:oe};var Te=(0,t.useRef)(null);Te.current={orientation:k,gapProps:a,paddingProps:i,layout:_,cellHeight:j,cellWidth:N,cellMinHeight:H,cellMinWidth:F,virtualListProps:ye,cradleContentProps:Ie,cache:y,dndInstalled:z.installed,dndEnabled:null===(n=U.dndOptions)||void 0===n?void 0:n.enabled,cacheMax:b,startingIndex:u,scrollerID:I,scrollerProfile:T};var Ae=(0,t.useRef)(null),Me={handlersRef:Ae,viewportContextRef:W,cradleInheritedPropertiesRef:De,cradleInternalPropertiesRef:Ee,scrollerPropertiesRef:Te,externalCallbacksRef:xe};(0,t.useRef)(null).current=Me,Ae.current||(Ae.current=function(e){var t=function(t){return new t(e)},r=e.cradleInheritedPropertiesRef.current.cacheAPI;return r.cradleParameters=e,{cacheAPI:r,interruptHandler:t(Fn),scrollHandler:t(or),stateHandler:t(cr),contentHandler:t(En),layoutHandler:t(Mn),serviceHandler:t(so),stylesHandler:t(ho)}}(Me));var Le=Ae.current,ke=Le.interruptHandler,je=Le.scrollHandler,Ne=Le.stateHandler,He=Le.contentHandler,Fe=Le.layoutHandler,_e=Le.serviceHandler,Be=Le.stylesHandler;D.current=Ae.current,te&&!X.current&&function(e){var t,r=e.layoutHandler,n=e.viewportElement,o=r.cradlePositionData,i=o.trackingBlockScrollPos,a=o.trackingXBlockScrollPos;null!==i&&(t="scrollTop"==o.blockScrollProperty?{top:i,left:a,behavior:"instant"}:{left:i,top:a,behavior:"instant"},n.scroll(t))}({viewportElement:B.elementRef.current,layoutHandler:Fe}),function(e){var r=e.isCachedRef,n=e.wasCachedRef,o=e.hasBeenRenderedRef,i=e.cradleState,a=e.setCradleState;(0,t.useLayoutEffect)((function(){"setup"!=i&&(r.current&&!n.current?a("cached"):!r.current&&n.current&&(n.current=!1,o.current?a("rerenderfromcache"):a("firstrenderfromcache")))}),[r.current,n.current,i])}({isCachedRef:X,wasCachedRef:K,hasBeenRenderedRef:Y,cradleState:ne,setCradleState:oe}),(0,t.useEffect)((function(){return G.current=!0,function(){G.current=!1}}),[]),(0,t.useEffect)((function(){z.installed&&Object.assign(U,{cacheAPI:x,stateHandler:Ne,serviceHandler:_e,cradleParameters:Me})}),[]),function(e){var r=e.functionsCallback,n=e.serviceHandler;(0,t.useEffect)((function(){if(r){var e=n.scrollToIndex,t=n.scrollToPixel,o=n.scrollByPixel,i=n.reload,a=n.setListRange,l=n.prependIndexCount,s=n.appendIndexCount,c=n.clearCache,u=n.getCacheIndexMap,d=n.getCacheItemMap,f=n.getCradleIndexMap,h=n.getPropertiesSnapshot,p=n.moveIndex,g=n.insertIndex,v=n.removeIndex;r({scrollToIndex:e,scrollToPixel:t,scrollByPixel:o,reload:i,setListRange:a,prependIndexCount:l,appendIndexCount:s,clearCache:c,getCacheIndexMap:u,getCacheItemMap:d,getCradleIndexMap:f,getPropertiesSnapshot:h,moveIndex:p,insertIndex:g,removeIndex:v})}}),[])}({functionsCallback:g.functionsCallback,serviceHandler:_e}),function(e){var r=e.viewportElement,n=e.scrollHandler;(0,t.useEffect)((function(){return r.addEventListener("scroll",n.onScroll),function(){r&&r.removeEventListener("scroll",n.onScroll)}}),[])}({viewportElement:W.current.elementRef.current,scrollHandler:je}),function(e){var r=e.interruptHandler;(0,t.useEffect)((function(){var e=r.cradleIntersect,t=r.triggerlinesIntersect,n=e.createObserver();e.connectElements();var o=t.createObserver();return function(){n.disconnect(),o.disconnect()}}),[])}({interruptHandler:ke}),function(e){var r=e.cradleStateRef,n=e.cache,o=e.cacheMax,i=e.contentHandler,a=e.serviceHandler,l=e.cacheAPI,s=e.setCradleState,c=e.scrollerID;(0,t.useEffect)((function(){if("preload"!=n){if("setup"!=r.current)switch(n){case"keepload":var e,t=i.getModelIndexList(),u=a.callbacks.deleteListCallback;u&&(e=function(e){u(e,{contextType:"deleteList",scrollerID:c,message:"pare cache to cacheMax"})}),l.pareCacheToMax(o,t,e)&&l.renderPortalLists(),s("changecaching");break;case"cradle":var d,f=i.getModelIndexList(),h=a.callbacks.deleteListCallback;h&&(d=function(e){h(e,{contextType:"deleteList",scrollerID:c,message:"match cache to cradle"})}),l.matchCacheToCradle(f,d)&&l.renderPortalLists(),s("changecaching")}}else s("startpreload")}),[n,o])}({cache:y,cacheMax:b,cradleStateRef:ie,contentHandler:He,serviceHandler:_e,cacheAPI:x,setCradleState:oe,scrollerID:I}),function(e){var r=e.cradleStateRef,n=e.isCachedRef,o=e.wasCachedRef,i=e.isResizing,a=e.interruptHandler,l=e.setCradleState;(0,t.useEffect)((function(){"setup"!=r.current&&(n.current||o.current||(i&&"viewportresizing"!=r.current&&(a.pauseInterrupts(),l("viewportresizing")),i||"viewportresizing"!=r.current||l("finishviewportresize")))}),[i])}({isResizing:W.current.isResizing,cradleStateRef:ie,isCachedRef:X,wasCachedRef:K,interruptHandler:ke,setCradleState:oe}),function(e){var r=e.cellHeight,n=e.cellWidth,o=e.gapProps,i=e.paddingProps,a=e.triggerlineOffset,l=e.layout,s=e.runwaySize,c=e.cradleStateRef,u=e.isCachedRef,d=e.interruptHandler,f=e.setCradleState;(0,t.useEffect)((function(){"setup"!=c.current&&(u.current||(d.pauseInterrupts(),f("reconfigure")))}),[r,n,o,i,a,l,s])}({cellHeight:j,cellWidth:N,gapProps:a,paddingProps:i,triggerlineOffset:m,layout:_,runwaySize:l,cradleStateRef:ie,isCachedRef:X,interruptHandler:ke,setCradleState:oe}),function(e){var r=e.lowindex,n=e.highindex,o=e.cradleStateRef,i=e.isCachedRef,a=e.interruptHandler,l=e.setCradleState;(0,t.useEffect)((function(){"setup"!=o.current&&(i.current||(a.pauseInterrupts(),l("reconfigureforlistrange")))}),[r,n])}({lowindex:M,highindex:L,cradleStateRef:ie,isCachedRef:X,interruptHandler:ke,setCradleState:oe}),function(e){var r=e.getItemPack,n=e.cradleStateRef,o=e.interruptHandler,i=e.setCradleState;(0,t.useEffect)((function(){"setup"!=n.current&&(o.pauseInterrupts(),i("reload"))}),[r])}({getItemPack:d,cradleStateRef:ie,interruptHandler:ke,setCradleState:oe}),function(e){var r=e.orientation,n=e.layout,o=e.gapProps,i=e.isCachedRef,a=e.hasBeenRenderedRef,l=e.cradleInheritedPropertiesRef,s=e.cradleStateRef,c=e.layoutHandler,u=e.interruptHandler,d=e.setCradleState;(0,t.useEffect)((function(){if(c.cradlePositionData.blockScrollProperty="vertical"==r?"scrollTop":"scrollLeft",c.cradlePositionData.blockXScrollProperty="horizontal"==r?"scrollTop":"scrollLeft","setup"==s.current)return c.cradlePositionData.trackingBlockScrollPos=0,void(c.cradlePositionData.trackingXBlockScrollPos=0);if(u.pauseInterrupts(),i.current)a.current=!1;else{var e=c.cradlePositionData,t="vertical"==r?o.column:o.row,f="vertical"==r?o.row:o.column;if("uniform"==n){var h=l.current,p=h.cellWidth,g=h.cellHeight,v=(h.gapProps,("vertical"==r?p:g)+f),m=c.cradlePositionData.targetPixelOffsetAxisFromViewport/v*(("vertical"==r?g:p)+t);e.targetPixelOffsetAxisFromViewport=Math.round(m)}else e.targetPixelOffsetAxisFromViewport=f;d("pivot")}}),[r,n])}({orientation:k,layout:_,gapProps:a,isCachedRef:X,hasBeenRenderedRef:Y,cradleInheritedPropertiesRef:De,cradleStateRef:ie,layoutHandler:Fe,interruptHandler:ke,setCradleState:oe});var ze=function(e){var r=e.orientation,n=e.cellHeight,o=e.cellWidth,i=e.cellMinHeight,a=e.cellMinWidth,l=e.gapProps,s=e.viewportheight,c=e.viewportwidth,u=e.crosscount,d=e.styles,f=e.triggerlineOffset,h=e.layout,p=e.stylesHandler,g=$t((0,t.useMemo)((function(){return p.getCradleStyles({orientation:r,cellHeight:n,cellWidth:o,cellMinHeight:i,cellMinWidth:a,gapProps:l,viewportheight:s,viewportwidth:c,crosscount:u,userstyles:d,triggerlineOffset:f,layout:h})}),[r,n,o,i,a,l,s,c,u,d,f,h]),6);return[g[0],g[1],g[2],g[3],g[4],g[5]]}({orientation:k,cellHeight:j,cellWidth:N,cellMinHeight:H,cellMinWidth:F,gapProps:a,viewportheight:J,viewportwidth:$,crosscount:ae,styles:v,triggerlineOffset:m,layout:_,stylesHandler:Be}),Ue=po(ze,6),We=Ue[0],Ve=Ue[1],qe=Ue[2],Ge=Ue[3],Xe=Ue[4],Ke=Ue[5];!function(e){var r=e.cradleState,n=e.cradleParameters,o=e.isCachedRef,i=e.wasCachedRef,a=e.hasBeenRenderedRef,l=e.scrollerID,s=(0,t.useContext)(fi),c=(0,t.useContext)(hi);(0,t.useLayoutEffect)((function(){var e=n.cradleInheritedPropertiesRef,t=n.handlersRef,u=n.cradleInternalPropertiesRef,d=n.viewportContextRef,f=t.current,h=f.stateHandler,p=f.contentHandler,g=f.serviceHandler,v=f.cacheAPI,m=f.interruptHandler,y=f.scrollHandler,b=f.layoutHandler,I=h.setCradleState,x=p.content;switch(r){case"setup":"preload"!=e.current.cache&&(o.current?I("cached"):I("firstrender"));break;case"viewportresizing":break;case"startpreload":var S=s.installed?c.dndOptions.accept:null;v.preload((function(){var t,r=p.getModelIndexList(),n=g.callbacks.deleteListCallback;n&&(t=function(e){n(e,{contextType:"deleteList",scrollerID:l,message:"pare cache to cacheMax"})});var i=e.current.cacheMax;v.pareCacheToMax(i,r,t)&&v.renderPortalLists(),o.current?I("cached"):I("finishpreload")}),S);break;case"cached":i.current||o.current||(a.current?I("rerenderfromcache"):I("firstrenderfromcache"));break;case"startreposition":var w=m.signals;if(w.pauseTriggerlinesObserver=!0,w.pauseCradleIntersectionObserver=!0,w.repositioningRequired=!1,y.isScrolling){var P=u.current.virtualListProps,C=P.lowindex,O=P.size;d.current.scrollTrackerAPIRef.current.startReposition(b.cradlePositionData.targetAxisReferencePosition,C,O),I("repositioningRender")}else I("finishreposition");break;case"firstrender":case"firstrenderfromcache":case"rerenderfromcache":case"scrollto":case"changecaching":case"finishpreload":case"finishreposition":case"finishviewportresize":case"pivot":case"reconfigure":case"reconfigureforlistrange":case"reload":if(!h.isMountedRef.current)return;if(o.current){I("cached");break}x.headModelComponents=[],x.tailModelComponents=[];var R=e.current.layout;if(m.triggerlinesIntersect.disconnect(),m.cradleIntersect.disconnect(),"variable"==R&&"finishreposition"!=r&&b.restoreBaseScrollblockConfig(),"reload"==r&&v.clearCache(),"finishreposition"==r&&(d.current.scrollTrackerAPIRef.current.finishReposition(),y.calcImpliedRepositioningData("finishreposition")),u.current.virtualListProps.size&&p.setCradleContent(r),"finishpreload"!=r&&(a.current=!0),"cradle"==e.current.cache){var D,E=p.getModelIndexList(),T=g.callbacks.deleteListCallback;T&&(D=function(e){T(e,{contextType:"deleteList",scrollerID:l,message:"match cache to cradle"})}),v.matchCacheToCradle(E,D)&&v.renderPortalLists()}x.headDisplayComponents=x.headModelComponents,x.tailDisplayComponents=x.tailModelComponents,I("uniform"==R?"preparerender":"refreshDOMsetforvariability");break;case"preparerender":m.triggerlinesIntersect.connectElements(),m.cradleIntersect.connectElements(),I("restoreinterrupts");break;case"restoreinterrupts":m.restoreInterrupts(),I("ready");break;case"triggerboundarynotications":g.triggerBoundaryCallbacks(l),I("ready");break;case"renderupdatedcontent":p.updateCradleContent(),I("finishupdatedcontent");break;case"finishupdatedcontent":"keepload"==u.current.cache&&p.guardAgainstRunawayCaching(),"uniform"==e.current.layout?(m.triggerlinesIntersect.connectElements(),I("ready")):I("refreshDOMupdateforvariability");break;case"refreshDOMsetforvariability":I("preparesetforvariability");break;case"preparesetforvariability":h.isMountedRef.current&&(p.adjustScrollblockForVariability("setcradle"),I("finishsetforvariability"));break;case"finishsetforvariability":I("preparerender");break;case"refreshDOMupdateforvariability":I("adjustupdateforvariability");break;case"adjustupdateforvariability":setTimeout((function(){p.adjustScrollblockForVariability("updatecradle"),I("finishupdateforvariability")}),0);break;case"finishupdateforvariability":m.triggerlinesIntersect.connectElements(),m.signals.pauseCradleIntersectionObserver=!1,I("ready");break;case"channelcradleresetafterinsertremove":v.applyPortalPartitionItemsForDeleteList(),I("changelistsizeafterinsertremove");break;case"applyinsertremovechanges":case"applymovechanges":x.headDisplayComponents=x.headModelComponents,x.tailDisplayComponents=x.tailModelComponents,v.applyPortalPartitionItemsForDeleteList(),I("applyinsertremovechanges"==r?"changelistsizeafterinsertremove":"ready");break;case"changelistsizeafterinsertremove":var A=g.newListRange;g.newListRange=null,I("ready"),g.setListRange(A);break;case"clearcache":p.clearCradle(),x.headDisplayComponents=[],x.tailDisplayComponents=[],v.clearCache(),I("ready")}}),[r])}({cradleState:ne,cradleParameters:Me,isCachedRef:X,wasCachedRef:K,hasBeenRenderedRef:Y,scrollerID:I}),function(e){var r=e.cradleState,n=e.layoutHandler,o=e.setCradleState;(0,t.useEffect)((function(){switch(r){case"repositioningRender":break;case"ready":n.boundaryNotificationsRequired()&&o("triggerboundarynotications")}}),[r])}({cradleState:ne,layoutHandler:Fe,setCradleState:oe});var Ye=He.content,Qe=(0,t.useRef)(null);Qe.current=(0,t.useMemo)((function(){return[r().createElement("div",{key:"head","data-type":"headtrigger",style:Xe,ref:Ce}),r().createElement("div",{key:"tail","data-type":"tailtrigger",style:Ke,ref:Oe})]}),[Xe,Ke]);var Ze=(0,t.useRef)(null);return Ze.current=(0,t.useMemo)((function(){return{scrollerPropertiesRef:Te,cacheAPI:x,scrollerProfile:T,itemExceptionCallback:_e.callbacks.itemExceptionCallback,IDLECALLBACK_TIMEOUT:C,triggercellTriggerlinesRef:Qe}}),[T]),r().createElement(mo.Provider,{value:Ze.current},"repositioningRender"==ne?null:r().createElement("div",{"data-type":"cradle-axis",style:qe,ref:Pe},w?r().createElement("div",{"data-type":"cradle-divider",style:Ge}):null,r().createElement("div",{"data-type":"head",ref:Se,style:We},"setup"!=ne?Ye.headDisplayComponents:null),r().createElement("div",{"data-type":"tail",ref:we,style:Ve},"setup"!=ne?Ye.tailDisplayComponents:null)))};function bo(e){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bo(e)}function Io(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function So(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==bo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==bo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===bo(i)?i:String(i)),n)}var o,i}var wo=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scrollerDataMap=new Map,this.linkSupport=function(e){var r=e.cachePortalData;t.cachePortalData=r},this.unRegisterScroller=function(e,r){var n=t.scrollerDataMap,o=t.cachePortalData.itemMetadataMap;1!=n.size&&(n.delete(e),r.forEach((function(e){var r=o.get(e).partitionID;t.cachePortalData.removePartitionPortal(r,e),o.delete(e)})),t.cachePortalData.renderPortalLists())},this.clearCache=function(e){var r=t.scrollerDataMap,n=t.cachePortalData.itemMetadataMap,o=r.get(e),i=o.indexToItemIDMap,a=o.itemSet,l=o.requestedSet;1==r.size?(n.clear(),t.cachePortalData.clearCachePartitions()):(a.forEach((function(e){var r=n.get(e).partitionID;t.cachePortalData.removePartitionPortal(r,e)})),t.cachePortalData.renderPortalLists()),i.clear(),a.clear(),l.clear()},this.changeCacheListRange=function(e,r,n){if(0!=r.length){var o=t.scrollerDataMap.get(e).indexToItemIDMap,i=Array.from(o.keys());i.sort((function(e,t){return e-t}));var a=Io(r,2),l=a[0],s=a[1],c=i.at(-1),u=i.at(0);if(c>s){var d=s,f=i.filter((function(e){return e>d}));t.cachePortalData.deletePortalByIndex(e,f,n)}if(u<l){var h=l,p=i.filter((function(e){return e<h}));t.cachePortalData.deletePortalByIndex(e,p,n)}}else t.clearCache(e)}}var t,r,n;return t=e,(r=[{key:"registerScroller",value:function(e){this.scrollerDataMap.set(e,{indexToItemIDMap:new Map,itemSet:new Set,cradleParameters:null,requestedSet:new Set,portalPartitionItemsToDeleteList:null})}}])&&So(t.prototype,r),n&&So(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Po(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Co(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Co(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Oo=function(e){var n=e.partitionProps,o=e.partitionID,i=e.callback,a=Po((0,t.useState)(0),2),l=a[0],s=a[1],c=Po((0,t.useState)("setup"),2),u=c[0],d=c[1],f=(0,t.useRef)(l),h=(0,t.useRef)(!0),p=(0,t.useRef)(null),g=n.partitionMetadataMap.get(o),v=(0,t.useCallback)((function(e){p.current=e,h.current&&s(++f.current)}),[]);return(0,t.useEffect)((function(){return h.current=!0,g.forceUpdate=v,i(),function(){h.current=!1}}),[]),(0,t.useEffect)((function(){if("setup"===u)d("ready")}),[u]),r().createElement("div",{key:o,"data-type":"cachepartition","data-partitionid":o},p.current)};function Ro(e){return Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ro(e)}function Do(){Do=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),l=new T(n||[]);return o(a,"_invoke",{value:O(e,r,l)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",g="completed",v={};function m(){}function y(){}function b(){}var I={};c(I,a,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(A([])));S&&S!==r&&n.call(S,a)&&(I=S);var w=b.prototype=m.prototype=Object.create(I);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,l){var s=d(e[o],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==Ro(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=f;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var s=R(l,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?g:h,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=g,n.method="throw",n.arg=c.arg)}}}function R(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,R(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Ro(t)+" is not iterable")}return y.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},P(C.prototype),c(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(w),c(w,s,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function Eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||Ao(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ao(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Ao(e,t){if(e){if("string"==typeof e)return Mo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mo(e,t):void 0}}function Mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Ro(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ro(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ro(i)?i:String(i)),n)}var o,i}var ko=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))},jo=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalItemID=0,this.itemMetadataMap=new Map,this.linkSupport=function(e){var t=e.cacheScrollerData;n.cacheScrollerData=t},this.globalPartitionID=0,this.partitionProps={partitionMetadataMap:new Map,partitionMap:new Map,partitionRenderList:null,partitionRepoForceUpdate:null,partitionModifiedSet:new Set,partitionPtr:null},this.renderPartitionRepo=function(){n.partitionProps.partitionRenderList=Array.from(n.partitionProps.partitionMap.values()),n.partitionProps.partitionRepoForceUpdate(n.partitionProps.partitionRenderList)},this.addPartition=function(){var e=n.globalPartitionID++;n.partitionProps.partitionMetadataMap.set(e,{portalMap:new Map,mapcount:0,portalRenderList:null,modified:!1,forceUpdate:null,partitionID:e});var t={current:null},o=new Promise((function(e){t.current=e}));return n.partitionProps.partitionMap.set(e,r().createElement(Oo,{key:e,partitionProps:n.partitionProps,partitionID:e,callback:function(){t.current(e)}})),n.renderPartitionRepo(),o},this.addPartitionPortal=function(e,t,r){n.partitionProps.partitionMetadataMap.get(e).portalMap.set(t,r),n.partitionProps.partitionModifiedSet.add(e)},this.removePartitionPortal=function(e,t){var r=n.partitionProps.partitionMetadataMap.get(e);r.portalMap.delete(t),r.mapcount-=1,n.partitionProps.partitionModifiedSet.add(e)},this.renderPartition=function(e){var t=n.partitionProps.partitionMetadataMap.get(e);t&&(t.portalRenderList=Array.from(t.portalMap.values()),t.forceUpdate&&t.forceUpdate(t.portalRenderList))},this.renderPortalLists=function(){var e=n.partitionProps.partitionModifiedSet;e.size&&(e.forEach((function(e){n.renderPartition(e)})),n.partitionProps.partitionModifiedSet.clear())},this.clearCachePartitions=function(){n.partitionProps.partitionMetadataMap.clear(),n.partitionProps.partitionMap.clear(),n.partitionProps.partitionRenderList=[],n.partitionProps.partitionModifiedSet.clear(),n.partitionProps.partitionPtr=null,n.partitionProps.partitionRepoForceUpdate(null)},this.preload=function(e,t,r){var o=n.cacheScrollerData.scrollerDataMap.get(e).cradleParameters,i=o.scrollerPropertiesRef,a=o.handlersRef.current,l=a.stateHandler,s=a.serviceHandler,c=o.cradleInheritedPropertiesRef.current,u=o.cradleInternalPropertiesRef.current,d=c.getItemPack,f=u.virtualListProps,h=f.lowindex,p=f.highindex,g=[],v={current:!1},m=function(e){v.current=!0};if(l.isMountedRef.current)for(var y=n.cacheScrollerData.scrollerDataMap.get(e).indexToItemIDMap,b=s.callbacks,I=b.preloadIndexCallback,x=b.itemExceptionCallback,S=h;S<=p;S++){if(I&&I(S,{contextType:"preloadIndex",scrollerID:e}),!y.has(S)){var w=n.preloadItem(e,S,d,i,x,m,r);g.push(w)}if(v.current)break}Promise.allSettled(g).then((function(){n.renderPortalLists(),t()}))},this.applyPortalPartitionItemsForDeleteList=function(e){var t=n.cacheScrollerData.scrollerDataMap.get(e).portalPartitionItemsToDeleteList;if(t&&t.length){var r,o=To(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n.removePartitionPortal(i.partitionID,i.itemID)}}catch(e){o.e(e)}finally{o.f()}n.cacheScrollerData.scrollerDataMap.get(e).portalPartitionItemsToDeleteList=[],n.renderPortalLists()}},this.CACHE_PARTITION_SIZE=t}var t,n,o;return t=e,n=[{key:"findPartitionWithRoom",value:function(){return ko(this,void 0,void 0,Do().mark((function e(){var t,r,n,o,i,a,l,s,c;return Do().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.CACHE_PARTITION_SIZE,r=this.partitionProps.partitionMetadataMap,null===(n=this.partitionProps.partitionPtr)){e.next=7;break}if(!((o=r.get(n)).mapcount<t)){e.next=7;break}return o.mapcount+=1,e.abrupt("return",n);case 7:n=null,i=To(r),e.prev=9,i.s();case 11:if((a=i.n()).done){e.next=19;break}if(l=Eo(a.value,2),s=l[0],!((c=l[1]).mapcount<t)){e.next=17;break}return c.mapcount+=1,n=s,e.abrupt("break",19);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),i.e(e.t0);case 24:return e.prev=24,i.f(),e.finish(24);case 27:if(null!==n){e.next=33;break}return e.next=30,this.addPartition();case 30:n=e.sent,(o=r.get(n)).mapcount+=1;case 33:return this.partitionProps.partitionPtr=n,e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})))}},{key:"deletePortalByIndex",value:function(e,t,r){var n,o=Array.isArray(t)?t:[t],i=this.cacheScrollerData.scrollerDataMap.get(e),a=i.indexToItemIDMap,l=i.itemSet,s=this.itemMetadataMap,c=this.removePartitionPortal,u=[],d=To(o);try{for(d.s();!(n=d.n()).done;){var f=n.value,h=a.get(f);if(void 0!==h){var p=s.get(h),g=p.partitionID,v=p.profile;u.push({index:f,itemID:h,profile:v}),c(g,h),s.delete(h),l.delete(h),a.delete(f)}}}catch(e){d.e(e)}finally{d.f()}r&&r(u)}},{key:"registerPendingPortal",value:function(e,t){this.cacheScrollerData.scrollerDataMap.get(e).requestedSet.add(t)}},{key:"unregisterPendingPortal",value:function(e,t){var r=this.cacheScrollerData.scrollerDataMap.get(e);r&&r.requestedSet.delete(t)}},{key:"getNewItemID",value:function(){return this.globalItemID++}},{key:"getNewOrExistingItemID",value:function(e,t){var r=this.cacheScrollerData.scrollerDataMap.get(e).indexToItemIDMap;return r.has(t)?r.get(t):this.getNewItemID()}},{key:"addCacheItemToScroller",value:function(e,t,r){var n=this.cacheScrollerData.scrollerDataMap.get(e);if(!n)return null;var o=this.itemMetadataMap.get(t);return o?(o.scrollerID=e,o.index=r,n.itemSet.add(t),n.indexToItemIDMap.set(r,t),o):null}},{key:"createPortal",value:function(e,t,n,o,i,a,l){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return ko(this,void 0,void 0,Do().mark((function c(){var u,d,f,h,p;return Do().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(this.unregisterPendingPortal(e,n),u=this.cacheScrollerData.scrollerDataMap.get(e)){c.next=4;break}return c.abrupt("return",null);case 4:return d=No(n,o),c.next=7,this.findPartitionWithRoom();case 7:return f=c.sent,h=r().createElement("div",{"data-type":"portalwrapper",key:o,"data-itemid":o},r().createElement(vr,{key:o,node:d}," ",t," ")),this.addPartitionPortal(f,o,h),p={itemID:o,scrollerID:e,index:n,partitionID:f,portalNode:d,scrollerContext:i,component:t,dndOptions:a,profile:l},this.itemMetadataMap.set(o,p),u.itemSet.add(o),u.indexToItemIDMap.set(n,o),s||this.renderPortalLists(),c.abrupt("return",p);case 16:case"end":return c.stop()}}),c,this)})))}},{key:"preloadItem",value:function(e,t,n,o,i,a,l){return ko(this,void 0,void 0,Do().mark((function a(){var s,c,u,d,f,h,p,g,v,m,y;return Do().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=this.getNewItemID(),g=l?{contextType:"dndFetch",accept:l,scrollerID:e}:{contextType:"fetch",scrollerID:e},a.prev=2,a.next=5,n(t,s,g);case 5:return u=a.sent,h=(v=u).dndOptions,p=v.profile,a.next=11,u.component;case 11:null===(d=a.sent)&&(c=d=void 0),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(2),c=d=void 0,f=a.t0;case 19:if(h=null!=h?h:{},p=null!=p?p:{},void 0!==d&&(r().isValidElement(d)||(c=d,d=void 0,f=new Error("invalid React element"))),void 0===d){a.next=29;break}return y={scroller:o,cell:{current:{index:t,itemID:s}}},m=d.props.hasOwnProperty("scrollerContext")?r().cloneElement(d,{scrollerContext:y}):d,a.next=27,this.createPortal(e,m,t,s,y,h,p,!0);case 27:a.next=30;break;case 29:i&&i(t,{contextType:"itemException",itemID:s,scrollerID:e,profile:p,dndOptions:h,component:c,action:"preload",error:f.message});case 30:case"end":return a.stop()}}),a,this,[[2,15]])})))}},{key:"hasPortal",value:function(e){return this.itemMetadataMap.has(e)}},{key:"getPortalMetadata",value:function(e){if(this.hasPortal(e))return this.itemMetadataMap.get(e)}}],n&&Lo(t.prototype,n),o&&Lo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),No=function(e,t){var r=yr(),n=r.element;return n.dataset.type="contentenvelope",n.dataset.index=e,n.dataset.cacheitemid=t,r};function Ho(e){return Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(e)}function Fo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||Bo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Bo(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Bo(e,t){if(e){if("string"==typeof e)return zo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zo(e,t):void 0}}function zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Uo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Ho(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ho(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ho(i)?i:String(i)),n)}var o,i}var Wo=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.linkSupport=function(e){var r=e.cacheScrollerData,n=e.cachePortalData;t.cacheScrollerData=r,t.cachePortalData=n},this.insertOrRemoveCacheIndexesFromScroller=function(e,r,n,o,i){var a=1===o,l=-1===o,s=t.cacheScrollerData.scrollerDataMap.get(e).indexToItemIDMap,c=t.cachePortalData.itemMetadataMap,u=t.cacheScrollerData.scrollerDataMap.get(e).itemSet,d=Vo({highchangeIndex:n,lowchangeIndex:r,isInserting:a,listrange:i}),f=d.shiftStartIndex,h=d.rangeIncrement,p=d.changeStartIndex,g=qo({indexToItemIDMap:s,shiftStartIndex:f,lowchangeIndex:r,highchangeIndex:n,isInserting:a}),v=g.cacheIndexesToShiftList,m=g.cacheIndexesToReplaceList,y=g.cacheIndexesToRemoveList,b=g.cacheItemsToRemoveList;a&&v.reverse();var I=[],x=new Set;v.forEach((function(e){var t=s.get(e),r=e+h;l&&(x.add(e),x.delete(r)),s.set(r,t),c.get(t).index=r,I.push(r)}));var S=[];if(a){var w,P=_o(m);try{for(P.s();!(w=P.n()).done;){var C=w.value;s.delete(C)}}catch(e){P.e(e)}finally{P.f()}}else{var O,R=_o(b);try{for(R.s();!(O=R.n()).done;){var D=O.value;u.delete(D)}}catch(e){R.e(e)}finally{R.f()}for(var E=Array.from(x),T=0,A=E;T<A.length;T++){var M=A[T];s.delete(M)}S=y.concat(E)}return a&&I.reverse(),[p,h,I,S,m,b]}}var t,r,n;return t=e,(r=[{key:"moveIndex",value:function(e,t,r,n){var o,i=this.cacheScrollerData.scrollerDataMap.get(e).indexToItemIDMap,a=this.cachePortalData.itemMetadataMap,l=n-r+1,s=t-r,c=t+(l-1),u=s>0?"up":"down",d=Array.from(i.keys()).sort((function(e,t){return e-t})),f=d.slice().reverse(),h=d.findIndex((function(e){return e>=t})),p=d.findIndex((function(e){return e>=r})),g=f.findIndex((function(e){return e<=c})),v=f.findIndex((function(e){return e<=n})),m=d.length;-1!=g&&(g=m-1-g),-1!=v&&(v=m-1-v),o=-1==p&&-1==v?[]:-1==v?d.slice(p):d.slice(p,v+1);var y,b,I=new Map,x=_o(o);try{for(x.s();!(y=x.n()).done;){var S=y.value;I.set(S,i.get(S))}}catch(e){x.e(e)}finally{x.f()}b="down"==u?-1==h&&-1==p?[]:-1==p?d.slice(h):d.slice(h,p):-1==g&&-1==v?[]:-1==g?d.slice(v+1):d.slice(v+1,g+1);var w,P=new Map,C=_o(b);try{for(C.s();!(w=C.n()).done;){var O=w.value;P.set(O,i.get(O))}}catch(e){C.e(e)}finally{C.f()}var R=new Set,D=[],E=[];P.forEach((function(e,t){var r="up"==u?t-l:t+l;i.delete(t),R.add(t),R.add(r);var n=a.get(e);n.index=r,D.push({index:r,itemID:e});var o=n.profile;E.push({fromIndex:t,toIndex:r,itemID:e,profile:o})}));var T=[],A=[];I.forEach((function(e,t){var r=t+s;i.delete(t),R.add(t),R.add(r);var n=a.get(e);n.index=r,T.push({index:r,itemID:e});var o=n.profile;A.push({fromIndex:t,toIndex:r,itemID:e,profile:o})})),T.forEach((function(e){i.set(e.index,e.itemID)})),D.forEach((function(e){i.set(e.index,e.itemID)}));var M=Array.from(R);return M.sort((function(e,t){return e-t})),[M,A,E]}},{key:"insertOrRemoveCacheIndexes",value:function(e,t,r,n,o){var i,a=Fo(this.insertOrRemoveCacheIndexesFromScroller(e,t,r,n,o),6),l=a[0],s=a[1],c=a[2],u=a[3],d=a[4],f=a[5],h=this.cachePortalData.itemMetadataMap,p=[],g=[],v=_o(f);try{for(v.s();!(i=v.n()).done;){var m=i.value,y=h.get(m),b=y.partitionID,I=y.index,x=y.profile;p.push({index:I,itemID:m,profile:x}),g.push({itemID:m,partitionID:b}),h.delete(m)}}catch(e){v.e(e)}finally{v.f()}return[l,s,c,u,d,p,g]}}])&&Uo(t.prototype,r),n&&Uo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Vo=function(e){var t=e.lowchangeIndex,r=e.highchangeIndex,n=e.listrange,o=e.isInserting,i=r-t+1,a=o?i:-i,l=Fo(n,2),s=l[0],c=(l[1],o?t:r+(a+1));return{rangeIncrement:a,shiftStartIndex:o?Math.max(t,s):r+1,changeStartIndex:c}},qo=function(e){var t,r,n=e.indexToItemIDMap,o=e.shiftStartIndex,i=e.lowchangeIndex,a=e.highchangeIndex,l=e.isInserting,s=Array.from(n.keys()).sort((function(e,t){return e-t})),c=s.findIndex((function(e){return e>=o})),u=s.findIndex((function(e){return e>=i&&e<=a})),d=Array.from(s).reverse().findIndex((function(e){return e<=a&&e>=i}));-1!=d&&(d=s.length-1-d)<u&&(d=-1),-1==u?(t=[],r=[]):-1==d?(t=s.slice(u),r=l?t.slice():-1==c?[]:s.slice(c)):(t=s.slice(u,d+1),r=l?s.slice(c):-1==c?[]:s.slice(c));var f=[],h=[],p=[];if(l)f=t;else{var g,v=_o(h=t);try{for(v.s();!(g=v.n()).done;){var m=g.value;p.push(n.get(m)),n.delete(m)}}catch(e){v.e(e)}finally{v.f()}}return{cacheIndexesToShiftList:r,cacheIndexesToReplaceList:f,cacheIndexesToRemoveList:h,cacheItemsToRemoveList:p}};function Go(e){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(e)}function Xo(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Yo(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Ko(e){return function(e){if(Array.isArray(e))return Qo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Yo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yo(e,t){if(e){if("string"==typeof e)return Qo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qo(e,t):void 0}}function Qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Go(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Go(i)?i:String(i)),n)}var o,i}var Jo=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalItemID=0,this.globalPartitionID=0,this.getFacade=function(e){return{get indexToItemIDMap(){return this.getIndexToItemIDMap()},getIndexToItemIDMap:function(){return r.cacheScrollerData.scrollerDataMap.get(e).indexToItemIDMap},get itemSet(){return this.getItemSet()},getItemSet:function(){return r.cacheScrollerData.scrollerDataMap.get(e).itemSet},itemMetadataMap:r.cachePortalData.itemMetadataMap,get requestedSet(){return this.getRequestedSet()},getRequestedSet:function(){return r.cacheScrollerData.scrollerDataMap.get(e).requestedSet},set partitionRepoForceUpdate(e){this.setPartitionRepoForceUpdate(e)},setPartitionRepoForceUpdate:function(e){r.cachePortalData.partitionProps.partitionRepoForceUpdate=e},set cradleParameters(e){this.setCradleParameters(e)},setCradleParameters:function(t){r.cacheScrollerData.scrollerDataMap.get(e).cradleParameters=t},set portalPartitionItemsToDeleteList(e){this.setPortalPartitionItemsForDeleteList(e)},setPortalPartitionItemsForDeleteList:function(t){r.cacheScrollerData.scrollerDataMap.get(e).portalPartitionItemsToDeleteList=t},get instance(){return this.getInstance()},getInstance:function(){return r},unRegisterScroller:function(t){return r.cacheScrollerData.unRegisterScroller(e,t)},renderPartitionRepo:function(){return r.cachePortalData.renderPartitionRepo()},renderPortalLists:function(){return r.cachePortalData.renderPortalLists()},clearCache:function(){return r.cacheScrollerData.clearCache(e)},changeCacheListRange:function(t,n){return r.cacheScrollerData.changeCacheListRange(e,t,n)},matchCacheToCradle:function(t,n){return r.matchCacheToCradle(e,t,n)},pareCacheToMax:function(t,n,o){return r.pareCacheToMax(e,t,n,o)},guardAgainstRunawayCaching:function(t,n,o){return r.guardAgainstRunawayCaching(e,t,n,o)},preload:function(t,n){return r.cachePortalData.preload(e,t,n)},getCacheIndexMap:function(){return r.getCacheIndexMap(e)},getCradleIndexMap:function(t){return r.getCradleIndexMap(e,t)},getCacheItemMap:function(){return r.getCacheItemMap(e)},moveIndex:function(t,n,o){return r.cacheService.moveIndex(e,t,n,o)},insertOrRemoveCacheIndexes:function(t,n,o,i){return r.cacheService.insertOrRemoveCacheIndexes(e,t,n,o,i)},insertOrRemoveCacheIndexesFromScroller:function(t,n,o,i){return r.cacheService.insertOrRemoveCacheIndexesFromScroller(e,t,n,o,i)},registerPendingPortal:function(t){return r.cachePortalData.registerPendingPortal(e,t)},unregisterPendingPortal:function(t){return r.cachePortalData.unregisterPendingPortal(e,t)},getNewItemID:function(){return r.cachePortalData.getNewItemID()},getNewOrExistingItemID:function(t){return r.cachePortalData.getNewOrExistingItemID(e,t)},addCacheItemToScroller:function(t,n){return r.cachePortalData.addCacheItemToScroller(e,t,n)},createPortal:function(t,n,o,i,a,l){return r.cachePortalData.createPortal(e,t,n,o,i,a,l,!1)},deletePortalByIndex:function(t,n){return r.cachePortalData.deletePortalByIndex(e,t,n)},applyPortalPartitionItemsForDeleteList:function(){return r.cachePortalData.applyPortalPartitionItemsForDeleteList(e)},hasPortal:function(e){return r.cachePortalData.hasPortal(e)},getPortalMetadata:function(e){return r.cachePortalData.getPortalMetadata(e)}}},this.matchCacheToCradle=function(e,t,n){var o=Array.from(r.cacheScrollerData.scrollerDataMap.get(e).indexToItemIDMap.keys()).filter((function(e){return!t.includes(e)}));return!!o.length&&(r.cachePortalData.deletePortalByIndex(e,o,n),!0)},this.pareCacheToMax=function(e,t,n,o){var i=n.length;if(!t||!i)return!1;var a=Math.max(i,t),l=r.cacheScrollerData.scrollerDataMap.get(e).indexToItemIDMap,s=r.cacheScrollerData.scrollerDataMap.get(e).requestedSet;if(l.size+s.size<=a)return!1;var c=Array.from(l.keys()),u=Array.from(s.keys()),d=[].concat(c,u);d.sort((function(e,t){return e-t}));var f=d.length,h=f-a,p=n[0],g=n[i-1],v=d.indexOf(p),m=v+(f-(d.indexOf(g)+1)),y=Math.floor(v/m*h),b=h-y,I=d.slice(0,y),x=d.slice(f-b),S=[].concat(Ko(I),Ko(x));return r.cachePortalData.deletePortalByIndex(e,S,o),!0},this.guardAgainstRunawayCaching=function(e,t,n,o){if(!t)return!1;var i=r.cacheScrollerData.scrollerDataMap.get(e),a=i.indexToItemIDMap,l=i.requestedSet,s=Math.max(n,t);return!(a.size+l.size<=s*o)},this.cacheScrollerData=new wo,this.cachePortalData=new jo(t),this.cacheService=new Wo,this.cacheScrollerData.linkSupport({cachePortalData:this.cachePortalData}),this.cachePortalData.linkSupport({cacheScrollerData:this.cacheScrollerData}),this.cacheService.linkSupport({cacheScrollerData:this.cacheScrollerData,cachePortalData:this.cachePortalData})}var t,r,n;return t=e,(r=[{key:"registerScroller",value:function(e){return this.cacheScrollerData.registerScroller(e),this.getFacade(e)}},{key:"getCacheIndexMap",value:function(e){return new Map(this.cacheScrollerData.scrollerDataMap.get(e).indexToItemIDMap)}},{key:"getCradleIndexMap",value:function(e,t){var r,n=new Map,o=this.cacheScrollerData.scrollerDataMap.get(e).indexToItemIDMap,i=Xo(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.set(a,o.get(a))}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"getCacheItemMap",value:function(e){var t,r=new Map,n=this.cacheScrollerData.scrollerDataMap.get(e).itemSet,o=this.cachePortalData.itemMetadataMap,i=Xo(n);try{for(i.s();!(t=i.n()).done;){var a=t.value,l=o.get(a),s=l.index,c=l.component,u=l.profile;r.set(a,{index:s,component:c,profile:u})}}catch(e){i.e(e)}finally{i.f()}return r}}])&&Zo(t.prototype,r),n&&Zo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ei(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ei(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const ti=function(e){var n=e.CACHE_PARTITION_SIZE,o=e.getCacheAPI,i=e.getPortalCacheUpdateFunction,a=(0,t.useRef)(null),l=(0,t.useRef)(null),s=(0,t.useCallback)((function(e){l.current=e,v.current&&d(++f.current)}),[]);(0,t.useEffect)((function(){if(!a.current){var e=new Jo(n);a.current=e,o(e),i(s)}}),[]);var c=$o((0,t.useState)(0),2),u=c[0],d=c[1],f=(0,t.useRef)(u),h=$o((0,t.useState)("setup"),2),p=h[0],g=h[1],v=(0,t.useRef)(!0);return(0,t.useEffect)((function(){return v.current=!0,function(){v.current=!1}}),[]),(0,t.useEffect)((function(){if("setup"===p)g("ready")}),[p]),r().createElement("div",{"data-type":"portal-master"},l.current)};function ri(e){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(e)}function ni(e){return function(e){if(Array.isArray(e))return ai(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ii(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||ii(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){if(e){if("string"==typeof e)return ai(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ai(e,t):void 0}}function ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var li,si,ci=(li=/iP(ad|od|hone)/i.test(window.navigator.userAgent),si=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),li&&si);function ui(e){e.error;var t=e.resetErrorBoundary;return r().createElement("div",{role:"alert",style:{margin:"3px"}},r().createElement("p",null,"Something went wrong inside react-infinite-grid-scroller. See the console for details."),r().createElement("p",null,"Click to cancel the error and try to continue."),r().createElement("button",{style:{border:"1px solid black",margin:"3px",padding:"3px"},onClick:t},"Cancel error"))}var di=0,fi=r().createContext(Object.assign({},nt)),hi=r().createContext(null);const pi=function(e){var n=oi((0,t.useState)("setup"),2),o=n[0],i=n[1],a=e.cellHeight,l=e.cellWidth,s=e.cellMinHeight,c=e.cellMinWidth,u=e.getItemPack,d=e.getExpansionCount,f=e.placeholder,h=e.startingListRange,p=e.orientation,g=e.gap,v=e.padding,m=e.layout,y=e.runwaySize,b=e.startingIndex,I=e.cache,x=e.cacheMax,S=e.usePlaceholder,w=e.useScrollTracker,P=e.styles,C=e.placeholderMessages,O=void 0===C?{}:C,R=e.callbacks,D=e.technical,E=e.cacheAPI,T=e.dndOptions,A=e.profile,M=e.scrollerContext,L=e.isDndMaster;e.platformComponent;p=null!=p?p:"vertical",g=null!=g?g:0,v=null!=v?v:0,m=null!=m?m:"uniform",s=null!=s?s:25,c=null!=c?c:25,y=null!=y?y:1,b=null!=b?b:0,I=null!=I?I:"cradle",x=null!=x?x:0,S=null==S||S,w=null==w||w,P=null!=P?P:{},O=null!=O?O:{},R=null!=R?R:{},D=null!=D?D:{},E=null!=E?E:null,L=null!=L&&L,T=null!=T?T:{};var k=(0,t.useContext)(fi),j=(0,t.useRef)(null),N=j.current;(0,t.useEffect)((function(){return null===j.current&&(j.current=di++,L&&(k.scrollerID=j.current)),function(){qe()}}),[]);var H=!1;l&&a&&u||(console.log("RIGS: cellWidth, cellHeight, and getItemPack required"),H=!0),H||(l=+l,a=+a,(isNaN(l)||isNaN(a)||"function"!=typeof u)&&(console.log("RIGS: cellWidth and cellHeifht must be nunmbers; getItemPack must be a functions"),H=!0));var F=(0,t.useRef)({top:null,right:null,bottom:null,left:null,source:null,original:null,list:[],CSS:""}),_=F.current;if(String(e.padding)!==String(_.source)){if(_.source=e.padding,Array.isArray(v)){var B=!1;v.length>4&&(B=!0),B||v.forEach((function(e,t,r){isNaN(e)&&(B=!0)})),_.original=B?[0]:v}else v=+v,isNaN(v)?_.original=[0]:_.original=[v];var z,U,W=ni(_.original);switch(_.CSS=W.join("px ")+"px",W.length){case 1:z=oi(W,1)[0],W.push(z,z,z);break;case 2:var V=oi(W,2);z=V[0],U=V[1],W.push(z,U);case 3:var q=oi(W,2);z=q[0],U=q[1],W.push(U)}_.list=W;var G=oi(W,4),X=G[0],K=G[1],Y=G[2],Q=G[3];Object.assign(_,{top:+X,right:+K,bottom:+Y,left:+Q}),F.current=_=Object.assign({},_)}var Z=(0,t.useRef)({column:null,row:null,source:null,original:null,list:[],CSS:""}),J=Z.current;if(String(e.gap)!==String(J.source)){if(J.source=e.gap,Array.isArray(g)){var $=!1;g.length>2&&($=!0),$||g.forEach((function(e,t,r){isNaN(e)&&($=!0)})),J.original=$?[0]:g}else g=+g,isNaN(g)?J.original=[0]:J.original=[g];var ee,te=ni(J.original);if(J.CSS=te.join("px ")+"px",1==te.length)ee=oi(te,1)[0],te.push(ee);J.list=te;var re=oi(te,2),ne=re[0],oe=re[1];Object.assign(J,{column:+ne,row:+oe}),Z.current=J=Object.assign({},J)}var ie={cellMinHeight:s,cellMinWidth:c,startingIndex:b,runwaySize:y,cacheMax:x},ae={cellMinHeight:s,cellMinWidth:c,startingIndex:b,runwaySize:y,cacheMax:x},le=0;for(var se in ae)isNaN(ae[se])&&le++;if(le&&console.error("Error: invalid number - compare originalValues and verifiedValues",ie,ae),le||(s=Math.max(s,25),c=Math.max(c,25),s=Math.min(a,s),c=Math.min(l,c),y=Math.max(1,y)),!le&&"setup"==o){var ce=!0;if(h&&Array.isArray(h)&&(2==h.length||0==h.length)||(ce=!1),ce){var ue=oi(h,2),de=ue[0],fe=ue[1];de=+de,fe=+fe,(isNaN(de)||isNaN(fe)||de>fe)&&(ce=!1)}ce||(h=[])}["horizontal","vertical"].includes(p)||(p="vertical"),["preload","keepload","cradle"].includes(I)||(I="cradle"),["uniform","variable"].includes(m)||(m="uniform"),"boolean"!=typeof S&&(S=!0),"boolean"!=typeof w&&(w=!0),"object"!==ri(P)&&(P={}),"object"!==ri(O)&&(O={}),"object"!==ri(R)&&(R={}),"object"!==ri(D)&&(D={}),"object"!==ri(T)&&(T={}),null!==E&&"object"!==ri(E)&&(E=null);var he={orientation:p,cellHeight:a,cellWidth:l,cellMinHeight:s,cellMinWidth:c,layout:m},pe=(0,t.useRef)(he),ge=(0,t.useRef)(P),ve=(0,t.useRef)(R),me=(0,t.useRef)(O),ye=D,be=ye.showAxis,Ie=ye.triggerlineOffset,xe=ye.VIEWPORT_RESIZE_TIMEOUT,Se=ye.ONAFTERSCROLL_TIMEOUT,we=ye.IDLECALLBACK_TIMEOUT,Pe=ye.MAX_CACHE_OVER_RUN,Ce=ye.CACHE_PARTITION_SIZE,Oe=ye.SCROLLTAB_INTERVAL_MILLISECONDS,Re=ye.SCROLLTAB_INTERVAL_PIXELS;xe=null!=xe?xe:250,Se=null!=Se?Se:100,we=null!=we?we:250,Pe=null!=Pe?Pe:1.5,Ce=null!=Ce?Ce:30,Oe=null!=Oe?Oe:100,Re=null!=Re?Re:100,"boolean"!=typeof be&&(be=!1),Ie=null!=Ie?Ie:10;var De=(0,t.useRef)(E),Ee=(0,t.useRef)(null),Te=(0,t.useRef)(h),Ae=Te.current,Me=oi(Ae,2),Le=Me[0],ke=Me[1],je=0==Ae.length?0:ke-Le+1,Ne={size:je,range:Ae,lowindex:Le,highindex:ke},He=(0,t.useRef)(Ne),Fe=(0,t.useRef)({scrollerID:N,dndOptions:T,profile:A,droppedIndex:null,displacedIndex:null,dndFetchIndex:null,dndFetchItem:null,cacheAPI:null,stateHandler:null,serviceHandler:null,handlersRef:null,cradleParameters:null}),_e=oi(Te.current,2),Be=_e[0],ze=_e[1];void 0!==Be&&(b=Math.max(Be,b));var Ue=(0,t.useRef)({trackingBlockScrollPos:null,trackingXBlockScrollPos:null,blockScrollProperty:null,blockXScrollProperty:null,targetAxisReferencePosition:null,targetPixelOffsetAxisFromViewport:null}).current;(0,t.useEffect)((function(){je?(b=Math.max(b,Be),b=Math.min(b,ze),Ue.targetAxisReferencePosition=b-Be):Ue.targetAxisReferencePosition=0,Ue.targetPixelOffsetAxisFromViewport=0}),[]),vi(Ne,He.current)||(He.current=Ne),vi(he,pe.current)||(pe.current=he),vi(P,ge.current)||(ge.current=P),vi(R,ve.current)||(ve.current=R),vi(O,me.current)||(me.current=O);var We=!E,Ve=(0,t.useRef)(!0);(0,t.useEffect)((function(){return Ve.current=!0,function(){Ve.current=!1}}),[]);var qe=function(){Fe.current={scrollerID:null,dndOptions:null,profile:null,droppedIndex:null,displacedIndex:null,dndFetchIndex:null,dndFetchItem:null,cacheAPI:null,stateHandler:null,serviceHandler:null,handlersRef:null,cradleParameters:null}};(0,t.useEffect)((function(){var e=ge.current.dndHighlights;if(e){var t=document.querySelector(":root");e.source&&t.style.setProperty("--rigs-highlight-source",e.source),e.target&&t.style.setProperty("--rigs-highlight-target",e.target),e.dropped&&t.style.setProperty("--rigs-highlight-dropped",e.dropped),e.scroller&&t.style.setProperty("--rigs-highlight-scrollercandrop",e.scroller),e.scrolltab&&t.style.setProperty("--rigs-highlight-scrolltab",e.scrolltab)}}),[]),(0,t.useEffect)((function(){var e,t;if(k.installed){var r=null===(e=Fe.current.dndOptions)||void 0===e?void 0:e.enabled;Fe.current.dndOptions=T;var n=null!==(t=Fe.current.dndOptions.enabled)&&void 0!==t?t:k.enabled;Fe.current.dndOptions.enabled!==n&&(Fe.current.dndOptions.enabled=n),r!==n&&i("update")}else Fe.current.dndOptions&&qe()}),[T,k.installed]);var Ge=(0,t.useCallback)((function(e){if(0==e.length)0;else{var t=oi(e,2),r=t[0];t[1]-r+1}Te.current=e,ve.current.changeListRangeCallback&&ve.current.changeListRangeCallback(e,{contextType:"changeListRange",scrollerID:j.current}),i("setlistprops")}),[]),Xe=(0,t.useRef)(null);return(0,t.useEffect)((function(){if(!H&&!le){switch(o){case"setup":De.current=De.current.registerScroller(j.current),Xe.current=De.current.itemSet,Ee.current&&(De.current.partitionRepoForceUpdate=Ee.current),i("ready");break;case"update":case"setlistprops":i("ready")}return function(){Ve.current||De.current.unRegisterScroller(Xe.current)}}}),[o,H,le]),le||H?r().createElement("div",null,"error: see console."):r().createElement(hi.Provider,{value:Fe.current},r().createElement(st,{FallbackComponent:ui,onReset:function(){},onError:function(){}},"setup"!=o&&r().createElement(Wt,{gridSpecs:pe.current,styles:ge.current,scrollerID:N,useScrollTracker:w,VIEWPORT_RESIZE_TIMEOUT:xe,SCROLLTAB_INTERVAL_MILLISECONDS:Oe,SCROLLTAB_INTERVAL_PIXELS:Re},r().createElement(Xt,{gridSpecs:pe.current,paddingProps:_,gapProps:J,styles:ge.current,virtualListSpecs:He.current,scrollerID:N},r().createElement(vo,{gridSpecs:pe.current,paddingProps:_,gapProps:J,styles:ge.current,virtualListSpecs:He.current,setVirtualListRange:Ge,cache:I,cacheMax:x,userCallbacks:ve.current,startingIndex:b,getItemPack:u,getExpansionCount:d,placeholder:f,placeholderMessages:me.current,runwaySize:y,triggerlineOffset:Ie,scrollerContext:M,cradlePositionData:Ue,scrollerProfile:A,cacheAPI:De.current,usePlaceholder:S,showAxis:be,ONAFTERSCROLL_TIMEOUT:Se,IDLECALLBACK_TIMEOUT:we,MAX_CACHE_OVER_RUN:Pe,scrollerID:N}))),r().createElement("div",{"data-type":"cachewrapper"},We&&r().createElement("div",{"data-type":"cacheroot",style:gi},r().createElement(ti,{getCacheAPI:function(e){De.current=e},getPortalCacheUpdateFunction:function(e){Ee.current=e},CACHE_PARTITION_SIZE:Ce})))))};var gi={display:"none"};function vi(e,t){if(!e||!t)return!1;for(var r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];if(!Object.is(e[o],t[o]))return!1}return!0}})(),i})()));